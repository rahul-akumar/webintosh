const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CRafEK3T.js","./error-404.Envp5M3U.css","./CAbslg5S.js","./error-500.DIywm0Qo.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Cd(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const et={},Xi=[],Nn=()=>{},Eb=()=>!1,No=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Rd=t=>t.startsWith("onUpdate:"),Tt=Object.assign,Pd=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},kb=Object.prototype.hasOwnProperty,Ge=(t,e)=>kb.call(t,e),be=Array.isArray,Zi=t=>Oo(t)==="[object Map]",$l=t=>Oo(t)==="[object Set]",ep=t=>Oo(t)==="[object Date]",Ae=t=>typeof t=="function",lt=t=>typeof t=="string",En=t=>typeof t=="symbol",Je=t=>t!==null&&typeof t=="object",ly=t=>(Je(t)||Ae(t))&&Ae(t.then)&&Ae(t.catch),cy=Object.prototype.toString,Oo=t=>cy.call(t),Ab=t=>Oo(t).slice(8,-1),uy=t=>Oo(t)==="[object Object]",xd=t=>lt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,er=Cd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ul=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Sb=/-(\w)/g,yn=Ul(t=>t.replace(Sb,(e,n)=>n?n.toUpperCase():"")),Cb=/\B([A-Z])/g,Ys=Ul(t=>t.replace(Cb,"-$1").toLowerCase()),jl=Ul(t=>t.charAt(0).toUpperCase()+t.slice(1)),Uc=Ul(t=>t?`on${jl(t)}`:""),Os=(t,e)=>!Object.is(t,e),Ma=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},bu=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},Xa=t=>{const e=parseFloat(t);return isNaN(e)?t:e},dy=t=>{const e=lt(t)?Number(t):NaN;return isNaN(e)?t:e};let tp;const Bl=()=>tp||(tp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function nt(t){if(be(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],i=lt(s)?Mb(s):nt(s);if(i)for(const r in i)e[r]=i[r]}return e}else if(lt(t)||Je(t))return t}const Rb=/;(?![^(]*\))/g,Pb=/:([^]+)/,xb=/\/\*[^]*?\*\//g;function Mb(t){const e={};return t.replace(xb,"").split(Rb).forEach(n=>{if(n){const s=n.split(Pb);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Ee(t){let e="";if(lt(t))e=t;else if(be(t))for(let n=0;n<t.length;n++){const s=Ee(t[n]);s&&(e+=s+" ")}else if(Je(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Db(t){if(!t)return null;let{class:e,style:n}=t;return e&&!lt(e)&&(t.class=Ee(e)),n&&(t.style=nt(n)),t}const Nb="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ob=Cd(Nb);function hy(t){return!!t||t===""}function Vb(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=zl(t[s],e[s]);return n}function zl(t,e){if(t===e)return!0;let n=ep(t),s=ep(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=En(t),s=En(e),n||s)return t===e;if(n=be(t),s=be(e),n||s)return n&&s?Vb(t,e):!1;if(n=Je(t),s=Je(e),n||s){if(!n||!s)return!1;const i=Object.keys(t).length,r=Object.keys(e).length;if(i!==r)return!1;for(const o in t){const a=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!zl(t[o],e[o]))return!1}}return String(t)===String(e)}function Lb(t,e){return t.findIndex(n=>zl(n,e))}const fy=t=>!!(t&&t.__v_isRef===!0),X=t=>lt(t)?t:t==null?"":be(t)||Je(t)&&(t.toString===cy||!Ae(t.toString))?fy(t)?X(t.value):JSON.stringify(t,py,2):String(t),py=(t,e)=>fy(e)?py(t,e.value):Zi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,i],r)=>(n[jc(s,r)+" =>"]=i,n),{})}:$l(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>jc(n))}:En(e)?jc(e):Je(e)&&!be(e)&&!uy(e)?String(e):e,jc=(t,e="")=>{var n;return En(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let jt;class my{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=jt,!e&&jt&&(this.index=(jt.scopes||(jt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=jt;try{return jt=this,e()}finally{jt=n}}}on(){++this._on===1&&(this.prevScope=jt,jt=this)}off(){this._on>0&&--this._on===0&&(jt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Md(t){return new my(t)}function Dd(){return jt}function Fb(t,e=!1){jt&&jt.cleanups.push(t)}let tt;const Bc=new WeakSet;class gy{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,jt&&jt.active&&jt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Bc.has(this)&&(Bc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||vy(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,np(this),_y(this);const e=tt,n=In;tt=this,In=!0;try{return this.fn()}finally{wy(this),tt=e,In=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Vd(e);this.deps=this.depsTail=void 0,np(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Bc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Tu(this)&&this.run()}get dirty(){return Tu(this)}}let yy=0,no,so;function vy(t,e=!1){if(t.flags|=8,e){t.next=so,so=t;return}t.next=no,no=t}function Nd(){yy++}function Od(){if(--yy>0)return;if(so){let e=so;for(so=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;no;){let e=no;for(no=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function _y(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function wy(t){let e,n=t.depsTail,s=n;for(;s;){const i=s.prevDep;s.version===-1?(s===n&&(n=i),Vd(s),$b(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}t.deps=e,t.depsTail=n}function Tu(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(by(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function by(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===yo)||(t.globalVersion=yo,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Tu(t))))return;t.flags|=2;const e=t.dep,n=tt,s=In;tt=t,In=!0;try{_y(t);const i=t.fn(t._value);(e.version===0||Os(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{tt=n,In=s,wy(t),t.flags&=-3}}function Vd(t,e=!1){const{dep:n,prevSub:s,nextSub:i}=t;if(s&&(s.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)Vd(r,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function $b(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let In=!0;const Ty=[];function is(){Ty.push(In),In=!1}function rs(){const t=Ty.pop();In=t===void 0?!0:t}function np(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=tt;tt=void 0;try{e()}finally{tt=n}}}let yo=0;class Ub{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ld{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!tt||!In||tt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==tt)n=this.activeLink=new Ub(tt,this),tt.deps?(n.prevDep=tt.depsTail,tt.depsTail.nextDep=n,tt.depsTail=n):tt.deps=tt.depsTail=n,Iy(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=tt.depsTail,n.nextDep=void 0,tt.depsTail.nextDep=n,tt.depsTail=n,tt.deps===n&&(tt.deps=s)}return n}trigger(e){this.version++,yo++,this.notify(e)}notify(e){Nd();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Od()}}}function Iy(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)Iy(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Za=new WeakMap,gi=Symbol(""),Iu=Symbol(""),vo=Symbol("");function zt(t,e,n){if(In&&tt){let s=Za.get(t);s||Za.set(t,s=new Map);let i=s.get(n);i||(s.set(n,i=new Ld),i.map=s,i.key=n),i.track()}}function Qn(t,e,n,s,i,r){const o=Za.get(t);if(!o){yo++;return}const a=c=>{c&&c.trigger()};if(Nd(),e==="clear")o.forEach(a);else{const c=be(t),u=c&&xd(n);if(c&&n==="length"){const d=Number(s);o.forEach((h,p)=>{(p==="length"||p===vo||!En(p)&&p>=d)&&a(h)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(vo)),e){case"add":c?u&&a(o.get("length")):(a(o.get(gi)),Zi(t)&&a(o.get(Iu)));break;case"delete":c||(a(o.get(gi)),Zi(t)&&a(o.get(Iu)));break;case"set":Zi(t)&&a(o.get(gi));break}}Od()}function jb(t,e){const n=Za.get(t);return n&&n.get(e)}function Fi(t){const e=Ue(t);return e===t?e:(zt(e,"iterate",vo),mn(t)?e:e.map(Mt))}function Hl(t){return zt(t=Ue(t),"iterate",vo),t}const Bb={__proto__:null,[Symbol.iterator](){return zc(this,Symbol.iterator,Mt)},concat(...t){return Fi(this).concat(...t.map(e=>be(e)?Fi(e):e))},entries(){return zc(this,"entries",t=>(t[1]=Mt(t[1]),t))},every(t,e){return qn(this,"every",t,e,void 0,arguments)},filter(t,e){return qn(this,"filter",t,e,n=>n.map(Mt),arguments)},find(t,e){return qn(this,"find",t,e,Mt,arguments)},findIndex(t,e){return qn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return qn(this,"findLast",t,e,Mt,arguments)},findLastIndex(t,e){return qn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return qn(this,"forEach",t,e,void 0,arguments)},includes(...t){return Hc(this,"includes",t)},indexOf(...t){return Hc(this,"indexOf",t)},join(t){return Fi(this).join(t)},lastIndexOf(...t){return Hc(this,"lastIndexOf",t)},map(t,e){return qn(this,"map",t,e,void 0,arguments)},pop(){return Hr(this,"pop")},push(...t){return Hr(this,"push",t)},reduce(t,...e){return sp(this,"reduce",t,e)},reduceRight(t,...e){return sp(this,"reduceRight",t,e)},shift(){return Hr(this,"shift")},some(t,e){return qn(this,"some",t,e,void 0,arguments)},splice(...t){return Hr(this,"splice",t)},toReversed(){return Fi(this).toReversed()},toSorted(t){return Fi(this).toSorted(t)},toSpliced(...t){return Fi(this).toSpliced(...t)},unshift(...t){return Hr(this,"unshift",t)},values(){return zc(this,"values",Mt)}};function zc(t,e,n){const s=Hl(t),i=s[e]();return s!==t&&!mn(t)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.value&&(r.value=n(r.value)),r}),i}const zb=Array.prototype;function qn(t,e,n,s,i,r){const o=Hl(t),a=o!==t&&!mn(t),c=o[e];if(c!==zb[e]){const h=c.apply(t,r);return a?Mt(h):h}let u=n;o!==t&&(a?u=function(h,p){return n.call(this,Mt(h),p,t)}:n.length>2&&(u=function(h,p){return n.call(this,h,p,t)}));const d=c.call(o,u,s);return a&&i?i(d):d}function sp(t,e,n,s){const i=Hl(t);let r=n;return i!==t&&(mn(t)?n.length>3&&(r=function(o,a,c){return n.call(this,o,a,c,t)}):r=function(o,a,c){return n.call(this,o,Mt(a),c,t)}),i[e](r,...s)}function Hc(t,e,n){const s=Ue(t);zt(s,"iterate",vo);const i=s[e](...n);return(i===-1||i===!1)&&Ud(n[0])?(n[0]=Ue(n[0]),s[e](...n)):i}function Hr(t,e,n=[]){is(),Nd();const s=Ue(t)[e].apply(t,n);return Od(),rs(),s}const Hb=Cd("__proto__,__v_isRef,__isVue"),Ey=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(En));function Wb(t){En(t)||(t=String(t));const e=Ue(this);return zt(e,"has",t),e.hasOwnProperty(t)}class ky{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(i?r?tT:Ry:r?Cy:Sy).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=be(e);if(!i){let c;if(o&&(c=Bb[n]))return c;if(n==="hasOwnProperty")return Wb}const a=Reflect.get(e,n,at(e)?e:s);return(En(n)?Ey.has(n):Hb(n))||(i||zt(e,"get",n),r)?a:at(a)?o&&xd(n)?a:a.value:Je(a)?i?_o(a):vn(a):a}}class Ay extends ky{constructor(e=!1){super(!1,e)}set(e,n,s,i){let r=e[n];if(!this._isShallow){const c=os(r);if(!mn(s)&&!os(s)&&(r=Ue(r),s=Ue(s)),!be(e)&&at(r)&&!at(s))return c?!1:(r.value=s,!0)}const o=be(e)&&xd(n)?Number(n)<e.length:Ge(e,n),a=Reflect.set(e,n,s,at(e)?e:i);return e===Ue(i)&&(o?Os(s,r)&&Qn(e,"set",n,s):Qn(e,"add",n,s)),a}deleteProperty(e,n){const s=Ge(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&s&&Qn(e,"delete",n,void 0),i}has(e,n){const s=Reflect.has(e,n);return(!En(n)||!Ey.has(n))&&zt(e,"has",n),s}ownKeys(e){return zt(e,"iterate",be(e)?"length":gi),Reflect.ownKeys(e)}}class qb extends ky{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Kb=new Ay,Gb=new qb,Qb=new Ay(!0);const Eu=t=>t,ma=t=>Reflect.getPrototypeOf(t);function Yb(t,e,n){return function(...s){const i=this.__v_raw,r=Ue(i),o=Zi(r),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=i[t](...s),d=n?Eu:e?el:Mt;return!e&&zt(r,"iterate",c?Iu:gi),{next(){const{value:h,done:p}=u.next();return p?{value:h,done:p}:{value:a?[d(h[0]),d(h[1])]:d(h),done:p}},[Symbol.iterator](){return this}}}}function ga(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Jb(t,e){const n={get(i){const r=this.__v_raw,o=Ue(r),a=Ue(i);t||(Os(i,a)&&zt(o,"get",i),zt(o,"get",a));const{has:c}=ma(o),u=e?Eu:t?el:Mt;if(c.call(o,i))return u(r.get(i));if(c.call(o,a))return u(r.get(a));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!t&&zt(Ue(i),"iterate",gi),Reflect.get(i,"size",i)},has(i){const r=this.__v_raw,o=Ue(r),a=Ue(i);return t||(Os(i,a)&&zt(o,"has",i),zt(o,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const o=this,a=o.__v_raw,c=Ue(a),u=e?Eu:t?el:Mt;return!t&&zt(c,"iterate",gi),a.forEach((d,h)=>i.call(r,u(d),u(h),o))}};return Tt(n,t?{add:ga("add"),set:ga("set"),delete:ga("delete"),clear:ga("clear")}:{add(i){!e&&!mn(i)&&!os(i)&&(i=Ue(i));const r=Ue(this);return ma(r).has.call(r,i)||(r.add(i),Qn(r,"add",i,i)),this},set(i,r){!e&&!mn(r)&&!os(r)&&(r=Ue(r));const o=Ue(this),{has:a,get:c}=ma(o);let u=a.call(o,i);u||(i=Ue(i),u=a.call(o,i));const d=c.call(o,i);return o.set(i,r),u?Os(r,d)&&Qn(o,"set",i,r):Qn(o,"add",i,r),this},delete(i){const r=Ue(this),{has:o,get:a}=ma(r);let c=o.call(r,i);c||(i=Ue(i),c=o.call(r,i)),a&&a.call(r,i);const u=r.delete(i);return c&&Qn(r,"delete",i,void 0),u},clear(){const i=Ue(this),r=i.size!==0,o=i.clear();return r&&Qn(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=Yb(i,t,e)}),n}function Fd(t,e){const n=Jb(t,e);return(s,i,r)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?s:Reflect.get(Ge(n,i)&&i in s?n:s,i,r)}const Xb={get:Fd(!1,!1)},Zb={get:Fd(!1,!0)},eT={get:Fd(!0,!1)};const Sy=new WeakMap,Cy=new WeakMap,Ry=new WeakMap,tT=new WeakMap;function nT(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function sT(t){return t.__v_skip||!Object.isExtensible(t)?0:nT(Ab(t))}function vn(t){return os(t)?t:$d(t,!1,Kb,Xb,Sy)}function Qi(t){return $d(t,!1,Qb,Zb,Cy)}function _o(t){return $d(t,!0,Gb,eT,Ry)}function $d(t,e,n,s,i){if(!Je(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=sT(t);if(r===0)return t;const o=i.get(t);if(o)return o;const a=new Proxy(t,r===2?s:n);return i.set(t,a),a}function es(t){return os(t)?es(t.__v_raw):!!(t&&t.__v_isReactive)}function os(t){return!!(t&&t.__v_isReadonly)}function mn(t){return!!(t&&t.__v_isShallow)}function Ud(t){return t?!!t.__v_raw:!1}function Ue(t){const e=t&&t.__v_raw;return e?Ue(e):t}function jd(t){return!Ge(t,"__v_skip")&&Object.isExtensible(t)&&bu(t,"__v_skip",!0),t}const Mt=t=>Je(t)?vn(t):t,el=t=>Je(t)?_o(t):t;function at(t){return t?t.__v_isRef===!0:!1}function te(t){return Py(t,!1)}function ku(t){return Py(t,!0)}function Py(t,e){return at(t)?t:new iT(t,e)}class iT{constructor(e,n){this.dep=new Ld,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Ue(e),this._value=n?e:Mt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||mn(e)||os(e);e=s?e:Ue(e),Os(e,n)&&(this._rawValue=e,this._value=s?e:Mt(e),this.dep.trigger())}}function we(t){return at(t)?t.value:t}function rT(t){return Ae(t)?t():we(t)}const oT={get:(t,e,n)=>e==="__v_raw"?t:we(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const i=t[e];return at(i)&&!at(n)?(i.value=n,!0):Reflect.set(t,e,n,s)}};function xy(t){return es(t)?t:new Proxy(t,oT)}function aT(t){const e=be(t)?new Array(t.length):{};for(const n in t)e[n]=Dy(t,n);return e}class lT{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return jb(Ue(this._object),this._key)}}class cT{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function My(t,e,n){return at(t)?t:Ae(t)?new cT(t):Je(t)&&arguments.length>1?Dy(t,e,n):te(t)}function Dy(t,e,n){const s=t[e];return at(s)?s:new lT(t,e,n)}class uT{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Ld(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=yo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&tt!==this)return vy(this,!0),!0}get value(){const e=this.dep.track();return by(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function dT(t,e,n=!1){let s,i;return Ae(t)?s=t:(s=t.get,i=t.set),new uT(s,i,n)}const ya={},tl=new WeakMap;let ui;function hT(t,e=!1,n=ui){if(n){let s=tl.get(n);s||tl.set(n,s=[]),s.push(t)}}function fT(t,e,n=et){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:a,call:c}=n,u=C=>i?C:mn(C)||i===!1||i===0?Yn(C,1):Yn(C);let d,h,p,y,_=!1,I=!1;if(at(t)?(h=()=>t.value,_=mn(t)):es(t)?(h=()=>u(t),_=!0):be(t)?(I=!0,_=t.some(C=>es(C)||mn(C)),h=()=>t.map(C=>{if(at(C))return C.value;if(es(C))return u(C);if(Ae(C))return c?c(C,2):C()})):Ae(t)?e?h=c?()=>c(t,2):t:h=()=>{if(p){is();try{p()}finally{rs()}}const C=ui;ui=d;try{return c?c(t,3,[y]):t(y)}finally{ui=C}}:h=Nn,e&&i){const C=h,P=i===!0?1/0:i;h=()=>Yn(C(),P)}const k=Dd(),N=()=>{d.stop(),k&&k.active&&Pd(k.effects,d)};if(r&&e){const C=e;e=(...P)=>{C(...P),N()}}let L=I?new Array(t.length).fill(ya):ya;const R=C=>{if(!(!(d.flags&1)||!d.dirty&&!C))if(e){const P=d.run();if(i||_||(I?P.some((O,b)=>Os(O,L[b])):Os(P,L))){p&&p();const O=ui;ui=d;try{const b=[P,L===ya?void 0:I&&L[0]===ya?[]:L,y];L=P,c?c(e,3,b):e(...b)}finally{ui=O}}}else d.run()};return a&&a(R),d=new gy(h),d.scheduler=o?()=>o(R,!1):R,y=C=>hT(C,!1,d),p=d.onStop=()=>{const C=tl.get(d);if(C){if(c)c(C,4);else for(const P of C)P();tl.delete(d)}},e?s?R(!0):L=d.run():o?o(R.bind(null,!0),!0):d.run(),N.pause=d.pause.bind(d),N.resume=d.resume.bind(d),N.stop=N,N}function Yn(t,e=1/0,n){if(e<=0||!Je(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,at(t))Yn(t.value,e,n);else if(be(t))for(let s=0;s<t.length;s++)Yn(t[s],e,n);else if($l(t)||Zi(t))t.forEach(s=>{Yn(s,e,n)});else if(uy(t)){for(const s in t)Yn(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Yn(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Vo(t,e,n,s){try{return s?t(...s):t()}catch(i){Tr(i,e,n)}}function kn(t,e,n,s){if(Ae(t)){const i=Vo(t,e,n,s);return i&&ly(i)&&i.catch(r=>{Tr(r,e,n)}),i}if(be(t)){const i=[];for(let r=0;r<t.length;r++)i.push(kn(t[r],e,n,s));return i}}function Tr(t,e,n,s=!0){const i=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||et;if(e){let a=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const d=a.ec;if(d){for(let h=0;h<d.length;h++)if(d[h](t,c,u)===!1)return}a=a.parent}if(r){is(),Vo(r,null,10,[t,c,u]),rs();return}}pT(t,n,i,s,o)}function pT(t,e,n,s=!0,i=!1){if(i)throw t;console.error(t)}const Yt=[];let Rn=-1;const tr=[];let ks=null,Hi=0;const Ny=Promise.resolve();let nl=null;function as(t){const e=nl||Ny;return t?e.then(this?t.bind(this):t):e}function mT(t){let e=Rn+1,n=Yt.length;for(;e<n;){const s=e+n>>>1,i=Yt[s],r=wo(i);r<t||r===t&&i.flags&2?e=s+1:n=s}return e}function Bd(t){if(!(t.flags&1)){const e=wo(t),n=Yt[Yt.length-1];!n||!(t.flags&2)&&e>=wo(n)?Yt.push(t):Yt.splice(mT(e),0,t),t.flags|=1,Oy()}}function Oy(){nl||(nl=Ny.then(Vy))}function Au(t){be(t)?tr.push(...t):ks&&t.id===-1?ks.splice(Hi+1,0,t):t.flags&1||(tr.push(t),t.flags|=1),Oy()}function ip(t,e,n=Rn+1){for(;n<Yt.length;n++){const s=Yt[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;Yt.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function sl(t){if(tr.length){const e=[...new Set(tr)].sort((n,s)=>wo(n)-wo(s));if(tr.length=0,ks){ks.push(...e);return}for(ks=e,Hi=0;Hi<ks.length;Hi++){const n=ks[Hi];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ks=null,Hi=0}}const wo=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Vy(t){try{for(Rn=0;Rn<Yt.length;Rn++){const e=Yt[Rn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Vo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Rn<Yt.length;Rn++){const e=Yt[Rn];e&&(e.flags&=-2)}Rn=-1,Yt.length=0,sl(),nl=null,(Yt.length||tr.length)&&Vy()}}let Ot=null,Ly=null;function il(t){const e=Ot;return Ot=t,Ly=t&&t.type.__scopeId||null,e}function zd(t,e=Ot,n){if(!e||t._n)return t;const s=(...i)=>{s._d&&_p(-1);const r=il(e);let o;try{o=t(...i)}finally{il(r),s._d&&_p(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Xt(t,e){if(Ot===null)return t;const n=Gl(Ot),s=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[r,o,a,c=et]=e[i];r&&(Ae(r)&&(r={mounted:r,updated:r}),r.deep&&Yn(o),s.push({dir:r,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return t}function Pn(t,e,n,s){const i=t.dirs,r=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let c=a.dir[s];c&&(is(),kn(c,n,8,[t.el,a,t,e]),rs())}}const Fy=Symbol("_vte"),gT=t=>t.__isTeleport,io=t=>t&&(t.disabled||t.disabled===""),rp=t=>t&&(t.defer||t.defer===""),op=t=>typeof SVGElement<"u"&&t instanceof SVGElement,ap=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Su=(t,e)=>{const n=t&&t.to;return lt(n)?e?e(n):null:n},$y={name:"Teleport",__isTeleport:!0,process(t,e,n,s,i,r,o,a,c,u){const{mc:d,pc:h,pbc:p,o:{insert:y,querySelector:_,createText:I,createComment:k}}=u,N=io(e.props);let{shapeFlag:L,children:R,dynamicChildren:C}=e;if(t==null){const P=e.el=I(""),O=e.anchor=I("");y(P,n,s),y(O,n,s);const b=(T,A)=>{L&16&&(i&&i.isCE&&(i.ce._teleportTarget=T),d(R,T,A,i,r,o,a,c))},w=()=>{const T=e.target=Su(e.props,_),A=Uy(T,e,I,y);T&&(o!=="svg"&&op(T)?o="svg":o!=="mathml"&&ap(T)&&(o="mathml"),N||(b(T,A),Da(e,!1)))};N&&(b(n,O),Da(e,!0)),rp(e.props)?(e.el.__isMounted=!1,Qt(()=>{w(),delete e.el.__isMounted},r)):w()}else{if(rp(e.props)&&t.el.__isMounted===!1){Qt(()=>{$y.process(t,e,n,s,i,r,o,a,c,u)},r);return}e.el=t.el,e.targetStart=t.targetStart;const P=e.anchor=t.anchor,O=e.target=t.target,b=e.targetAnchor=t.targetAnchor,w=io(t.props),T=w?n:O,A=w?P:b;if(o==="svg"||op(O)?o="svg":(o==="mathml"||ap(O))&&(o="mathml"),C?(p(t.dynamicChildren,C,T,i,r,o,a),Jd(t,e,!0)):c||h(t,e,T,A,i,r,o,a,!1),N)w?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):va(e,n,P,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const D=e.target=Su(e.props,_);D&&va(e,D,null,u,0)}else w&&va(e,O,b,u,1);Da(e,N)}},remove(t,e,n,{um:s,o:{remove:i}},r){const{shapeFlag:o,children:a,anchor:c,targetStart:u,targetAnchor:d,target:h,props:p}=t;if(h&&(i(u),i(d)),r&&i(c),o&16){const y=r||!io(p);for(let _=0;_<a.length;_++){const I=a[_];s(I,e,n,y,!!I.dynamicChildren)}}},move:va,hydrate:yT};function va(t,e,n,{o:{insert:s},m:i},r=2){r===0&&s(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:c,children:u,props:d}=t,h=r===2;if(h&&s(o,e,n),(!h||io(d))&&c&16)for(let p=0;p<u.length;p++)i(u[p],e,n,2);h&&s(a,e,n)}function yT(t,e,n,s,i,r,{o:{nextSibling:o,parentNode:a,querySelector:c,insert:u,createText:d}},h){const p=e.target=Su(e.props,c);if(p){const y=io(e.props),_=p._lpa||p.firstChild;if(e.shapeFlag&16)if(y)e.anchor=h(o(t),e,a(t),n,s,i,r),e.targetStart=_,e.targetAnchor=_&&o(_);else{e.anchor=o(t);let I=_;for(;I;){if(I&&I.nodeType===8){if(I.data==="teleport start anchor")e.targetStart=I;else if(I.data==="teleport anchor"){e.targetAnchor=I,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}I=o(I)}e.targetAnchor||Uy(p,e,d,u),h(_&&o(_),e,p,n,s,i,r)}Da(e,y)}return e.anchor&&o(e.anchor)}const Hd=$y;function Da(t,e){const n=t.ctx;if(n&&n.ut){let s,i;for(e?(s=t.el,i=t.anchor):(s=t.targetStart,i=t.targetAnchor);s&&s!==i;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function Uy(t,e,n,s){const i=e.targetStart=n(""),r=e.targetAnchor=n("");return i[Fy]=r,t&&(s(i,t),s(r,t)),r}const $i=Symbol("_leaveCb"),_a=Symbol("_enterCb");function vT(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return nn(()=>{t.isMounted=!0}),Kd(()=>{t.isUnmounting=!0}),t}const dn=[Function,Array],_T={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:dn,onEnter:dn,onAfterEnter:dn,onEnterCancelled:dn,onBeforeLeave:dn,onLeave:dn,onAfterLeave:dn,onLeaveCancelled:dn,onBeforeAppear:dn,onAppear:dn,onAfterAppear:dn,onAppearCancelled:dn};function wT(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function Cu(t,e,n,s,i){const{appear:r,mode:o,persisted:a=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:d,onEnterCancelled:h,onBeforeLeave:p,onLeave:y,onAfterLeave:_,onLeaveCancelled:I,onBeforeAppear:k,onAppear:N,onAfterAppear:L,onAppearCancelled:R}=e,C=String(t.key),P=wT(n,t),O=(T,A)=>{T&&kn(T,s,9,A)},b=(T,A)=>{const D=A[1];O(T,A),be(T)?T.every(x=>x.length<=1)&&D():T.length<=1&&D()},w={mode:o,persisted:a,beforeEnter(T){let A=c;if(!n.isMounted)if(r)A=k||c;else return;T[$i]&&T[$i](!0);const D=P[C];D&&Jn(t,D)&&D.el[$i]&&D.el[$i](),O(A,[T])},enter(T){let A=u,D=d,x=h;if(!n.isMounted)if(r)A=N||u,D=L||d,x=R||h;else return;let S=!1;const ve=T[_a]=Se=>{S||(S=!0,Se?O(x,[T]):O(D,[T]),w.delayedLeave&&w.delayedLeave(),T[_a]=void 0)};A?b(A,[T,ve]):ve()},leave(T,A){const D=String(t.key);if(T[_a]&&T[_a](!0),n.isUnmounting)return A();O(p,[T]);let x=!1;const S=T[$i]=ve=>{x||(x=!0,A(),ve?O(I,[T]):O(_,[T]),T[$i]=void 0,P[D]===t&&delete P[D])};P[D]=t,y?b(y,[T,S]):S()},clone(T){return Cu(T,e,n,s)}};return w}function bo(t,e){t.shapeFlag&6&&t.component?(t.transition=e,bo(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function jy(t,e=!1,n){let s=[],i=0;for(let r=0;r<t.length;r++){let o=t[r];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:r);o.type===ye?(o.patchFlag&128&&i++,s=s.concat(jy(o.children,e,a))):(e||o.type!==ln)&&s.push(a!=null?Ti(o,{key:a}):o)}if(i>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function ct(t,e){return Ae(t)?Tt({name:t.name},e,{setup:t}):t}function Wd(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function nr(t,e,n,s,i=!1){if(be(t)){t.forEach((_,I)=>nr(_,e&&(be(e)?e[I]:e),n,s,i));return}if(yi(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&nr(t,e,n,s.component.subTree);return}const r=s.shapeFlag&4?Gl(s.component):s.el,o=i?null:r,{i:a,r:c}=t,u=e&&e.r,d=a.refs===et?a.refs={}:a.refs,h=a.setupState,p=Ue(h),y=h===et?()=>!1:_=>Ge(p,_);if(u!=null&&u!==c&&(lt(u)?(d[u]=null,y(u)&&(h[u]=null)):at(u)&&(u.value=null)),Ae(c))Vo(c,a,12,[o,d]);else{const _=lt(c),I=at(c);if(_||I){const k=()=>{if(t.f){const N=_?y(c)?h[c]:d[c]:c.value;i?be(N)&&Pd(N,r):be(N)?N.includes(r)||N.push(r):_?(d[c]=[r],y(c)&&(h[c]=d[c])):(c.value=[r],t.k&&(d[t.k]=c.value))}else _?(d[c]=o,y(c)&&(h[c]=o)):I&&(c.value=o,t.k&&(d[t.k]=o))};o?(k.id=-1,Qt(k,n)):k()}}}let lp=!1;const Ui=()=>{lp||(console.error("Hydration completed but contains mismatches."),lp=!0)},bT=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",TT=t=>t.namespaceURI.includes("MathML"),wa=t=>{if(t.nodeType===1){if(bT(t))return"svg";if(TT(t))return"mathml"}},Yi=t=>t.nodeType===8;function IT(t){const{mt:e,p:n,o:{patchProp:s,createText:i,nextSibling:r,parentNode:o,remove:a,insert:c,createComment:u}}=t,d=(R,C)=>{if(!C.hasChildNodes()){n(null,R,C),sl(),C._vnode=R;return}h(C.firstChild,R,null,null,null),sl(),C._vnode=R},h=(R,C,P,O,b,w=!1)=>{w=w||!!C.dynamicChildren;const T=Yi(R)&&R.data==="[",A=()=>I(R,C,P,O,b,T),{type:D,ref:x,shapeFlag:S,patchFlag:ve}=C;let Se=R.nodeType;C.el=R,ve===-2&&(w=!1,C.dynamicChildren=null);let re=null;switch(D){case _i:Se!==3?C.children===""?(c(C.el=i(""),o(R),R),re=R):re=A():(R.data!==C.children&&(Ui(),R.data=C.children),re=r(R));break;case ln:L(R)?(re=r(R),N(C.el=R.content.firstChild,R,P)):Se!==8||T?re=A():re=r(R);break;case oo:if(T&&(R=r(R),Se=R.nodeType),Se===1||Se===3){re=R;const fe=!C.children.length;for(let le=0;le<C.staticCount;le++)fe&&(C.children+=re.nodeType===1?re.outerHTML:re.data),le===C.staticCount-1&&(C.anchor=re),re=r(re);return T?r(re):re}else A();break;case ye:T?re=_(R,C,P,O,b,w):re=A();break;default:if(S&1)(Se!==1||C.type.toLowerCase()!==R.tagName.toLowerCase())&&!L(R)?re=A():re=p(R,C,P,O,b,w);else if(S&6){C.slotScopeIds=b;const fe=o(R);if(T?re=k(R):Yi(R)&&R.data==="teleport start"?re=k(R,R.data,"teleport end"):re=r(R),e(C,fe,null,P,O,wa(fe),w),yi(C)&&!C.type.__asyncResolved){let le;T?(le=qe(ye),le.anchor=re?re.previousSibling:fe.lastChild):le=R.nodeType===3?pi(""):qe("div"),le.el=R,C.component.subTree=le}}else S&64?Se!==8?re=A():re=C.type.hydrate(R,C,P,O,b,w,t,y):S&128&&(re=C.type.hydrate(R,C,P,O,wa(o(R)),b,w,t,h))}return x!=null&&nr(x,null,O,C),re},p=(R,C,P,O,b,w)=>{w=w||!!C.dynamicChildren;const{type:T,props:A,patchFlag:D,shapeFlag:x,dirs:S,transition:ve}=C,Se=T==="input"||T==="option";if(Se||D!==-1){S&&Pn(C,null,P,"created");let re=!1;if(L(R)){re=cv(null,ve)&&P&&P.vnode.props&&P.vnode.props.appear;const le=R.content.firstChild;if(re){const Le=le.getAttribute("class");Le&&(le.$cls=Le),ve.beforeEnter(le)}N(le,R,P),C.el=R=le}if(x&16&&!(A&&(A.innerHTML||A.textContent))){let le=y(R.firstChild,C,R,P,O,b,w);for(;le;){ba(R,1)||Ui();const Le=le;le=le.nextSibling,a(Le)}}else if(x&8){let le=C.children;le[0]===`
`&&(R.tagName==="PRE"||R.tagName==="TEXTAREA")&&(le=le.slice(1)),R.textContent!==le&&(ba(R,0)||Ui(),R.textContent=C.children)}if(A){if(Se||!w||D&48){const le=R.tagName.includes("-");for(const Le in A)(Se&&(Le.endsWith("value")||Le==="indeterminate")||No(Le)&&!er(Le)||Le[0]==="."||le)&&s(R,Le,null,A[Le],void 0,P)}else if(A.onClick)s(R,"onClick",null,A.onClick,void 0,P);else if(D&4&&es(A.style))for(const le in A.style)A.style[le]}let fe;(fe=A&&A.onVnodeBeforeMount)&&hn(fe,P,C),S&&Pn(C,null,P,"beforeMount"),((fe=A&&A.onVnodeMounted)||S||re)&&mv(()=>{fe&&hn(fe,P,C),re&&ve.enter(R),S&&Pn(C,null,P,"mounted")},O)}return R.nextSibling},y=(R,C,P,O,b,w,T)=>{T=T||!!C.dynamicChildren;const A=C.children,D=A.length;for(let x=0;x<D;x++){const S=T?A[x]:A[x]=rn(A[x]),ve=S.type===_i;R?(ve&&!T&&x+1<D&&rn(A[x+1]).type===_i&&(c(i(R.data.slice(S.children.length)),P,r(R)),R.data=S.children),R=h(R,S,O,b,w,T)):ve&&!S.children?c(S.el=i(""),P):(ba(P,1)||Ui(),n(null,S,P,null,O,b,wa(P),w))}return R},_=(R,C,P,O,b,w)=>{const{slotScopeIds:T}=C;T&&(b=b?b.concat(T):T);const A=o(R),D=y(r(R),C,A,P,O,b,w);return D&&Yi(D)&&D.data==="]"?r(C.anchor=D):(Ui(),c(C.anchor=u("]"),A,D),D)},I=(R,C,P,O,b,w)=>{if(ba(R.parentElement,1)||Ui(),C.el=null,w){const D=k(R);for(;;){const x=r(R);if(x&&x!==D)a(x);else break}}const T=r(R),A=o(R);return a(R),n(null,C,A,T,P,O,wa(A),b),P&&(P.vnode.el=C.el,Kl(P,C.el)),T},k=(R,C="[",P="]")=>{let O=0;for(;R;)if(R=r(R),R&&Yi(R)&&(R.data===C&&O++,R.data===P)){if(O===0)return r(R);O--}return R},N=(R,C,P)=>{const O=C.parentNode;O&&O.replaceChild(R,C);let b=P;for(;b;)b.vnode.el===C&&(b.vnode.el=b.subTree.el=R),b=b.parent},L=R=>R.nodeType===1&&R.tagName==="TEMPLATE";return[d,h]}const cp="data-allow-mismatch",ET={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function ba(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(cp);)t=t.parentElement;const n=t&&t.getAttribute(cp);if(n==null)return!1;if(n==="")return!0;{const s=n.split(",");return e===0&&s.includes("children")?!0:s.includes(ET[e])}}Bl().requestIdleCallback;Bl().cancelIdleCallback;function kT(t,e){if(Yi(t)&&t.data==="["){let n=1,s=t.nextSibling;for(;s;){if(s.nodeType===1){if(e(s)===!1)break}else if(Yi(s))if(s.data==="]"){if(--n===0)break}else s.data==="["&&n++;s=s.nextSibling}}else e(t)}const yi=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function Ru(t){Ae(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:s,delay:i=200,hydrate:r,timeout:o,suspensible:a=!0,onError:c}=t;let u=null,d,h=0;const p=()=>(h++,u=null,y()),y=()=>{let _;return u||(_=u=e().catch(I=>{if(I=I instanceof Error?I:new Error(String(I)),c)return new Promise((k,N)=>{c(I,()=>k(p()),()=>N(I),h+1)});throw I}).then(I=>_!==u&&u?u:(I&&(I.__esModule||I[Symbol.toStringTag]==="Module")&&(I=I.default),d=I,I)))};return ct({name:"AsyncComponentWrapper",__asyncLoader:y,__asyncHydrate(_,I,k){let N=!1;(I.bu||(I.bu=[])).push(()=>N=!0);const L=()=>{N||k()},R=r?()=>{const C=r(L,P=>kT(_,P));C&&(I.bum||(I.bum=[])).push(C)}:L;d?R():y().then(()=>!I.isUnmounted&&R())},get __asyncResolved(){return d},setup(){const _=Dt;if(Wd(_),d)return()=>Wc(d,_);const I=R=>{u=null,Tr(R,_,13,!s)};if(a&&_.suspense||dr)return y().then(R=>()=>Wc(R,_)).catch(R=>(I(R),()=>s?qe(s,{error:R}):null));const k=te(!1),N=te(),L=te(!!i);return i&&setTimeout(()=>{L.value=!1},i),o!=null&&setTimeout(()=>{if(!k.value&&!N.value){const R=new Error(`Async component timed out after ${o}ms.`);I(R),N.value=R}},o),y().then(()=>{k.value=!0,_.parent&&qd(_.parent.vnode)&&_.parent.update()}).catch(R=>{I(R),N.value=R}),()=>{if(k.value&&d)return Wc(d,_);if(N.value&&s)return qe(s,{error:N.value});if(n&&!L.value)return qe(n)}}})}function Wc(t,e){const{ref:n,props:s,children:i,ce:r}=e.vnode,o=qe(t,s,i);return o.ref=n,o.ce=r,delete e.vnode.ce,o}const qd=t=>t.type.__isKeepAlive;function By(t,e){Hy(t,"a",e)}function zy(t,e){Hy(t,"da",e)}function Hy(t,e,n=Dt){const s=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Wl(e,s,n),n){let i=n.parent;for(;i&&i.parent;)qd(i.parent.vnode)&&AT(s,e,n,i),i=i.parent}}function AT(t,e,n,s){const i=Wl(e,t,s,!0);_n(()=>{Pd(s[e],i)},n)}function Wl(t,e,n=Dt,s=!1){if(n){const i=n[t]||(n[t]=[]),r=e.__weh||(e.__weh=(...o)=>{is();const a=$o(n),c=kn(e,n,t,o);return a(),rs(),c});return s?i.unshift(r):i.push(r),r}}const ps=t=>(e,n=Dt)=>{(!dr||t==="sp")&&Wl(t,(...s)=>e(...s),n)},ST=ps("bm"),nn=ps("m"),CT=ps("bu"),Wy=ps("u"),Kd=ps("bum"),_n=ps("um"),RT=ps("sp"),PT=ps("rtg"),xT=ps("rtc");function qy(t,e=Dt){Wl("ec",t,e)}const Ky="components";function MT(t,e){return Qy(Ky,t,!0,e)||t}const Gy=Symbol.for("v-ndc");function DT(t){return lt(t)?Qy(Ky,t,!1)||t:t||Gy}function Qy(t,e,n=!0,s=!1){const i=Ot||Dt;if(i){const r=i.type;{const a=E1(r,!1);if(a&&(a===e||a===yn(e)||a===jl(yn(e))))return r}const o=up(i[t]||r[t],e)||up(i.appContext[t],e);return!o&&s?r:o}}function up(t,e){return t&&(t[e]||t[yn(e)]||t[jl(yn(e))])}function Ve(t,e,n,s){let i;const r=n,o=be(t);if(o||lt(t)){const a=o&&es(t);let c=!1,u=!1;a&&(c=!mn(t),u=os(t),t=Hl(t)),i=new Array(t.length);for(let d=0,h=t.length;d<h;d++)i[d]=e(c?u?el(Mt(t[d])):Mt(t[d]):t[d],d,void 0,r)}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,r)}else if(Je(t))if(t[Symbol.iterator])i=Array.from(t,(a,c)=>e(a,c,void 0,r));else{const a=Object.keys(t);i=new Array(a.length);for(let c=0,u=a.length;c<u;c++){const d=a[c];i[c]=e(t[d],d,c,r)}}else i=[];return i}function NT(t,e,n={},s,i){if(Ot.ce||Ot.parent&&yi(Ot.parent)&&Ot.parent.ce)return $(),Ze(ye,null,[qe("slot",n,s&&s())],64);let r=t[e];r&&r._c&&(r._d=!1),$();const o=r&&Yy(r(n)),a=n.key||o&&o.key,c=Ze(ye,{key:(a&&!En(a)?a:`_${e}`)+(!o&&s?"_fb":"")},o||(s?s():[]),o&&t._===1?64:-2);return r&&r._c&&(r._d=!0),c}function Yy(t){return t.some(e=>ur(e)?!(e.type===ln||e.type===ye&&!Yy(e.children)):!0)?t:null}const Pu=t=>t?wv(t)?Gl(t):Pu(t.parent):null,ro=Tt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Pu(t.parent),$root:t=>Pu(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Xy(t),$forceUpdate:t=>t.f||(t.f=()=>{Bd(t.update)}),$nextTick:t=>t.n||(t.n=as.bind(t.proxy)),$watch:t=>t1.bind(t)}),qc=(t,e)=>t!==et&&!t.__isScriptSetup&&Ge(t,e),OT={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:c}=t;let u;if(e[0]!=="$"){const y=o[e];if(y!==void 0)switch(y){case 1:return s[e];case 2:return i[e];case 4:return n[e];case 3:return r[e]}else{if(qc(s,e))return o[e]=1,s[e];if(i!==et&&Ge(i,e))return o[e]=2,i[e];if((u=t.propsOptions[0])&&Ge(u,e))return o[e]=3,r[e];if(n!==et&&Ge(n,e))return o[e]=4,n[e];xu&&(o[e]=0)}}const d=ro[e];let h,p;if(d)return e==="$attrs"&&zt(t.attrs,"get",""),d(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==et&&Ge(n,e))return o[e]=4,n[e];if(p=c.config.globalProperties,Ge(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:i,ctx:r}=t;return qc(i,e)?(i[e]=n,!0):s!==et&&Ge(s,e)?(s[e]=n,!0):Ge(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:i,propsOptions:r}},o){let a;return!!n[o]||t!==et&&Ge(t,o)||qc(e,o)||(a=r[0])&&Ge(a,o)||Ge(s,o)||Ge(ro,o)||Ge(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ge(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function dp(t){return be(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let xu=!0;function VT(t){const e=Xy(t),n=t.proxy,s=t.ctx;xu=!1,e.beforeCreate&&hp(e.beforeCreate,t,"bc");const{data:i,computed:r,methods:o,watch:a,provide:c,inject:u,created:d,beforeMount:h,mounted:p,beforeUpdate:y,updated:_,activated:I,deactivated:k,beforeDestroy:N,beforeUnmount:L,destroyed:R,unmounted:C,render:P,renderTracked:O,renderTriggered:b,errorCaptured:w,serverPrefetch:T,expose:A,inheritAttrs:D,components:x,directives:S,filters:ve}=e;if(u&&LT(u,s,null),o)for(const fe in o){const le=o[fe];Ae(le)&&(s[fe]=le.bind(n))}if(i){const fe=i.call(n,n);Je(fe)&&(t.data=vn(fe))}if(xu=!0,r)for(const fe in r){const le=r[fe],Le=Ae(le)?le.bind(n,n):Ae(le.get)?le.get.bind(n,n):Nn,St=!Ae(le)&&Ae(le.set)?le.set.bind(n):Nn,Et=xe({get:Le,set:St});Object.defineProperty(s,fe,{enumerable:!0,configurable:!0,get:()=>Et.value,set:He=>Et.value=He})}if(a)for(const fe in a)Jy(a[fe],s,n,fe);if(c){const fe=Ae(c)?c.call(n):c;Reflect.ownKeys(fe).forEach(le=>{Gd(le,fe[le])})}d&&hp(d,t,"c");function re(fe,le){be(le)?le.forEach(Le=>fe(Le.bind(n))):le&&fe(le.bind(n))}if(re(ST,h),re(nn,p),re(CT,y),re(Wy,_),re(By,I),re(zy,k),re(qy,w),re(xT,O),re(PT,b),re(Kd,L),re(_n,C),re(RT,T),be(A))if(A.length){const fe=t.exposed||(t.exposed={});A.forEach(le=>{Object.defineProperty(fe,le,{get:()=>n[le],set:Le=>n[le]=Le,enumerable:!0})})}else t.exposed||(t.exposed={});P&&t.render===Nn&&(t.render=P),D!=null&&(t.inheritAttrs=D),x&&(t.components=x),S&&(t.directives=S),T&&Wd(t)}function LT(t,e,n=Nn){be(t)&&(t=Mu(t));for(const s in t){const i=t[s];let r;Je(i)?"default"in i?r=ts(i.from||s,i.default,!0):r=ts(i.from||s):r=ts(i),at(r)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[s]=r}}function hp(t,e,n){kn(be(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function Jy(t,e,n,s){let i=s.includes(".")?dv(n,s):()=>n[s];if(lt(t)){const r=e[t];Ae(r)&&an(i,r)}else if(Ae(t))an(i,t.bind(n));else if(Je(t))if(be(t))t.forEach(r=>Jy(r,e,n,s));else{const r=Ae(t.handler)?t.handler.bind(n):e[t.handler];Ae(r)&&an(i,r,t)}}function Xy(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,a=r.get(e);let c;return a?c=a:!i.length&&!n&&!s?c=e:(c={},i.length&&i.forEach(u=>rl(c,u,o,!0)),rl(c,e,o)),Je(e)&&r.set(e,c),c}function rl(t,e,n,s=!1){const{mixins:i,extends:r}=e;r&&rl(t,r,n,!0),i&&i.forEach(o=>rl(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=FT[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const FT={data:fp,props:pp,emits:pp,methods:Jr,computed:Jr,beforeCreate:Gt,created:Gt,beforeMount:Gt,mounted:Gt,beforeUpdate:Gt,updated:Gt,beforeDestroy:Gt,beforeUnmount:Gt,destroyed:Gt,unmounted:Gt,activated:Gt,deactivated:Gt,errorCaptured:Gt,serverPrefetch:Gt,components:Jr,directives:Jr,watch:UT,provide:fp,inject:$T};function fp(t,e){return e?t?function(){return Tt(Ae(t)?t.call(this,this):t,Ae(e)?e.call(this,this):e)}:e:t}function $T(t,e){return Jr(Mu(t),Mu(e))}function Mu(t){if(be(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Gt(t,e){return t?[...new Set([].concat(t,e))]:e}function Jr(t,e){return t?Tt(Object.create(null),t,e):e}function pp(t,e){return t?be(t)&&be(e)?[...new Set([...t,...e])]:Tt(Object.create(null),dp(t),dp(e??{})):e}function UT(t,e){if(!t)return e;if(!e)return t;const n=Tt(Object.create(null),t);for(const s in e)n[s]=Gt(t[s],e[s]);return n}function Zy(){return{app:null,config:{isNativeTag:Eb,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let jT=0;function BT(t,e){return function(s,i=null){Ae(s)||(s=Tt({},s)),i!=null&&!Je(i)&&(i=null);const r=Zy(),o=new WeakSet,a=[];let c=!1;const u=r.app={_uid:jT++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:A1,get config(){return r.config},set config(d){},use(d,...h){return o.has(d)||(d&&Ae(d.install)?(o.add(d),d.install(u,...h)):Ae(d)&&(o.add(d),d(u,...h))),u},mixin(d){return r.mixins.includes(d)||r.mixins.push(d),u},component(d,h){return h?(r.components[d]=h,u):r.components[d]},directive(d,h){return h?(r.directives[d]=h,u):r.directives[d]},mount(d,h,p){if(!c){const y=u._ceVNode||qe(s,i);return y.appContext=r,p===!0?p="svg":p===!1&&(p=void 0),h&&e?e(y,d):t(y,d,p),c=!0,u._container=d,d.__vue_app__=u,Gl(y.component)}},onUnmount(d){a.push(d)},unmount(){c&&(kn(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(d,h){return r.provides[d]=h,u},runWithContext(d){const h=vi;vi=u;try{return d()}finally{vi=h}}};return u}}let vi=null;function Gd(t,e){if(Dt){let n=Dt.provides;const s=Dt.parent&&Dt.parent.provides;s===n&&(n=Dt.provides=Object.create(s)),n[t]=e}}function ts(t,e,n=!1){const s=Fo();if(s||vi){let i=vi?vi._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Ae(e)?e.call(s&&s.proxy):e}}function Lo(){return!!(Fo()||vi)}const ev={},tv=()=>Object.create(ev),nv=t=>Object.getPrototypeOf(t)===ev;function zT(t,e,n,s=!1){const i={},r=tv();t.propsDefaults=Object.create(null),sv(t,e,i,r);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=s?i:Qi(i):t.type.props?t.props=i:t.props=r,t.attrs=r}function HT(t,e,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=t,a=Ue(i),[c]=t.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let h=0;h<d.length;h++){let p=d[h];if(ql(t.emitsOptions,p))continue;const y=e[p];if(c)if(Ge(r,p))y!==r[p]&&(r[p]=y,u=!0);else{const _=yn(p);i[_]=Du(c,a,_,y,t,!1)}else y!==r[p]&&(r[p]=y,u=!0)}}}else{sv(t,e,i,r)&&(u=!0);let d;for(const h in a)(!e||!Ge(e,h)&&((d=Ys(h))===h||!Ge(e,d)))&&(c?n&&(n[h]!==void 0||n[d]!==void 0)&&(i[h]=Du(c,a,h,void 0,t,!0)):delete i[h]);if(r!==a)for(const h in r)(!e||!Ge(e,h))&&(delete r[h],u=!0)}u&&Qn(t.attrs,"set","")}function sv(t,e,n,s){const[i,r]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(er(c))continue;const u=e[c];let d;i&&Ge(i,d=yn(c))?!r||!r.includes(d)?n[d]=u:(a||(a={}))[d]=u:ql(t.emitsOptions,c)||(!(c in s)||u!==s[c])&&(s[c]=u,o=!0)}if(r){const c=Ue(n),u=a||et;for(let d=0;d<r.length;d++){const h=r[d];n[h]=Du(i,c,h,u[h],t,!Ge(u,h))}}return o}function Du(t,e,n,s,i,r){const o=t[n];if(o!=null){const a=Ge(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Ae(c)){const{propsDefaults:u}=i;if(n in u)s=u[n];else{const d=$o(i);s=u[n]=c.call(null,e),d()}}else s=c;i.ce&&i.ce._setProp(n,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===Ys(n))&&(s=!0))}return s}const WT=new WeakMap;function iv(t,e,n=!1){const s=n?WT:e.propsCache,i=s.get(t);if(i)return i;const r=t.props,o={},a=[];let c=!1;if(!Ae(t)){const d=h=>{c=!0;const[p,y]=iv(h,e,!0);Tt(o,p),y&&a.push(...y)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!r&&!c)return Je(t)&&s.set(t,Xi),Xi;if(be(r))for(let d=0;d<r.length;d++){const h=yn(r[d]);mp(h)&&(o[h]=et)}else if(r)for(const d in r){const h=yn(d);if(mp(h)){const p=r[d],y=o[h]=be(p)||Ae(p)?{type:p}:Tt({},p),_=y.type;let I=!1,k=!0;if(be(_))for(let N=0;N<_.length;++N){const L=_[N],R=Ae(L)&&L.name;if(R==="Boolean"){I=!0;break}else R==="String"&&(k=!1)}else I=Ae(_)&&_.name==="Boolean";y[0]=I,y[1]=k,(I||Ge(y,"default"))&&a.push(h)}}const u=[o,a];return Je(t)&&s.set(t,u),u}function mp(t){return t[0]!=="$"&&!er(t)}const Qd=t=>t==="_"||t==="__"||t==="_ctx"||t==="$stable",Yd=t=>be(t)?t.map(rn):[rn(t)],qT=(t,e,n)=>{if(e._n)return e;const s=zd((...i)=>Yd(e(...i)),n);return s._c=!1,s},rv=(t,e,n)=>{const s=t._ctx;for(const i in t){if(Qd(i))continue;const r=t[i];if(Ae(r))e[i]=qT(i,r,s);else if(r!=null){const o=Yd(r);e[i]=()=>o}}},ov=(t,e)=>{const n=Yd(e);t.slots.default=()=>n},av=(t,e,n)=>{for(const s in e)(n||!Qd(s))&&(t[s]=e[s])},KT=(t,e,n)=>{const s=t.slots=tv();if(t.vnode.shapeFlag&32){const i=e.__;i&&bu(s,"__",i,!0);const r=e._;r?(av(s,e,n),n&&bu(s,"_",r,!0)):rv(e,s)}else e&&ov(t,e)},GT=(t,e,n)=>{const{vnode:s,slots:i}=t;let r=!0,o=et;if(s.shapeFlag&32){const a=e._;a?n&&a===1?r=!1:av(i,e,n):(r=!e.$stable,rv(e,i)),o=e}else e&&(ov(t,e),o={default:1});if(r)for(const a in i)!Qd(a)&&o[a]==null&&delete i[a]},Qt=mv;function QT(t){return lv(t)}function YT(t){return lv(t,IT)}function lv(t,e){const n=Bl();n.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:c,setText:u,setElementText:d,parentNode:h,nextSibling:p,setScopeId:y=Nn,insertStaticContent:_}=t,I=(M,V,j,Z=null,Q=null,ee=null,J=void 0,H=null,se=!!V.dynamicChildren)=>{if(M===V)return;M&&!Jn(M,V)&&(Z=F(M),He(M,Q,ee,!0),M=null),V.patchFlag===-2&&(se=!1,V.dynamicChildren=null);const{type:ne,ref:ge,shapeFlag:ae}=V;switch(ne){case _i:k(M,V,j,Z);break;case ln:N(M,V,j,Z);break;case oo:M==null&&L(V,j,Z,J);break;case ye:x(M,V,j,Z,Q,ee,J,H,se);break;default:ae&1?P(M,V,j,Z,Q,ee,J,H,se):ae&6?S(M,V,j,Z,Q,ee,J,H,se):(ae&64||ae&128)&&ne.process(M,V,j,Z,Q,ee,J,H,se,ue)}ge!=null&&Q?nr(ge,M&&M.ref,ee,V||M,!V):ge==null&&M&&M.ref!=null&&nr(M.ref,null,ee,M,!0)},k=(M,V,j,Z)=>{if(M==null)s(V.el=a(V.children),j,Z);else{const Q=V.el=M.el;V.children!==M.children&&u(Q,V.children)}},N=(M,V,j,Z)=>{M==null?s(V.el=c(V.children||""),j,Z):V.el=M.el},L=(M,V,j,Z)=>{[M.el,M.anchor]=_(M.children,V,j,Z,M.el,M.anchor)},R=({el:M,anchor:V},j,Z)=>{let Q;for(;M&&M!==V;)Q=p(M),s(M,j,Z),M=Q;s(V,j,Z)},C=({el:M,anchor:V})=>{let j;for(;M&&M!==V;)j=p(M),i(M),M=j;i(V)},P=(M,V,j,Z,Q,ee,J,H,se)=>{V.type==="svg"?J="svg":V.type==="math"&&(J="mathml"),M==null?O(V,j,Z,Q,ee,J,H,se):T(M,V,Q,ee,J,H,se)},O=(M,V,j,Z,Q,ee,J,H)=>{let se,ne;const{props:ge,shapeFlag:ae,transition:me,dirs:pe}=M;if(se=M.el=o(M.type,ee,ge&&ge.is,ge),ae&8?d(se,M.children):ae&16&&w(M.children,se,null,Z,Q,Kc(M,ee),J,H),pe&&Pn(M,null,Z,"created"),b(se,M,M.scopeId,J,Z),ge){for(const We in ge)We!=="value"&&!er(We)&&r(se,We,null,ge[We],ee,Z);"value"in ge&&r(se,"value",null,ge.value,ee),(ne=ge.onVnodeBeforeMount)&&hn(ne,Z,M)}pe&&Pn(M,null,Z,"beforeMount");const Ie=cv(Q,me);Ie&&me.beforeEnter(se),s(se,V,j),((ne=ge&&ge.onVnodeMounted)||Ie||pe)&&Qt(()=>{ne&&hn(ne,Z,M),Ie&&me.enter(se),pe&&Pn(M,null,Z,"mounted")},Q)},b=(M,V,j,Z,Q)=>{if(j&&y(M,j),Z)for(let ee=0;ee<Z.length;ee++)y(M,Z[ee]);if(Q){let ee=Q.subTree;if(V===ee||fv(ee.type)&&(ee.ssContent===V||ee.ssFallback===V)){const J=Q.vnode;b(M,J,J.scopeId,J.slotScopeIds,Q.parent)}}},w=(M,V,j,Z,Q,ee,J,H,se=0)=>{for(let ne=se;ne<M.length;ne++){const ge=M[ne]=H?As(M[ne]):rn(M[ne]);I(null,ge,V,j,Z,Q,ee,J,H)}},T=(M,V,j,Z,Q,ee,J)=>{const H=V.el=M.el;let{patchFlag:se,dynamicChildren:ne,dirs:ge}=V;se|=M.patchFlag&16;const ae=M.props||et,me=V.props||et;let pe;if(j&&ii(j,!1),(pe=me.onVnodeBeforeUpdate)&&hn(pe,j,V,M),ge&&Pn(V,M,j,"beforeUpdate"),j&&ii(j,!0),(ae.innerHTML&&me.innerHTML==null||ae.textContent&&me.textContent==null)&&d(H,""),ne?A(M.dynamicChildren,ne,H,j,Z,Kc(V,Q),ee):J||le(M,V,H,null,j,Z,Kc(V,Q),ee,!1),se>0){if(se&16)D(H,ae,me,j,Q);else if(se&2&&ae.class!==me.class&&r(H,"class",null,me.class,Q),se&4&&r(H,"style",ae.style,me.style,Q),se&8){const Ie=V.dynamicProps;for(let We=0;We<Ie.length;We++){const Be=Ie[We],Ct=ae[Be],kt=me[Be];(kt!==Ct||Be==="value")&&r(H,Be,Ct,kt,Q,j)}}se&1&&M.children!==V.children&&d(H,V.children)}else!J&&ne==null&&D(H,ae,me,j,Q);((pe=me.onVnodeUpdated)||ge)&&Qt(()=>{pe&&hn(pe,j,V,M),ge&&Pn(V,M,j,"updated")},Z)},A=(M,V,j,Z,Q,ee,J)=>{for(let H=0;H<V.length;H++){const se=M[H],ne=V[H],ge=se.el&&(se.type===ye||!Jn(se,ne)||se.shapeFlag&198)?h(se.el):j;I(se,ne,ge,null,Z,Q,ee,J,!0)}},D=(M,V,j,Z,Q)=>{if(V!==j){if(V!==et)for(const ee in V)!er(ee)&&!(ee in j)&&r(M,ee,V[ee],null,Q,Z);for(const ee in j){if(er(ee))continue;const J=j[ee],H=V[ee];J!==H&&ee!=="value"&&r(M,ee,H,J,Q,Z)}"value"in j&&r(M,"value",V.value,j.value,Q)}},x=(M,V,j,Z,Q,ee,J,H,se)=>{const ne=V.el=M?M.el:a(""),ge=V.anchor=M?M.anchor:a("");let{patchFlag:ae,dynamicChildren:me,slotScopeIds:pe}=V;pe&&(H=H?H.concat(pe):pe),M==null?(s(ne,j,Z),s(ge,j,Z),w(V.children||[],j,ge,Q,ee,J,H,se)):ae>0&&ae&64&&me&&M.dynamicChildren?(A(M.dynamicChildren,me,j,Q,ee,J,H),(V.key!=null||Q&&V===Q.subTree)&&Jd(M,V,!0)):le(M,V,j,ge,Q,ee,J,H,se)},S=(M,V,j,Z,Q,ee,J,H,se)=>{V.slotScopeIds=H,M==null?V.shapeFlag&512?Q.ctx.activate(V,j,Z,J,se):ve(V,j,Z,Q,ee,J,se):Se(M,V,se)},ve=(M,V,j,Z,Q,ee,J)=>{const H=M.component=_1(M,Z,Q);if(qd(M)&&(H.ctx.renderer=ue),w1(H,!1,J),H.asyncDep){if(Q&&Q.registerDep(H,re,J),!M.el){const se=H.subTree=qe(ln);N(null,se,V,j),M.placeholder=se.el}}else re(H,M,V,j,Q,ee,J)},Se=(M,V,j)=>{const Z=V.component=M.component;if(a1(M,V,j))if(Z.asyncDep&&!Z.asyncResolved){fe(Z,V,j);return}else Z.next=V,Z.update();else V.el=M.el,Z.vnode=V},re=(M,V,j,Z,Q,ee,J)=>{const H=()=>{if(M.isMounted){let{next:ae,bu:me,u:pe,parent:Ie,vnode:We}=M;{const Lt=uv(M);if(Lt){ae&&(ae.el=We.el,fe(M,ae,J)),Lt.asyncDep.then(()=>{M.isUnmounted||H()});return}}let Be=ae,Ct;ii(M,!1),ae?(ae.el=We.el,fe(M,ae,J)):ae=We,me&&Ma(me),(Ct=ae.props&&ae.props.onVnodeBeforeUpdate)&&hn(Ct,Ie,ae,We),ii(M,!0);const kt=Gc(M),Rt=M.subTree;M.subTree=kt,I(Rt,kt,h(Rt.el),F(Rt),M,Q,ee),ae.el=kt.el,Be===null&&Kl(M,kt.el),pe&&Qt(pe,Q),(Ct=ae.props&&ae.props.onVnodeUpdated)&&Qt(()=>hn(Ct,Ie,ae,We),Q)}else{let ae;const{el:me,props:pe}=V,{bm:Ie,m:We,parent:Be,root:Ct,type:kt}=M,Rt=yi(V);if(ii(M,!1),Ie&&Ma(Ie),!Rt&&(ae=pe&&pe.onVnodeBeforeMount)&&hn(ae,Be,V),ii(M,!0),me&&$e){const Lt=()=>{M.subTree=Gc(M),$e(me,M.subTree,M,Q,null)};Rt&&kt.__asyncHydrate?kt.__asyncHydrate(me,M,Lt):Lt()}else{Ct.ce&&Ct.ce._def.shadowRoot!==!1&&Ct.ce._injectChildStyle(kt);const Lt=M.subTree=Gc(M);I(null,Lt,j,Z,M,Q,ee),V.el=Lt.el}if(We&&Qt(We,Q),!Rt&&(ae=pe&&pe.onVnodeMounted)){const Lt=V;Qt(()=>hn(ae,Be,Lt),Q)}(V.shapeFlag&256||Be&&yi(Be.vnode)&&Be.vnode.shapeFlag&256)&&M.a&&Qt(M.a,Q),M.isMounted=!0,V=j=Z=null}};M.scope.on();const se=M.effect=new gy(H);M.scope.off();const ne=M.update=se.run.bind(se),ge=M.job=se.runIfDirty.bind(se);ge.i=M,ge.id=M.uid,se.scheduler=()=>Bd(ge),ii(M,!0),ne()},fe=(M,V,j)=>{V.component=M;const Z=M.vnode.props;M.vnode=V,M.next=null,HT(M,V.props,Z,j),GT(M,V.children,j),is(),ip(M),rs()},le=(M,V,j,Z,Q,ee,J,H,se=!1)=>{const ne=M&&M.children,ge=M?M.shapeFlag:0,ae=V.children,{patchFlag:me,shapeFlag:pe}=V;if(me>0){if(me&128){St(ne,ae,j,Z,Q,ee,J,H,se);return}else if(me&256){Le(ne,ae,j,Z,Q,ee,J,H,se);return}}pe&8?(ge&16&&W(ne,Q,ee),ae!==ne&&d(j,ae)):ge&16?pe&16?St(ne,ae,j,Z,Q,ee,J,H,se):W(ne,Q,ee,!0):(ge&8&&d(j,""),pe&16&&w(ae,j,Z,Q,ee,J,H,se))},Le=(M,V,j,Z,Q,ee,J,H,se)=>{M=M||Xi,V=V||Xi;const ne=M.length,ge=V.length,ae=Math.min(ne,ge);let me;for(me=0;me<ae;me++){const pe=V[me]=se?As(V[me]):rn(V[me]);I(M[me],pe,j,null,Q,ee,J,H,se)}ne>ge?W(M,Q,ee,!0,!1,ae):w(V,j,Z,Q,ee,J,H,se,ae)},St=(M,V,j,Z,Q,ee,J,H,se)=>{let ne=0;const ge=V.length;let ae=M.length-1,me=ge-1;for(;ne<=ae&&ne<=me;){const pe=M[ne],Ie=V[ne]=se?As(V[ne]):rn(V[ne]);if(Jn(pe,Ie))I(pe,Ie,j,null,Q,ee,J,H,se);else break;ne++}for(;ne<=ae&&ne<=me;){const pe=M[ae],Ie=V[me]=se?As(V[me]):rn(V[me]);if(Jn(pe,Ie))I(pe,Ie,j,null,Q,ee,J,H,se);else break;ae--,me--}if(ne>ae){if(ne<=me){const pe=me+1,Ie=pe<ge?V[pe].el:Z;for(;ne<=me;)I(null,V[ne]=se?As(V[ne]):rn(V[ne]),j,Ie,Q,ee,J,H,se),ne++}}else if(ne>me)for(;ne<=ae;)He(M[ne],Q,ee,!0),ne++;else{const pe=ne,Ie=ne,We=new Map;for(ne=Ie;ne<=me;ne++){const qt=V[ne]=se?As(V[ne]):rn(V[ne]);qt.key!=null&&We.set(qt.key,ne)}let Be,Ct=0;const kt=me-Ie+1;let Rt=!1,Lt=0;const gs=new Array(kt);for(ne=0;ne<kt;ne++)gs[ne]=0;for(ne=pe;ne<=ae;ne++){const qt=M[ne];if(Ct>=kt){He(qt,Q,ee,!0);continue}let un;if(qt.key!=null)un=We.get(qt.key);else for(Be=Ie;Be<=me;Be++)if(gs[Be-Ie]===0&&Jn(qt,V[Be])){un=Be;break}un===void 0?He(qt,Q,ee,!0):(gs[un-Ie]=ne+1,un>=Lt?Lt=un:Rt=!0,I(qt,V[un],j,null,Q,ee,J,H,se),Ct++)}const Mi=Rt?JT(gs):Xi;for(Be=Mi.length-1,ne=kt-1;ne>=0;ne--){const qt=Ie+ne,un=V[qt],Di=V[qt+1],xr=qt+1<ge?Di.el||Di.placeholder:Z;gs[ne]===0?I(null,un,j,xr,Q,ee,J,H,se):Rt&&(Be<0||ne!==Mi[Be]?Et(un,j,xr,2):Be--)}}},Et=(M,V,j,Z,Q=null)=>{const{el:ee,type:J,transition:H,children:se,shapeFlag:ne}=M;if(ne&6){Et(M.component.subTree,V,j,Z);return}if(ne&128){M.suspense.move(V,j,Z);return}if(ne&64){J.move(M,V,j,ue);return}if(J===ye){s(ee,V,j);for(let ae=0;ae<se.length;ae++)Et(se[ae],V,j,Z);s(M.anchor,V,j);return}if(J===oo){R(M,V,j);return}if(Z!==2&&ne&1&&H)if(Z===0)H.beforeEnter(ee),s(ee,V,j),Qt(()=>H.enter(ee),Q);else{const{leave:ae,delayLeave:me,afterLeave:pe}=H,Ie=()=>{M.ctx.isUnmounted?i(ee):s(ee,V,j)},We=()=>{ae(ee,()=>{Ie(),pe&&pe()})};me?me(ee,Ie,We):We()}else s(ee,V,j)},He=(M,V,j,Z=!1,Q=!1)=>{const{type:ee,props:J,ref:H,children:se,dynamicChildren:ne,shapeFlag:ge,patchFlag:ae,dirs:me,cacheIndex:pe}=M;if(ae===-2&&(Q=!1),H!=null&&(is(),nr(H,null,j,M,!0),rs()),pe!=null&&(V.renderCache[pe]=void 0),ge&256){V.ctx.deactivate(M);return}const Ie=ge&1&&me,We=!yi(M);let Be;if(We&&(Be=J&&J.onVnodeBeforeUnmount)&&hn(Be,V,M),ge&6)ce(M.component,j,Z);else{if(ge&128){M.suspense.unmount(j,Z);return}Ie&&Pn(M,null,V,"beforeUnmount"),ge&64?M.type.remove(M,V,j,ue,Z):ne&&!ne.hasOnce&&(ee!==ye||ae>0&&ae&64)?W(ne,V,j,!1,!0):(ee===ye&&ae&384||!Q&&ge&16)&&W(se,V,j),Z&&je(M)}(We&&(Be=J&&J.onVnodeUnmounted)||Ie)&&Qt(()=>{Be&&hn(Be,V,M),Ie&&Pn(M,null,V,"unmounted")},j)},je=M=>{const{type:V,el:j,anchor:Z,transition:Q}=M;if(V===ye){Me(j,Z);return}if(V===oo){C(M);return}const ee=()=>{i(j),Q&&!Q.persisted&&Q.afterLeave&&Q.afterLeave()};if(M.shapeFlag&1&&Q&&!Q.persisted){const{leave:J,delayLeave:H}=Q,se=()=>J(j,ee);H?H(M.el,ee,se):se()}else ee()},Me=(M,V)=>{let j;for(;M!==V;)j=p(M),i(M),M=j;i(V)},ce=(M,V,j)=>{const{bum:Z,scope:Q,job:ee,subTree:J,um:H,m:se,a:ne,parent:ge,slots:{__:ae}}=M;gp(se),gp(ne),Z&&Ma(Z),ge&&be(ae)&&ae.forEach(me=>{ge.renderCache[me]=void 0}),Q.stop(),ee&&(ee.flags|=8,He(J,M,V,j)),H&&Qt(H,V),Qt(()=>{M.isUnmounted=!0},V),V&&V.pendingBranch&&!V.isUnmounted&&M.asyncDep&&!M.asyncResolved&&M.suspenseId===V.pendingId&&(V.deps--,V.deps===0&&V.resolve())},W=(M,V,j,Z=!1,Q=!1,ee=0)=>{for(let J=ee;J<M.length;J++)He(M[J],V,j,Z,Q)},F=M=>{if(M.shapeFlag&6)return F(M.component.subTree);if(M.shapeFlag&128)return M.suspense.next();const V=p(M.anchor||M.el),j=V&&V[Fy];return j?p(j):V};let B=!1;const K=(M,V,j)=>{M==null?V._vnode&&He(V._vnode,null,null,!0):I(V._vnode||null,M,V,null,null,null,j),V._vnode=M,B||(B=!0,ip(),sl(),B=!1)},ue={p:I,um:He,m:Et,r:je,mt:ve,mc:w,pc:le,pbc:A,n:F,o:t};let Te,$e;return e&&([Te,$e]=e(ue)),{render:K,hydrate:Te,createApp:BT(K,Te)}}function Kc({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function ii({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function cv(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Jd(t,e,n=!1){const s=t.children,i=e.children;if(be(s)&&be(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=As(i[r]),a.el=o.el),!n&&a.patchFlag!==-2&&Jd(o,a)),a.type===_i&&(a.el=o.el),a.type===ln&&!a.el&&(a.el=o.el)}}function JT(t){const e=t.slice(),n=[0];let s,i,r,o,a;const c=t.length;for(s=0;s<c;s++){const u=t[s];if(u!==0){if(i=n[n.length-1],t[i]<u){e[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,t[n[a]]<u?r=a+1:o=a;u<t[n[r]]&&(r>0&&(e[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=e[o];return n}function uv(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:uv(e)}function gp(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const XT=Symbol.for("v-scx"),ZT=()=>ts(XT);function e1(t,e){return Xd(t,null,e)}function an(t,e,n){return Xd(t,e,n)}function Xd(t,e,n=et){const{immediate:s,deep:i,flush:r,once:o}=n,a=Tt({},n),c=e&&s||!e&&r!=="post";let u;if(dr){if(r==="sync"){const y=ZT();u=y.__watcherHandles||(y.__watcherHandles=[])}else if(!c){const y=()=>{};return y.stop=Nn,y.resume=Nn,y.pause=Nn,y}}const d=Dt;a.call=(y,_,I)=>kn(y,d,_,I);let h=!1;r==="post"?a.scheduler=y=>{Qt(y,d&&d.suspense)}:r!=="sync"&&(h=!0,a.scheduler=(y,_)=>{_?y():Bd(y)}),a.augmentJob=y=>{e&&(y.flags|=4),h&&(y.flags|=2,d&&(y.id=d.uid,y.i=d))};const p=fT(t,e,a);return dr&&(u?u.push(p):c&&p()),p}function t1(t,e,n){const s=this.proxy,i=lt(t)?t.includes(".")?dv(s,t):()=>s[t]:t.bind(s,s);let r;Ae(e)?r=e:(r=e.handler,n=e);const o=$o(this),a=Xd(i,r.bind(s),n);return o(),a}function dv(t,e){const n=e.split(".");return()=>{let s=t;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}const n1=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${yn(e)}Modifiers`]||t[`${Ys(e)}Modifiers`];function s1(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||et;let i=n;const r=e.startsWith("update:"),o=r&&n1(s,e.slice(7));o&&(o.trim&&(i=n.map(d=>lt(d)?d.trim():d)),o.number&&(i=n.map(Xa)));let a,c=s[a=Uc(e)]||s[a=Uc(yn(e))];!c&&r&&(c=s[a=Uc(Ys(e))]),c&&kn(c,t,6,i);const u=s[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,kn(u,t,6,i)}}function hv(t,e,n=!1){const s=e.emitsCache,i=s.get(t);if(i!==void 0)return i;const r=t.emits;let o={},a=!1;if(!Ae(t)){const c=u=>{const d=hv(u,e,!0);d&&(a=!0,Tt(o,d))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!r&&!a?(Je(t)&&s.set(t,null),null):(be(r)?r.forEach(c=>o[c]=null):Tt(o,r),Je(t)&&s.set(t,o),o)}function ql(t,e){return!t||!No(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ge(t,e[0].toLowerCase()+e.slice(1))||Ge(t,Ys(e))||Ge(t,e))}function Gc(t){const{type:e,vnode:n,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:c,render:u,renderCache:d,props:h,data:p,setupState:y,ctx:_,inheritAttrs:I}=t,k=il(t);let N,L;try{if(n.shapeFlag&4){const C=i||s,P=C;N=rn(u.call(P,C,d,h,y,p,_)),L=a}else{const C=e;N=rn(C.length>1?C(h,{attrs:a,slots:o,emit:c}):C(h,null)),L=e.props?a:r1(a)}}catch(C){ao.length=0,Tr(C,t,1),N=qe(ln)}let R=N;if(L&&I!==!1){const C=Object.keys(L),{shapeFlag:P}=R;C.length&&P&7&&(r&&C.some(Rd)&&(L=o1(L,r)),R=Ti(R,L,!1,!0))}return n.dirs&&(R=Ti(R,null,!1,!0),R.dirs=R.dirs?R.dirs.concat(n.dirs):n.dirs),n.transition&&bo(R,n.transition),N=R,il(k),N}function i1(t,e=!0){let n;for(let s=0;s<t.length;s++){const i=t[s];if(ur(i)){if(i.type!==ln||i.children==="v-if"){if(n)return;n=i}}else return}return n}const r1=t=>{let e;for(const n in t)(n==="class"||n==="style"||No(n))&&((e||(e={}))[n]=t[n]);return e},o1=(t,e)=>{const n={};for(const s in t)(!Rd(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function a1(t,e,n){const{props:s,children:i,component:r}=t,{props:o,children:a,patchFlag:c}=e,u=r.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?yp(s,o,u):!!o;if(c&8){const d=e.dynamicProps;for(let h=0;h<d.length;h++){const p=d[h];if(o[p]!==s[p]&&!ql(u,p))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?yp(s,o,u):!0:!!o;return!1}function yp(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(e[r]!==t[r]&&!ql(n,r))return!0}return!1}function Kl({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const fv=t=>t.__isSuspense;let Nu=0;const l1={name:"Suspense",__isSuspense:!0,process(t,e,n,s,i,r,o,a,c,u){if(t==null)u1(e,n,s,i,r,o,a,c,u);else{if(r&&r.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}d1(t,e,n,s,i,o,a,c,u)}},hydrate:h1,normalize:f1},c1=l1;function To(t,e){const n=t.props&&t.props[e];Ae(n)&&n()}function u1(t,e,n,s,i,r,o,a,c){const{p:u,o:{createElement:d}}=c,h=d("div"),p=t.suspense=pv(t,i,s,e,h,n,r,o,a,c);u(null,p.pendingBranch=t.ssContent,h,null,s,p,r,o),p.deps>0?(To(t,"onPending"),To(t,"onFallback"),u(null,t.ssFallback,e,n,s,null,r,o),sr(p,t.ssFallback)):p.resolve(!1,!0)}function d1(t,e,n,s,i,r,o,a,{p:c,um:u,o:{createElement:d}}){const h=e.suspense=t.suspense;h.vnode=e,e.el=t.el;const p=e.ssContent,y=e.ssFallback,{activeBranch:_,pendingBranch:I,isInFallback:k,isHydrating:N}=h;if(I)h.pendingBranch=p,Jn(p,I)?(c(I,p,h.hiddenContainer,null,i,h,r,o,a),h.deps<=0?h.resolve():k&&(N||(c(_,y,n,s,i,null,r,o,a),sr(h,y)))):(h.pendingId=Nu++,N?(h.isHydrating=!1,h.activeBranch=I):u(I,i,h),h.deps=0,h.effects.length=0,h.hiddenContainer=d("div"),k?(c(null,p,h.hiddenContainer,null,i,h,r,o,a),h.deps<=0?h.resolve():(c(_,y,n,s,i,null,r,o,a),sr(h,y))):_&&Jn(p,_)?(c(_,p,n,s,i,h,r,o,a),h.resolve(!0)):(c(null,p,h.hiddenContainer,null,i,h,r,o,a),h.deps<=0&&h.resolve()));else if(_&&Jn(p,_))c(_,p,n,s,i,h,r,o,a),sr(h,p);else if(To(e,"onPending"),h.pendingBranch=p,p.shapeFlag&512?h.pendingId=p.component.suspenseId:h.pendingId=Nu++,c(null,p,h.hiddenContainer,null,i,h,r,o,a),h.deps<=0)h.resolve();else{const{timeout:L,pendingId:R}=h;L>0?setTimeout(()=>{h.pendingId===R&&h.fallback(y)},L):L===0&&h.fallback(y)}}function pv(t,e,n,s,i,r,o,a,c,u,d=!1){const{p:h,m:p,um:y,n:_,o:{parentNode:I,remove:k}}=u;let N;const L=p1(t);L&&e&&e.pendingBranch&&(N=e.pendingId,e.deps++);const R=t.props?dy(t.props.timeout):void 0,C=r,P={vnode:t,parent:e,parentComponent:n,namespace:o,container:s,hiddenContainer:i,deps:0,pendingId:Nu++,timeout:typeof R=="number"?R:-1,activeBranch:null,pendingBranch:null,isInFallback:!d,isHydrating:d,isUnmounted:!1,effects:[],resolve(O=!1,b=!1){const{vnode:w,activeBranch:T,pendingBranch:A,pendingId:D,effects:x,parentComponent:S,container:ve}=P;let Se=!1;P.isHydrating?P.isHydrating=!1:O||(Se=T&&A.transition&&A.transition.mode==="out-in",Se&&(T.transition.afterLeave=()=>{D===P.pendingId&&(p(A,ve,r===C?_(T):r,0),Au(x))}),T&&(I(T.el)===ve&&(r=_(T)),y(T,S,P,!0)),Se||p(A,ve,r,0)),sr(P,A),P.pendingBranch=null,P.isInFallback=!1;let re=P.parent,fe=!1;for(;re;){if(re.pendingBranch){re.effects.push(...x),fe=!0;break}re=re.parent}!fe&&!Se&&Au(x),P.effects=[],L&&e&&e.pendingBranch&&N===e.pendingId&&(e.deps--,e.deps===0&&!b&&e.resolve()),To(w,"onResolve")},fallback(O){if(!P.pendingBranch)return;const{vnode:b,activeBranch:w,parentComponent:T,container:A,namespace:D}=P;To(b,"onFallback");const x=_(w),S=()=>{P.isInFallback&&(h(null,O,A,x,T,null,D,a,c),sr(P,O))},ve=O.transition&&O.transition.mode==="out-in";ve&&(w.transition.afterLeave=S),P.isInFallback=!0,y(w,T,null,!0),ve||S()},move(O,b,w){P.activeBranch&&p(P.activeBranch,O,b,w),P.container=O},next(){return P.activeBranch&&_(P.activeBranch)},registerDep(O,b,w){const T=!!P.pendingBranch;T&&P.deps++;const A=O.vnode.el;O.asyncDep.catch(D=>{Tr(D,O,0)}).then(D=>{if(O.isUnmounted||P.isUnmounted||P.pendingId!==O.suspenseId)return;O.asyncResolved=!0;const{vnode:x}=O;Vu(O,D),A&&(x.el=A);const S=!A&&O.subTree.el;b(O,x,I(A||O.subTree.el),A?null:_(O.subTree),P,o,w),S&&k(S),Kl(O,x.el),T&&--P.deps===0&&P.resolve()})},unmount(O,b){P.isUnmounted=!0,P.activeBranch&&y(P.activeBranch,n,O,b),P.pendingBranch&&y(P.pendingBranch,n,O,b)}};return P}function h1(t,e,n,s,i,r,o,a,c){const u=e.suspense=pv(e,s,n,t.parentNode,document.createElement("div"),null,i,r,o,a,!0),d=c(t,u.pendingBranch=e.ssContent,n,u,r,o);return u.deps===0&&u.resolve(!1,!0),d}function f1(t){const{shapeFlag:e,children:n}=t,s=e&32;t.ssContent=vp(s?n.default:n),t.ssFallback=s?vp(n.fallback):qe(ln)}function vp(t){let e;if(Ae(t)){const n=cr&&t._c;n&&(t._d=!1,$()),t=t(),n&&(t._d=!0,e=en,gv())}return be(t)&&(t=i1(t)),t=rn(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function mv(t,e){e&&e.pendingBranch?be(t)?e.effects.push(...t):e.effects.push(t):Au(t)}function sr(t,e){t.activeBranch=e;const{vnode:n,parentComponent:s}=t;let i=e.el;for(;!i&&e.component;)e=e.component.subTree,i=e.el;n.el=i,s&&s.subTree===n&&(s.vnode.el=i,Kl(s,i))}function p1(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const ye=Symbol.for("v-fgt"),_i=Symbol.for("v-txt"),ln=Symbol.for("v-cmt"),oo=Symbol.for("v-stc"),ao=[];let en=null;function $(t=!1){ao.push(en=t?null:[])}function gv(){ao.pop(),en=ao[ao.length-1]||null}let cr=1;function _p(t,e=!1){cr+=t,t<0&&en&&e&&(en.hasOnce=!0)}function yv(t){return t.dynamicChildren=cr>0?en||Xi:null,gv(),cr>0&&en&&en.push(t),t}function z(t,e,n,s,i,r){return yv(v(t,e,n,s,i,r,!0))}function Ze(t,e,n,s,i){return yv(qe(t,e,n,s,i,!0))}function ur(t){return t?t.__v_isVNode===!0:!1}function Jn(t,e){return t.type===e.type&&t.key===e.key}const vv=({key:t})=>t??null,Na=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?lt(t)||at(t)||Ae(t)?{i:Ot,r:t,k:e,f:!!n}:t:null);function v(t,e=null,n=null,s=0,i=null,r=t===ye?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&vv(e),ref:e&&Na(e),scopeId:Ly,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Ot};return a?(Zd(c,n),r&128&&t.normalize(c)):n&&(c.shapeFlag|=lt(n)?8:16),cr>0&&!o&&en&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&en.push(c),c}const qe=m1;function m1(t,e=null,n=null,s=0,i=null,r=!1){if((!t||t===Gy)&&(t=ln),ur(t)){const a=Ti(t,e,!0);return n&&Zd(a,n),cr>0&&!r&&en&&(a.shapeFlag&6?en[en.indexOf(t)]=a:en.push(a)),a.patchFlag=-2,a}if(k1(t)&&(t=t.__vccOpts),e){e=_v(e);let{class:a,style:c}=e;a&&!lt(a)&&(e.class=Ee(a)),Je(c)&&(Ud(c)&&!be(c)&&(c=Tt({},c)),e.style=nt(c))}const o=lt(t)?1:fv(t)?128:gT(t)?64:Je(t)?4:Ae(t)?2:0;return v(t,e,n,s,i,o,r,!0)}function _v(t){return t?Ud(t)||nv(t)?Tt({},t):t:null}function Ti(t,e,n=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:c}=t,u=e?g1(i||{},e):i,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&vv(u),ref:e&&e.ref?n&&r?be(r)?r.concat(Na(e)):[r,Na(e)]:Na(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ye?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ti(t.ssContent),ssFallback:t.ssFallback&&Ti(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&s&&bo(d,c.clone(d)),d}function pi(t=" ",e=0){return qe(_i,null,t,e)}function fn(t,e){const n=qe(oo,null,t);return n.staticCount=e,n}function Qe(t="",e=!1){return e?($(),Ze(ln,null,t)):qe(ln,null,t)}function rn(t){return t==null||typeof t=="boolean"?qe(ln):be(t)?qe(ye,null,t.slice()):ur(t)?As(t):qe(_i,null,String(t))}function As(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ti(t)}function Zd(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(be(e))n=16;else if(typeof e=="object")if(s&65){const i=e.default;i&&(i._c&&(i._d=!1),Zd(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!nv(e)?e._ctx=Ot:i===3&&Ot&&(Ot.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ae(e)?(e={default:e,_ctx:Ot},n=32):(e=String(e),s&64?(n=16,e=[pi(e)]):n=8);t.children=e,t.shapeFlag|=n}function g1(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const i in s)if(i==="class")e.class!==s.class&&(e.class=Ee([e.class,s.class]));else if(i==="style")e.style=nt([e.style,s.style]);else if(No(i)){const r=e[i],o=s[i];o&&r!==o&&!(be(r)&&r.includes(o))&&(e[i]=r?[].concat(r,o):o)}else i!==""&&(e[i]=s[i])}return e}function hn(t,e,n,s=null){kn(t,e,7,[n,s])}const y1=Zy();let v1=0;function _1(t,e,n){const s=t.type,i=(e?e.appContext:t.appContext)||y1,r={uid:v1++,vnode:t,type:s,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new my(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:iv(s,i),emitsOptions:hv(s,i),emit:null,emitted:null,propsDefaults:et,inheritAttrs:s.inheritAttrs,ctx:et,data:et,props:et,attrs:et,slots:et,refs:et,setupState:et,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=s1.bind(null,r),t.ce&&t.ce(r),r}let Dt=null;const Fo=()=>Dt||Ot;let ol,Ou;{const t=Bl(),e=(n,s)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};ol=e("__VUE_INSTANCE_SETTERS__",n=>Dt=n),Ou=e("__VUE_SSR_SETTERS__",n=>dr=n)}const $o=t=>{const e=Dt;return ol(t),t.scope.on(),()=>{t.scope.off(),ol(e)}},wp=()=>{Dt&&Dt.scope.off(),ol(null)};function wv(t){return t.vnode.shapeFlag&4}let dr=!1;function w1(t,e=!1,n=!1){e&&Ou(e);const{props:s,children:i}=t.vnode,r=wv(t);zT(t,s,r,e),KT(t,i,n||e);const o=r?b1(t,e):void 0;return e&&Ou(!1),o}function b1(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,OT);const{setup:s}=n;if(s){is();const i=t.setupContext=s.length>1?I1(t):null,r=$o(t),o=Vo(s,t,0,[t.props,i]),a=ly(o);if(rs(),r(),(a||t.sp)&&!yi(t)&&Wd(t),a){if(o.then(wp,wp),e)return o.then(c=>{Vu(t,c)}).catch(c=>{Tr(c,t,0)});t.asyncDep=o}else Vu(t,o)}else bv(t)}function Vu(t,e,n){Ae(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Je(e)&&(t.setupState=xy(e)),bv(t)}function bv(t,e,n){const s=t.type;t.render||(t.render=s.render||Nn);{const i=$o(t);is();try{VT(t)}finally{rs(),i()}}}const T1={get(t,e){return zt(t,"get",""),t[e]}};function I1(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,T1),slots:t.slots,emit:t.emit,expose:e}}function Gl(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(xy(jd(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in ro)return ro[n](t)},has(e,n){return n in e||n in ro}})):t.proxy}function E1(t,e=!0){return Ae(t)?t.displayName||t.name:t.name||e&&t.__name}function k1(t){return Ae(t)&&"__vccOpts"in t}const xe=(t,e)=>dT(t,e,dr);function Lu(t,e,n){const s=arguments.length;return s===2?Je(e)&&!be(e)?ur(e)?qe(t,null,[e]):qe(t,e):qe(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&ur(n)&&(n=[n]),qe(t,e,n))}const A1="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Fu;const bp=typeof window<"u"&&window.trustedTypes;if(bp)try{Fu=bp.createPolicy("vue",{createHTML:t=>t})}catch{}const Tv=Fu?t=>Fu.createHTML(t):t=>t,S1="http://www.w3.org/2000/svg",C1="http://www.w3.org/1998/Math/MathML",Gn=typeof document<"u"?document:null,Tp=Gn&&Gn.createElement("template"),R1={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const i=e==="svg"?Gn.createElementNS(S1,t):e==="mathml"?Gn.createElementNS(C1,t):n?Gn.createElement(t,{is:n}):Gn.createElement(t);return t==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:t=>Gn.createTextNode(t),createComment:t=>Gn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Gn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,i,r){const o=n?n.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{Tp.innerHTML=Tv(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=Tp.content;if(s==="svg"||s==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},ws="transition",Wr="animation",hr=Symbol("_vtc"),Iv={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},P1=Tt({},_T,Iv),ri=(t,e=[])=>{be(t)?t.forEach(n=>n(...e)):t&&t(...e)},Ip=t=>t?be(t)?t.some(e=>e.length>1):t.length>1:!1;function x1(t){const e={};for(const x in t)x in Iv||(e[x]=t[x]);if(t.css===!1)return e;const{name:n="v",type:s,duration:i,enterFromClass:r=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=r,appearActiveClass:u=o,appearToClass:d=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:y=`${n}-leave-to`}=t,_=M1(i),I=_&&_[0],k=_&&_[1],{onBeforeEnter:N,onEnter:L,onEnterCancelled:R,onLeave:C,onLeaveCancelled:P,onBeforeAppear:O=N,onAppear:b=L,onAppearCancelled:w=R}=e,T=(x,S,ve,Se)=>{x._enterCancelled=Se,Is(x,S?d:a),Is(x,S?u:o),ve&&ve()},A=(x,S)=>{x._isLeaving=!1,Is(x,h),Is(x,y),Is(x,p),S&&S()},D=x=>(S,ve)=>{const Se=x?b:L,re=()=>T(S,x,ve);ri(Se,[S,re]),Ep(()=>{Is(S,x?c:r),Cn(S,x?d:a),Ip(Se)||kp(S,s,I,re)})};return Tt(e,{onBeforeEnter(x){ri(N,[x]),Cn(x,r),Cn(x,o)},onBeforeAppear(x){ri(O,[x]),Cn(x,c),Cn(x,u)},onEnter:D(!1),onAppear:D(!0),onLeave(x,S){x._isLeaving=!0;const ve=()=>A(x,S);Cn(x,h),x._enterCancelled?(Cn(x,p),$u()):($u(),Cn(x,p)),Ep(()=>{x._isLeaving&&(Is(x,h),Cn(x,y),Ip(C)||kp(x,s,k,ve))}),ri(C,[x,ve])},onEnterCancelled(x){T(x,!1,void 0,!0),ri(R,[x])},onAppearCancelled(x){T(x,!0,void 0,!0),ri(w,[x])},onLeaveCancelled(x){A(x),ri(P,[x])}})}function M1(t){if(t==null)return null;if(Je(t))return[Qc(t.enter),Qc(t.leave)];{const e=Qc(t);return[e,e]}}function Qc(t){return dy(t)}function Cn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[hr]||(t[hr]=new Set)).add(e)}function Is(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[hr];n&&(n.delete(e),n.size||(t[hr]=void 0))}function Ep(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let D1=0;function kp(t,e,n,s){const i=t._endId=++D1,r=()=>{i===t._endId&&s()};if(n!=null)return setTimeout(r,n);const{type:o,timeout:a,propCount:c}=Ev(t,e);if(!o)return s();const u=o+"end";let d=0;const h=()=>{t.removeEventListener(u,p),r()},p=y=>{y.target===t&&++d>=c&&h()};setTimeout(()=>{d<c&&h()},a+1),t.addEventListener(u,p)}function Ev(t,e){const n=window.getComputedStyle(t),s=_=>(n[_]||"").split(", "),i=s(`${ws}Delay`),r=s(`${ws}Duration`),o=Ap(i,r),a=s(`${Wr}Delay`),c=s(`${Wr}Duration`),u=Ap(a,c);let d=null,h=0,p=0;e===ws?o>0&&(d=ws,h=o,p=r.length):e===Wr?u>0&&(d=Wr,h=u,p=c.length):(h=Math.max(o,u),d=h>0?o>u?ws:Wr:null,p=d?d===ws?r.length:c.length:0);const y=d===ws&&/\b(transform|all)(,|$)/.test(s(`${ws}Property`).toString());return{type:d,timeout:h,propCount:p,hasTransform:y}}function Ap(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>Sp(n)+Sp(t[s])))}function Sp(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function $u(){return document.body.offsetHeight}function N1(t,e,n){const s=t[hr];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Cp=Symbol("_vod"),O1=Symbol("_vsh"),V1=Symbol(""),L1=/(^|;)\s*display\s*:/;function F1(t,e,n){const s=t.style,i=lt(n);let r=!1;if(n&&!i){if(e)if(lt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Oa(s,a,"")}else for(const o in e)n[o]==null&&Oa(s,o,"");for(const o in n)o==="display"&&(r=!0),Oa(s,o,n[o])}else if(i){if(e!==n){const o=s[V1];o&&(n+=";"+o),s.cssText=n,r=L1.test(n)}}else e&&t.removeAttribute("style");Cp in t&&(t[Cp]=r?s.display:"",t[O1]&&(s.display="none"))}const Rp=/\s*!important$/;function Oa(t,e,n){if(be(n))n.forEach(s=>Oa(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=$1(t,e);Rp.test(n)?t.setProperty(Ys(s),n.replace(Rp,""),"important"):t[s]=n}}const Pp=["Webkit","Moz","ms"],Yc={};function $1(t,e){const n=Yc[e];if(n)return n;let s=yn(e);if(s!=="filter"&&s in t)return Yc[e]=s;s=jl(s);for(let i=0;i<Pp.length;i++){const r=Pp[i]+s;if(r in t)return Yc[e]=r}return e}const xp="http://www.w3.org/1999/xlink";function Mp(t,e,n,s,i,r=Ob(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(xp,e.slice(6,e.length)):t.setAttributeNS(xp,e,n):n==null||r&&!hy(n)?t.removeAttribute(e):t.setAttribute(e,r?"":En(n)?String(n):n)}function Dp(t,e,n,s,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Tv(n):n);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(a!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=hy(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function hi(t,e,n,s){t.addEventListener(e,n,s)}function U1(t,e,n,s){t.removeEventListener(e,n,s)}const Np=Symbol("_vei");function j1(t,e,n,s,i=null){const r=t[Np]||(t[Np]={}),o=r[e];if(s&&o)o.value=s;else{const[a,c]=B1(e);if(s){const u=r[e]=W1(s,i);hi(t,a,u,c)}else o&&(U1(t,a,o,c),r[e]=void 0)}}const Op=/(?:Once|Passive|Capture)$/;function B1(t){let e;if(Op.test(t)){e={};let s;for(;s=t.match(Op);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ys(t.slice(2)),e]}let Jc=0;const z1=Promise.resolve(),H1=()=>Jc||(z1.then(()=>Jc=0),Jc=Date.now());function W1(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;kn(q1(s,n.value),e,5,[s])};return n.value=t,n.attached=H1(),n}function q1(t,e){if(be(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>i=>!i._stopped&&s&&s(i))}else return e}const Vp=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,K1=(t,e,n,s,i,r)=>{const o=i==="svg";e==="class"?N1(t,s,o):e==="style"?F1(t,n,s):No(e)?Rd(e)||j1(t,e,n,s,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):G1(t,e,s,o))?(Dp(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Mp(t,e,s,o,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!lt(s))?Dp(t,yn(e),s,r,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Mp(t,e,s,o))};function G1(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&Vp(e)&&Ae(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Vp(e)&&lt(n)?!1:e in t}const kv=new WeakMap,Av=new WeakMap,al=Symbol("_moveCb"),Lp=Symbol("_enterCb"),Q1=t=>(delete t.props.mode,t),Y1=Q1({name:"TransitionGroup",props:Tt({},P1,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Fo(),s=vT();let i,r;return Wy(()=>{if(!i.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!tI(i[0].el,n.vnode.el,o)){i=[];return}i.forEach(X1),i.forEach(Z1);const a=i.filter(eI);$u(),a.forEach(c=>{const u=c.el,d=u.style;Cn(u,o),d.transform=d.webkitTransform=d.transitionDuration="";const h=u[al]=p=>{p&&p.target!==u||(!p||/transform$/.test(p.propertyName))&&(u.removeEventListener("transitionend",h),u[al]=null,Is(u,o))};u.addEventListener("transitionend",h)}),i=[]}),()=>{const o=Ue(t),a=x1(o);let c=o.tag||ye;if(i=[],r)for(let u=0;u<r.length;u++){const d=r[u];d.el&&d.el instanceof Element&&(i.push(d),bo(d,Cu(d,a,s,n)),kv.set(d,d.el.getBoundingClientRect()))}r=e.default?jy(e.default()):[];for(let u=0;u<r.length;u++){const d=r[u];d.key!=null&&bo(d,Cu(d,a,s,n))}return qe(c,null,r)}}}),J1=Y1;function X1(t){const e=t.el;e[al]&&e[al](),e[Lp]&&e[Lp]()}function Z1(t){Av.set(t,t.el.getBoundingClientRect())}function eI(t){const e=kv.get(t),n=Av.get(t),s=e.left-n.left,i=e.top-n.top;if(s||i){const r=t.el.style;return r.transform=r.webkitTransform=`translate(${s}px,${i}px)`,r.transitionDuration="0s",t}}function tI(t,e,n){const s=t.cloneNode(),i=t[hr];i&&i.forEach(a=>{a.split(/\s+/).forEach(c=>c&&s.classList.remove(c))}),n.split(/\s+/).forEach(a=>a&&s.classList.add(a)),s.style.display="none";const r=e.nodeType===1?e:e.parentNode;r.appendChild(s);const{hasTransform:o}=Ev(s);return r.removeChild(s),o}const ll=t=>{const e=t.props["onUpdate:modelValue"]||!1;return be(e)?n=>Ma(e,n):e};function nI(t){t.target.composing=!0}function Fp(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ir=Symbol("_assign"),ns={created(t,{modifiers:{lazy:e,trim:n,number:s}},i){t[ir]=ll(i);const r=s||i.props&&i.props.type==="number";hi(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),r&&(a=Xa(a)),t[ir](a)}),n&&hi(t,"change",()=>{t.value=t.value.trim()}),e||(hi(t,"compositionstart",nI),hi(t,"compositionend",Fp),hi(t,"change",Fp))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:i,number:r}},o){if(t[ir]=ll(o),t.composing)return;const a=(r||t.type==="number")&&!/^0\d/.test(t.value)?Xa(t.value):t.value,c=e??"";a!==c&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||i&&t.value.trim()===c)||(t.value=c))}},Io={deep:!0,created(t,{value:e,modifiers:{number:n}},s){const i=$l(e);hi(t,"change",()=>{const r=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Xa(cl(o)):cl(o));t[ir](t.multiple?i?new Set(r):r:r[0]),t._assigning=!0,as(()=>{t._assigning=!1})}),t[ir]=ll(s)},mounted(t,{value:e}){$p(t,e)},beforeUpdate(t,e,n){t[ir]=ll(n)},updated(t,{value:e}){t._assigning||$p(t,e)}};function $p(t,e){const n=t.multiple,s=be(e);if(!(n&&!s&&!$l(e))){for(let i=0,r=t.options.length;i<r;i++){const o=t.options[i],a=cl(o);if(n)if(s){const c=typeof a;c==="string"||c==="number"?o.selected=e.some(u=>String(u)===String(a)):o.selected=Lb(e,a)>-1}else o.selected=e.has(a);else if(zl(cl(o),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function cl(t){return"_value"in t?t._value:t.value}const sI=["ctrl","shift","alt","meta"],iI={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>sI.some(n=>t[`${n}Key`]&&!e.includes(n))},Ke=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(i,...r)=>{for(let o=0;o<e.length;o++){const a=iI[e[o]];if(a&&a(i,e))return}return t(i,...r)})},rI={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},ul=(t,e)=>{const n=t._withKeys||(t._withKeys={}),s=e.join(".");return n[s]||(n[s]=i=>{if(!("key"in i))return;const r=Ys(i.key);if(e.some(o=>o===r||rI[o]===r))return t(i)})},Sv=Tt({patchProp:K1},R1);let lo,Up=!1;function oI(){return lo||(lo=QT(Sv))}function aI(){return lo=Up?lo:YT(Sv),Up=!0,lo}const lI=(...t)=>{const e=oI().createApp(...t),{mount:n}=e;return e.mount=s=>{const i=Rv(s);if(!i)return;const r=e._component;!Ae(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,Cv(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e},cI=(...t)=>{const e=aI().createApp(...t),{mount:n}=e;return e.mount=s=>{const i=Rv(s);if(i)return n(i,!0,Cv(i))},e};function Cv(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Rv(t){return lt(t)?document.querySelector(t):t}const uI=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,dI=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,hI=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function fI(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){pI(t);return}return e}function pI(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function dl(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!hI.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(uI.test(t)||dI.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,fI)}return JSON.parse(t)}catch(s){if(e.strict)throw s;return t}}const mI=/#/g,gI=/&/g,yI=/\//g,vI=/=/g,eh=/\+/g,_I=/%5e/gi,wI=/%60/gi,bI=/%7c/gi,TI=/%20/gi;function II(t){return encodeURI(""+t).replace(bI,"|")}function Uu(t){return II(typeof t=="string"?t:JSON.stringify(t)).replace(eh,"%2B").replace(TI,"+").replace(mI,"%23").replace(gI,"%26").replace(wI,"`").replace(_I,"^").replace(yI,"%2F")}function Xc(t){return Uu(t).replace(vI,"%3D")}function hl(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function EI(t){return hl(t.replace(eh," "))}function kI(t){return hl(t.replace(eh," "))}function th(t=""){const e=Object.create(null);t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const s=n.match(/([^=]+)=?(.*)/)||[];if(s.length<2)continue;const i=EI(s[1]);if(i==="__proto__"||i==="constructor")continue;const r=kI(s[2]||"");e[i]===void 0?e[i]=r:Array.isArray(e[i])?e[i].push(r):e[i]=[e[i],r]}return e}function AI(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>`${Xc(t)}=${Uu(n)}`).join("&"):`${Xc(t)}=${Uu(e)}`:Xc(t)}function Pv(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>AI(e,t[e])).filter(Boolean).join("&")}const SI=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,CI=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,RI=/^([/\\]\s*){2,}[^/\\]/,PI=/^[\s\0]*(blob|data|javascript|vbscript):$/i,xI=/\/$|\/\?|\/#/,MI=/^\.?\//;function Ir(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?SI.test(t):CI.test(t)||(e.acceptRelative?RI.test(t):!1)}function DI(t){return!!t&&PI.test(t)}function ju(t="",e){return e?xI.test(t):t.endsWith("/")}function nh(t="",e){if(!e)return(ju(t)?t.slice(0,-1):t)||"/";if(!ju(t,!0))return t||"/";let n=t,s="";const i=t.indexOf("#");i!==-1&&(n=t.slice(0,i),s=t.slice(i));const[r,...o]=n.split("?");return((r.endsWith("/")?r.slice(0,-1):r)||"/")+(o.length>0?`?${o.join("?")}`:"")+s}function Bu(t="",e){if(!e)return t.endsWith("/")?t:t+"/";if(ju(t,!0))return t||"/";let n=t,s="";const i=t.indexOf("#");if(i!==-1&&(n=t.slice(0,i),s=t.slice(i),!n))return s;const[r,...o]=n.split("?");return r+"/"+(o.length>0?`?${o.join("?")}`:"")+s}function NI(t=""){return t.startsWith("/")}function jp(t=""){return NI(t)?t:"/"+t}function OI(t,e){if(Mv(e)||Ir(t))return t;const n=nh(e);return t.startsWith(n)?t:Ql(n,t)}function VI(t,e){if(Mv(e))return t;const n=nh(e);if(!t.startsWith(n))return t;const s=t.slice(n.length);return s[0]==="/"?s:"/"+s}function xv(t,e){const n=Ov(t),s={...th(n.search),...e};return n.search=Pv(s),Vv(n)}function Mv(t){return!t||t==="/"}function LI(t){return t&&t!=="/"}function Ql(t,...e){let n=t||"";for(const s of e.filter(i=>LI(i)))if(n){const i=s.replace(MI,"");n=Bu(n)+i}else n=s;return n}function Dv(...t){const e=/\/(?!\/)/,n=t.filter(Boolean),s=[];let i=0;for(const o of n)if(!(!o||o==="/")){for(const[a,c]of o.split(e).entries())if(!(!c||c===".")){if(c===".."){if(s.length===1&&Ir(s[0]))continue;s.pop(),i--;continue}if(a===1&&s[s.length-1]?.endsWith(":/")){s[s.length-1]+="/"+c;continue}s.push(c),i++}}let r=s.join("/");return i>=0?n[0]?.startsWith("/")&&!r.startsWith("/")?r="/"+r:n[0]?.startsWith("./")&&!r.startsWith("./")&&(r="./"+r):r="../".repeat(-1*i)+r,n[n.length-1]?.endsWith("/")&&!r.endsWith("/")&&(r+="/"),r}function FI(t,e,n={}){return n.trailingSlash||(t=Bu(t),e=Bu(e)),n.leadingSlash||(t=jp(t),e=jp(e)),n.encoding||(t=hl(t),e=hl(e)),t===e}const Nv=Symbol.for("ufo:protocolRelative");function Ov(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,h,p=""]=n;return{protocol:h.toLowerCase(),pathname:p,href:h+p,auth:"",host:"",search:"",hash:""}}if(!Ir(t,{acceptRelative:!0}))return Bp(t);const[,s="",i,r=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,o="",a=""]=r.match(/([^#/?]*)(.*)?/)||[];s==="file:"&&(a=a.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:c,search:u,hash:d}=Bp(a);return{protocol:s.toLowerCase(),auth:i?i.slice(0,Math.max(0,i.length-1)):"",host:o,pathname:c,search:u,hash:d,[Nv]:!s}}function Bp(t=""){const[e="",n="",s=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:s}}function Vv(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",s=t.hash||"",i=t.auth?t.auth+"@":"",r=t.host||"";return(t.protocol||t[Nv]?(t.protocol||"")+"//":"")+i+r+e+n+s}class $I extends Error{constructor(e,n){super(e,n),this.name="FetchError",n?.cause&&!this.cause&&(this.cause=n.cause)}}function UI(t){const e=t.error?.message||t.error?.toString()||"",n=t.request?.method||t.options?.method||"GET",s=t.request?.url||String(t.request)||"/",i=`[${n}] ${JSON.stringify(s)}`,r=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",o=`${i}: ${r}${e?` ${e}`:""}`,a=new $I(o,t.error?{cause:t.error}:void 0);for(const c of["request","options","response"])Object.defineProperty(a,c,{get(){return t[c]}});for(const[c,u]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(a,c,{get(){return t.response&&t.response[u]}});return a}const jI=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function zp(t="GET"){return jI.has(t.toUpperCase())}function BI(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const zI=new Set(["image/svg","application/xml","application/xhtml","application/html"]),HI=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function WI(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return HI.test(e)?"json":zI.has(e)||e.startsWith("text/")?"text":"blob"}function qI(t,e,n,s){const i=KI(e?.headers??t?.headers,n?.headers,s);let r;return(n?.query||n?.params||e?.params||e?.query)&&(r={...n?.params,...n?.query,...e?.params,...e?.query}),{...n,...e,query:r,params:r,headers:i}}function KI(t,e,n){if(!e)return new n(t);const s=new n(e);if(t)for(const[i,r]of Symbol.iterator in t||Array.isArray(t)?t:new n(t))s.set(i,r);return s}async function Ta(t,e){if(e)if(Array.isArray(e))for(const n of e)await n(t);else await e(t)}const GI=new Set([408,409,425,429,500,502,503,504]),QI=new Set([101,204,205,304]);function Lv(t={}){const{fetch:e=globalThis.fetch,Headers:n=globalThis.Headers,AbortController:s=globalThis.AbortController}=t;async function i(a){const c=a.error&&a.error.name==="AbortError"&&!a.options.timeout||!1;if(a.options.retry!==!1&&!c){let d;typeof a.options.retry=="number"?d=a.options.retry:d=zp(a.options.method)?0:1;const h=a.response&&a.response.status||500;if(d>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(h):GI.has(h))){const p=typeof a.options.retryDelay=="function"?a.options.retryDelay(a):a.options.retryDelay||0;return p>0&&await new Promise(y=>setTimeout(y,p)),r(a.request,{...a.options,retry:d-1})}}const u=UI(a);throw Error.captureStackTrace&&Error.captureStackTrace(u,r),u}const r=async function(c,u={}){const d={request:c,options:qI(c,u,t.defaults,n),response:void 0,error:void 0};d.options.method&&(d.options.method=d.options.method.toUpperCase()),d.options.onRequest&&await Ta(d,d.options.onRequest),typeof d.request=="string"&&(d.options.baseURL&&(d.request=OI(d.request,d.options.baseURL)),d.options.query&&(d.request=xv(d.request,d.options.query),delete d.options.query),"query"in d.options&&delete d.options.query,"params"in d.options&&delete d.options.params),d.options.body&&zp(d.options.method)&&(BI(d.options.body)?(d.options.body=typeof d.options.body=="string"?d.options.body:JSON.stringify(d.options.body),d.options.headers=new n(d.options.headers||{}),d.options.headers.has("content-type")||d.options.headers.set("content-type","application/json"),d.options.headers.has("accept")||d.options.headers.set("accept","application/json")):("pipeTo"in d.options.body&&typeof d.options.body.pipeTo=="function"||typeof d.options.body.pipe=="function")&&("duplex"in d.options||(d.options.duplex="half")));let h;if(!d.options.signal&&d.options.timeout){const y=new s;h=setTimeout(()=>{const _=new Error("[TimeoutError]: The operation was aborted due to timeout");_.name="TimeoutError",_.code=23,y.abort(_)},d.options.timeout),d.options.signal=y.signal}try{d.response=await e(d.request,d.options)}catch(y){return d.error=y,d.options.onRequestError&&await Ta(d,d.options.onRequestError),await i(d)}finally{h&&clearTimeout(h)}if((d.response.body||d.response._bodyInit)&&!QI.has(d.response.status)&&d.options.method!=="HEAD"){const y=(d.options.parseResponse?"json":d.options.responseType)||WI(d.response.headers.get("content-type")||"");switch(y){case"json":{const _=await d.response.text(),I=d.options.parseResponse||dl;d.response._data=I(_);break}case"stream":{d.response._data=d.response.body||d.response._bodyInit;break}default:d.response._data=await d.response[y]()}}return d.options.onResponse&&await Ta(d,d.options.onResponse),!d.options.ignoreResponseError&&d.response.status>=400&&d.response.status<600?(d.options.onResponseError&&await Ta(d,d.options.onResponseError),await i(d)):d.response},o=async function(c,u){return(await r(c,u))._data};return o.raw=r,o.native=(...a)=>e(...a),o.create=(a={},c={})=>Lv({...t,...c,defaults:{...t.defaults,...c.defaults,...a}}),o}const fl=(function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")})(),YI=fl.fetch?(...t)=>fl.fetch(...t):()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!")),JI=fl.Headers,XI=fl.AbortController,ZI=Lv({fetch:YI,Headers:JI,AbortController:XI}),eE=ZI,tE=()=>window?.__NUXT__?.config||window?.useNuxtApp?.().payload?.config,sh=()=>tE().app,nE=()=>sh().baseURL,sE=()=>sh().buildAssetsDir,ih=(...t)=>Dv(rh(),sE(),...t),rh=(...t)=>{const e=sh(),n=e.cdnURL||e.baseURL;return t.length?Dv(n,...t):n};globalThis.__buildAssetsURL=ih,globalThis.__publicAssetsURL=rh;globalThis.$fetch||(globalThis.$fetch=eE.create({baseURL:nE()}));"global"in globalThis||(globalThis.global=globalThis);function zu(t,e={},n){for(const s in t){const i=t[s],r=n?`${n}:${s}`:s;typeof i=="object"&&i!==null?zu(i,e,r):typeof i=="function"&&(e[r]=i)}return e}const iE={run:t=>t()},rE=()=>iE,Fv=typeof console.createTask<"u"?console.createTask:rE;function oE(t,e){const n=e.shift(),s=Fv(n);return t.reduce((i,r)=>i.then(()=>s.run(()=>r(...e))),Promise.resolve())}function aE(t,e){const n=e.shift(),s=Fv(n);return Promise.all(t.map(i=>s.run(()=>i(...e))))}function Zc(t,e){for(const n of[...t])n(e)}class lE{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,n,s={}){if(!e||typeof n!="function")return()=>{};const i=e;let r;for(;this._deprecatedHooks[e];)r=this._deprecatedHooks[e],e=r.to;if(r&&!s.allowDeprecated){let o=r.message;o||(o=`${i} hook has been deprecated`+(r.to?`, please use ${r.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(o)||(console.warn(o),this._deprecatedMessages.add(o))}if(!n.name)try{Object.defineProperty(n,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(n),()=>{n&&(this.removeHook(e,n),n=void 0)}}hookOnce(e,n){let s,i=(...r)=>(typeof s=="function"&&s(),s=void 0,i=void 0,n(...r));return s=this.hook(e,i),s}removeHook(e,n){if(this._hooks[e]){const s=this._hooks[e].indexOf(n);s!==-1&&this._hooks[e].splice(s,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,n){this._deprecatedHooks[e]=typeof n=="string"?{to:n}:n;const s=this._hooks[e]||[];delete this._hooks[e];for(const i of s)this.hook(e,i)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const n in e)this.deprecateHook(n,e[n])}addHooks(e){const n=zu(e),s=Object.keys(n).map(i=>this.hook(i,n[i]));return()=>{for(const i of s.splice(0,s.length))i()}}removeHooks(e){const n=zu(e);for(const s in n)this.removeHook(s,n[s])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...n){return n.unshift(e),this.callHookWith(oE,e,...n)}callHookParallel(e,...n){return n.unshift(e),this.callHookWith(aE,e,...n)}callHookWith(e,n,...s){const i=this._before||this._after?{name:n,args:s,context:{}}:void 0;this._before&&Zc(this._before,i);const r=e(n in this._hooks?[...this._hooks[n]]:[],s);return r instanceof Promise?r.finally(()=>{this._after&&i&&Zc(this._after,i)}):(this._after&&i&&Zc(this._after,i),r)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const n=this._before.indexOf(e);n!==-1&&this._before.splice(n,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const n=this._after.indexOf(e);n!==-1&&this._after.splice(n,1)}}}}function $v(){return new lE}function cE(t={}){let e,n=!1;const s=o=>{if(e&&e!==o)throw new Error("Context conflict")};let i;if(t.asyncContext){const o=t.AsyncLocalStorage||globalThis.AsyncLocalStorage;o?i=new o:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const r=()=>{if(i){const o=i.getStore();if(o!==void 0)return o}return e};return{use:()=>{const o=r();if(o===void 0)throw new Error("Context is not available");return o},tryUse:()=>r(),set:(o,a)=>{a||s(o),e=o,n=!0},unset:()=>{e=void 0,n=!1},call:(o,a)=>{s(o),e=o;try{return i?i.run(o,a):a()}finally{n||(e=void 0)}},async callAsync(o,a){e=o;const c=()=>{e=o},u=()=>e===o?c:void 0;Hu.add(u);try{const d=i?i.run(o,a):a();return n||(e=void 0),await d}finally{Hu.delete(u)}}}}function uE(t={}){const e={};return{get(n,s={}){return e[n]||(e[n]=cE({...t,...s})),e[n]}}}const pl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},Hp="__unctx__",dE=pl[Hp]||(pl[Hp]=uE()),hE=(t,e={})=>dE.get(t,e),Wp="__unctx_async_handlers__",Hu=pl[Wp]||(pl[Wp]=new Set);function Uv(t){const e=[];for(const i of Hu){const r=i();r&&e.push(r)}const n=()=>{for(const i of e)i()};let s=t();return s&&typeof s=="object"&&"catch"in s&&(s=s.catch(i=>{throw n(),i})),[s,n]}const qp={id:"__nuxt-loader"},$L={componentName:"NuxtLink",prefetch:!0,prefetchOn:{visibility:!0}},fE="#__nuxt",jv="nuxt-app",Kp=36e5,pE="vite:preloadError";function Bv(t=jv){return hE(t,{asyncContext:!1})}const mE="__nuxt_plugin";function gE(t){let e=0;const n={_id:t.id||jv||"nuxt-app",_scope:Md(),provide:void 0,versions:{get nuxt(){return"4.0.3"},get vue(){return n.vueApp.version}},payload:Qi({...t.ssrContext?.payload||{},data:Qi({}),state:vn({}),once:new Set,_errors:Qi({})}),static:{data:{}},runWithContext(i){return n._scope.active&&!Dd()?n._scope.run(()=>Gp(n,i)):Gp(n,i)},isHydrating:!0,deferHydration(){if(!n.isHydrating)return()=>{};e++;let i=!1;return()=>{if(!i&&(i=!0,e--,e===0))return n.isHydrating=!1,n.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:Qi({}),_payloadRevivers:{},...t};{const i=window.__NUXT__;if(i)for(const r in i)switch(r){case"data":case"state":case"_errors":Object.assign(n.payload[r],i[r]);break;default:n.payload[r]=i[r]}}n.hooks=$v(),n.hook=n.hooks.hook,n.callHook=n.hooks.callHook,n.provide=(i,r)=>{const o="$"+i;Ia(n,o,r),Ia(n.vueApp.config.globalProperties,o,r)},Ia(n.vueApp,"$nuxt",n),Ia(n.vueApp.config.globalProperties,"$nuxt",n);{window.addEventListener(pE,r=>{n.callHook("app:chunkError",{error:r.payload}),r.payload.message.includes("Unable to preload CSS")&&r.preventDefault()}),window.useNuxtApp||=pt;const i=n.hook("app:error",(...r)=>{console.error("[nuxt] error caught during app initialization",...r)});n.hook("app:mounted",i)}const s=n.payload.config;return n.provide("config",s),n}function yE(t,e){e.hooks&&t.hooks.addHooks(e.hooks)}async function vE(t,e){if(typeof e=="function"){const{provide:n}=await t.runWithContext(()=>e(t))||{};if(n&&typeof n=="object")for(const s in n)t.provide(s,n[s])}}async function _E(t,e){const n=new Set,s=[],i=[];let r,o=0;async function a(c){const u=c.dependsOn?.filter(d=>e.some(h=>h._name===d)&&!n.has(d))??[];if(u.length>0)s.push([new Set(u),c]);else{const d=vE(t,c).then(async()=>{c._name&&(n.add(c._name),await Promise.all(s.map(async([h,p])=>{h.has(c._name)&&(h.delete(c._name),h.size===0&&(o++,await a(p)))})))}).catch(h=>{if(!c.parallel&&!t.payload.error)throw h;r||=h});c.parallel?i.push(d):await d}}for(const c of e)yE(t,c);for(const c of e)await a(c);if(await Promise.all(i),o)for(let c=0;c<o;c++)await Promise.all(i);if(r)throw t.payload.error||r}function cn(t){if(typeof t=="function")return t;const e=t._name||t.name;return delete t.name,Object.assign(t.setup||(()=>{}),t,{[mE]:!0,_name:e})}const wE=cn;function Gp(t,e,n){const s=()=>e();return Bv(t._id).set(t),t.vueApp.runWithContext(s)}function bE(t){let e;return Lo()&&(e=Fo()?.appContext.app.$nuxt),e||=Bv(t).tryUse(),e||null}function pt(t){const e=bE(t);if(!e)throw new Error("[nuxt] instance unavailable");return e}function fr(t){return pt().$config}function Ia(t,e,n){Object.defineProperty(t,e,{get:()=>n})}function TE(t,e){return{ctx:{table:t},matchAll:n=>Hv(n,t)}}function zv(t){const e={};for(const n in t)e[n]=n==="dynamic"?new Map(Object.entries(t[n]).map(([s,i])=>[s,zv(i)])):new Map(Object.entries(t[n]));return e}function IE(t){return TE(zv(t))}function Hv(t,e,n){t.endsWith("/")&&(t=t.slice(0,-1)||"/");const s=[];for(const[r,o]of Qp(e.wildcard))(t===r||t.startsWith(r+"/"))&&s.push(o);for(const[r,o]of Qp(e.dynamic))if(t.startsWith(r+"/")){const a="/"+t.slice(r.length).split("/").splice(2).join("/");s.push(...Hv(a,o))}const i=e.static.get(t);return i&&s.push(i),s.filter(Boolean)}function Qp(t){return[...t.entries()].sort((e,n)=>e[0].length-n[0].length)}function eu(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function Wu(t,e,n=".",s){if(!eu(e))return Wu(t,{},n,s);const i=Object.assign({},e);for(const r in t){if(r==="__proto__"||r==="constructor")continue;const o=t[r];o!=null&&(s&&s(i,r,o,n)||(Array.isArray(o)&&Array.isArray(i[r])?i[r]=[...o,...i[r]]:eu(o)&&eu(i[r])?i[r]=Wu(o,i[r],(n?`${n}.`:"")+r.toString(),s):i[r]=o))}return i}function Wv(t){return(...e)=>e.reduce((n,s)=>Wu(n,s,"",t),{})}const EE=Wv(),kE=Wv((t,e,n)=>{if(t[e]!==void 0&&typeof n=="function")return t[e]=n(t[e]),!0});function AE(t,e){try{return e in t}catch{return!1}}class Yp extends Error{static __h3_error__=!0;statusCode=500;fatal=!1;unhandled=!1;statusMessage;data;cause;constructor(e,n={}){super(e,n),n.cause&&!this.cause&&(this.cause=n.cause)}toJSON(){const e={message:this.message,statusCode:qu(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=qv(this.statusMessage)),this.data!==void 0&&(e.data=this.data),e}}function SE(t){if(typeof t=="string")return new Yp(t);if(CE(t))return t;const e=new Yp(t.message??t.statusMessage??"",{cause:t.cause||t});if(AE(t,"stack"))try{Object.defineProperty(e,"stack",{get(){return t.stack}})}catch{try{e.stack=t.stack}catch{}}if(t.data&&(e.data=t.data),t.statusCode?e.statusCode=qu(t.statusCode,e.statusCode):t.status&&(e.statusCode=qu(t.status,e.statusCode)),t.statusMessage?e.statusMessage=t.statusMessage:t.statusText&&(e.statusMessage=t.statusText),e.statusMessage){const n=e.statusMessage;qv(e.statusMessage)!==n&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return t.fatal!==void 0&&(e.fatal=t.fatal),t.unhandled!==void 0&&(e.unhandled=t.unhandled),e}function CE(t){return t?.constructor?.__h3_error__===!0}const RE=/[^\u0009\u0020-\u007E]/g;function qv(t=""){return t.replace(RE,"")}function qu(t,e=200){return!t||(typeof t=="string"&&(t=Number.parseInt(t,10)),t<100||t>999)?e:t}const Kv=Symbol("route"),Bs=()=>pt()?.$router,Gv=()=>Lo()?ts(Kv,pt()._route):pt()._route;const PE=()=>{try{if(pt()._processingMiddleware)return!0}catch{return!1}return!1},xE=(t,e)=>{t||="/";const n=typeof t=="string"?t:"path"in t?ME(t):Bs().resolve(t).href;if(e?.open){const{target:c="_blank",windowFeatures:u={}}=e.open,d=Object.entries(u).filter(([h,p])=>p!==void 0).map(([h,p])=>`${h.toLowerCase()}=${p}`).join(", ");return open(n,c,d),Promise.resolve()}const s=Ir(n,{acceptRelative:!0}),i=e?.external||s;if(i){if(!e?.external)throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:c}=new URL(n,window.location.href);if(c&&DI(c))throw new Error(`Cannot navigate to a URL with '${c}' protocol.`)}const r=PE();if(!i&&r){if(e?.replace){if(typeof t=="string"){const{pathname:c,search:u,hash:d}=Ov(t);return{path:c,...u&&{query:th(u)},...d&&{hash:d},replace:!0}}return{...t,replace:!0}}return t}const o=Bs(),a=pt();return i?(a._scope.stop(),e?.replace?location.replace(n):location.href=n,r?a.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):e?.replace?o.replace(t):o.push(t)};function ME(t){return xv(t.path||"",t.query||{})+(t.hash||"")}const Qv="__nuxt_error",oh=()=>My(pt().payload,"error"),DE=t=>{const e=ah(t);try{const n=pt(),s=oh();n.hooks.callHook("app:error",e),s.value||=e}catch{throw e}return e},NE=async(t={})=>{const e=pt(),n=oh();e.callHook("app:error:cleared",t),t.redirect&&await Bs().replace(t.redirect),n.value=void 0},OE=t=>!!t&&typeof t=="object"&&Qv in t,ah=t=>{const e=SE(t);return Object.defineProperty(e,Qv,{value:!0,configurable:!1,writable:!1}),e};/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Yv;const Uo=t=>Yv=t,Jv=Symbol();function Ku(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var co;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(co||(co={}));function VE(){const t=Md(!0),e=t.run(()=>te({}));let n=[],s=[];const i=jd({install(r){Uo(i),i._a=r,r.provide(Jv,i),r.config.globalProperties.$pinia=i,s.forEach(o=>n.push(o)),s=[]},use(r){return this._a?n.push(r):s.push(r),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const Xv=()=>{};function Jp(t,e,n,s=Xv){t.push(e);const i=()=>{const r=t.indexOf(e);r>-1&&(t.splice(r,1),s())};return!n&&Dd()&&Fb(i),i}function ji(t,...e){t.slice().forEach(n=>{n(...e)})}const LE=t=>t(),Xp=Symbol(),tu=Symbol();function Gu(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,s)=>t.set(s,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const s=e[n],i=t[n];Ku(i)&&Ku(s)&&t.hasOwnProperty(n)&&!at(s)&&!es(s)?t[n]=Gu(i,s):t[n]=s}return t}const FE=Symbol();function $E(t){return!Ku(t)||!Object.prototype.hasOwnProperty.call(t,FE)}const{assign:Es}=Object;function UE(t){return!!(at(t)&&t.effect)}function jE(t,e,n,s){const{state:i,actions:r,getters:o}=e,a=n.state.value[t];let c;function u(){a||(n.state.value[t]=i?i():{});const d=aT(n.state.value[t]);return Es(d,r,Object.keys(o||{}).reduce((h,p)=>(h[p]=jd(xe(()=>{Uo(n);const y=n._s.get(t);return o[p].call(y,y)})),h),{}))}return c=Zv(t,u,e,n,s,!0),c}function Zv(t,e,n={},s,i,r){let o;const a=Es({actions:{}},n),c={deep:!0};let u,d,h=[],p=[],y;const _=s.state.value[t];!r&&!_&&(s.state.value[t]={}),te({});let I;function k(w){let T;u=d=!1,typeof w=="function"?(w(s.state.value[t]),T={type:co.patchFunction,storeId:t,events:y}):(Gu(s.state.value[t],w),T={type:co.patchObject,payload:w,storeId:t,events:y});const A=I=Symbol();as().then(()=>{I===A&&(u=!0)}),d=!0,ji(h,T,s.state.value[t])}const N=r?function(){const{state:T}=n,A=T?T():{};this.$patch(D=>{Es(D,A)})}:Xv;function L(){o.stop(),h=[],p=[],s._s.delete(t)}const R=(w,T="")=>{if(Xp in w)return w[tu]=T,w;const A=function(){Uo(s);const D=Array.from(arguments),x=[],S=[];function ve(fe){x.push(fe)}function Se(fe){S.push(fe)}ji(p,{args:D,name:A[tu],store:P,after:ve,onError:Se});let re;try{re=w.apply(this&&this.$id===t?this:P,D)}catch(fe){throw ji(S,fe),fe}return re instanceof Promise?re.then(fe=>(ji(x,fe),fe)).catch(fe=>(ji(S,fe),Promise.reject(fe))):(ji(x,re),re)};return A[Xp]=!0,A[tu]=T,A},C={_p:s,$id:t,$onAction:Jp.bind(null,p),$patch:k,$reset:N,$subscribe(w,T={}){const A=Jp(h,w,T.detached,()=>D()),D=o.run(()=>an(()=>s.state.value[t],x=>{(T.flush==="sync"?d:u)&&w({storeId:t,type:co.direct,events:y},x)},Es({},c,T)));return A},$dispose:L},P=vn(C);s._s.set(t,P);const b=(s._a&&s._a.runWithContext||LE)(()=>s._e.run(()=>(o=Md()).run(()=>e({action:R}))));for(const w in b){const T=b[w];if(at(T)&&!UE(T)||es(T))r||(_&&$E(T)&&(at(T)?T.value=_[w]:Gu(T,_[w])),s.state.value[t][w]=T);else if(typeof T=="function"){const A=R(T,w);b[w]=A,a.actions[w]=T}}return Es(P,b),Es(Ue(P),b),Object.defineProperty(P,"$state",{get:()=>s.state.value[t],set:w=>{k(T=>{Es(T,w)})}}),s._p.forEach(w=>{Es(P,o.run(()=>w({store:P,app:s._a,pinia:s,options:a})))}),_&&r&&n.hydrate&&n.hydrate(P.$state,_),u=!0,d=!0,P}/*! #__NO_SIDE_EFFECTS__ */function e_(t,e,n){let s;const i=typeof e=="function";s=i?n:e;function r(o,a){const c=Lo();return o=o||(c?ts(Jv,null):null),o&&Uo(o),o=Yv,o._s.has(t)||(i?Zv(t,e,s,o):jE(t,s,o)),o._s.get(t)}return r.$id=t,r}function Zp(t){const e=zE(t),n=new ArrayBuffer(e.length),s=new DataView(n);for(let i=0;i<n.byteLength;i++)s.setUint8(i,e.charCodeAt(i));return n}const BE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function zE(t){t.length%4===0&&(t=t.replace(/==?$/,""));let e="",n=0,s=0;for(let i=0;i<t.length;i++)n<<=6,n|=BE.indexOf(t[i]),s+=6,s===24&&(e+=String.fromCharCode((n&16711680)>>16),e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255),n=s=0);return s===12?(n>>=4,e+=String.fromCharCode(n)):s===18&&(n>>=2,e+=String.fromCharCode((n&65280)>>8),e+=String.fromCharCode(n&255)),e}const HE=-1,WE=-2,qE=-3,KE=-4,GE=-5,QE=-6;function YE(t,e){return JE(JSON.parse(t),e)}function JE(t,e){if(typeof t=="number")return i(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const n=t,s=Array(n.length);function i(r,o=!1){if(r===HE)return;if(r===qE)return NaN;if(r===KE)return 1/0;if(r===GE)return-1/0;if(r===QE)return-0;if(o)throw new Error("Invalid input");if(r in s)return s[r];const a=n[r];if(!a||typeof a!="object")s[r]=a;else if(Array.isArray(a))if(typeof a[0]=="string"){const c=a[0],u=e?.[c];if(u)return s[r]=u(i(a[1]));switch(c){case"Date":s[r]=new Date(a[1]);break;case"Set":const d=new Set;s[r]=d;for(let y=1;y<a.length;y+=1)d.add(i(a[y]));break;case"Map":const h=new Map;s[r]=h;for(let y=1;y<a.length;y+=2)h.set(i(a[y]),i(a[y+1]));break;case"RegExp":s[r]=new RegExp(a[1],a[2]);break;case"Object":s[r]=Object(a[1]);break;case"BigInt":s[r]=BigInt(a[1]);break;case"null":const p=Object.create(null);s[r]=p;for(let y=1;y<a.length;y+=2)p[a[y]]=i(a[y+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const y=globalThis[c],_=a[1],I=Zp(_),k=new y(I);s[r]=k;break}case"ArrayBuffer":{const y=a[1],_=Zp(y);s[r]=_;break}default:throw new Error(`Unknown type ${c}`)}}else{const c=new Array(a.length);s[r]=c;for(let u=0;u<a.length;u+=1){const d=a[u];d!==WE&&(c[u]=i(d))}}else{const c={};s[r]=c;for(const u in a){const d=a[u];c[u]=i(d)}}return s[r]}return i(0)}const XE=new Set(["link","style","script","noscript"]),ZE=new Set(["title","titleTemplate","script","style","noscript"]),em=new Set(["base","meta","link","style","script","noscript"]),ek=new Set(["title","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),tk=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),nk=new Set(["key","tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent","processTemplateParams"]),sk=new Set(["templateParams","htmlAttrs","bodyAttrs"]),ik=new Set(["theme-color","google-site-verification","og","article","book","profile","twitter","author"]),rk=["name","property","http-equiv"],ok=new Set(["viewport","description","keywords","robots"]);function t_(t){const e=t.split(":");return e.length?ik.has(e[1]):!1}function Qu(t){const{props:e,tag:n}=t;if(tk.has(n))return n;if(n==="link"&&e.rel==="canonical")return"canonical";if(e.charset)return"charset";if(t.tag==="meta"){for(const s of rk)if(e[s]!==void 0){const i=e[s],r=i.includes(":"),o=ok.has(i),c=!(r||o)&&t.key?`:key:${t.key}`:"";return`${n}:${i}${c}`}}if(t.key)return`${n}:key:${t.key}`;if(e.id)return`${n}:id:${e.id}`;if(ZE.has(n)){const s=t.textContent||t.innerHTML;if(s)return`${n}:content:${s}`}}function tm(t){const e=t._h||t._d;if(e)return e;const n=t.textContent||t.innerHTML;return n||`${t.tag}:${Object.entries(t.props).map(([s,i])=>`${s}:${String(i)}`).join(",")}`}function ml(t,e,n){typeof t==="function"&&(!n||n!=="titleTemplate"&&!(n[0]==="o"&&n[1]==="n"))&&(t=t());let i;if(e&&(i=e(n,t)),Array.isArray(i))return i.map(r=>ml(r,e));if(i?.constructor===Object){const r={};for(const o of Object.keys(i))r[o]=ml(i[o],e,o);return r}return i}function ak(t,e){const n=t==="style"?new Map:new Set;function s(i){const r=i.trim();if(r)if(t==="style"){const[o,...a]=r.split(":").map(c=>c.trim());o&&a.length&&n.set(o,a.join(":"))}else r.split(" ").filter(Boolean).forEach(o=>n.add(o))}return typeof e=="string"?t==="style"?e.split(";").forEach(s):s(e):Array.isArray(e)?e.forEach(i=>s(i)):e&&typeof e=="object"&&Object.entries(e).forEach(([i,r])=>{r&&r!=="false"&&(t==="style"?n.set(i.trim(),r):s(i))}),n}function n_(t,e){return t.props=t.props||{},e?t.tag==="templateParams"?(t.props=e,t):(Object.entries(e).forEach(([n,s])=>{if(s===null){t.props[n]=null;return}if(n==="class"||n==="style"){t.props[n]=ak(n,s);return}if(nk.has(n)){if(["textContent","innerHTML"].includes(n)&&typeof s=="object"){let o=e.type;if(e.type||(o="application/json"),!o?.endsWith("json")&&o!=="speculationrules")return;e.type=o,t.props.type=o,t[n]=JSON.stringify(s)}else t[n]=s;return}const i=String(s),r=n.startsWith("data-");i==="true"||i===""?t.props[n]=r?i:!0:!s&&r&&i==="false"?t.props[n]="false":s!==void 0&&(t.props[n]=s)}),t):t}function lk(t,e){const n=typeof e=="object"&&typeof e!="function"?e:{[t==="script"||t==="noscript"||t==="style"?"innerHTML":"textContent"]:e},s=n_({tag:t,props:{}},n);return s.key&&XE.has(s.tag)&&(s.props["data-hid"]=s._h=s.key),s.tag==="script"&&typeof s.innerHTML=="object"&&(s.innerHTML=JSON.stringify(s.innerHTML),s.props.type=s.props.type||"application/json"),Array.isArray(s.props.content)?s.props.content.map(i=>({...s,props:{...s.props,content:i}})):s}function ck(t,e){if(!t)return[];typeof t=="function"&&(t=t());const n=(i,r)=>{for(let o=0;o<e.length;o++)r=e[o](i,r);return r};t=n(void 0,t);const s=[];return t=ml(t,n),Object.entries(t||{}).forEach(([i,r])=>{if(r!==void 0)for(const o of Array.isArray(r)?r:[r])s.push(lk(i,o))}),s.flat()}const nm=(t,e)=>t._w===e._w?t._p-e._p:t._w-e._w,sm={base:-10,title:10},uk={critical:-8,high:-1,low:2},im={meta:{"content-security-policy":-30,charset:-20,viewport:-15},link:{preconnect:20,stylesheet:60,preload:70,modulepreload:70,prefetch:90,"dns-prefetch":90,prerender:90},script:{async:30,defer:80,sync:50},style:{imported:40,sync:60}},dk=/@import/,qr=t=>t===""||t===!0;function hk(t,e){if(typeof e.tagPriority=="number")return e.tagPriority;let n=100;const s=uk[e.tagPriority]||0,i=t.resolvedOptions.disableCapoSorting?{link:{},script:{},style:{}}:im;if(e.tag in sm)n=sm[e.tag];else if(e.tag==="meta"){const r=e.props["http-equiv"]==="content-security-policy"?"content-security-policy":e.props.charset?"charset":e.props.name==="viewport"?"viewport":null;r&&(n=im.meta[r])}else e.tag==="link"&&e.props.rel?n=i.link[e.props.rel]:e.tag==="script"?qr(e.props.async)?n=i.script.async:e.props.src&&!qr(e.props.defer)&&!qr(e.props.async)&&e.props.type!=="module"&&!e.props.type?.endsWith("json")?n=i.script.sync:qr(e.props.defer)&&e.props.src&&!qr(e.props.async)&&(n=i.script.defer):e.tag==="style"&&(n=e.innerHTML&&dk.test(e.innerHTML)?i.style.imported:i.style.sync);return(n||100)+s}function rm(t,e){const n=typeof e=="function"?e(t):e,s=n.key||String(t.plugins.size+1);t.plugins.get(s)||(t.plugins.set(s,n),t.hooks.addHooks(n.hooks||{}))}function fk(t={}){const e=$v();e.addHooks(t.hooks||{});const n=!t.document,s=new Map,i=new Map,r=new Set,o={_entryCount:1,plugins:i,dirty:!1,resolvedOptions:t,hooks:e,ssr:n,entries:s,headEntries(){return[...s.values()]},use:a=>rm(o,a),push(a,c){const u={...c||{}};delete u.head;const d=u._index??o._entryCount++,h={_i:d,input:a,options:u},p={_poll(y=!1){o.dirty=!0,!y&&r.add(d),e.callHook("entries:updated",o)},dispose(){s.delete(d)&&o.invalidate()},patch(y){(!u.mode||u.mode==="server"&&n||u.mode==="client"&&!n)&&(h.input=y,s.set(d,h),p._poll())}};return p.patch(a),p},async resolveTags(){const a={tagMap:new Map,tags:[],entries:[...o.entries.values()]};for(await e.callHook("entries:resolve",a);r.size;){const p=r.values().next().value;r.delete(p);const y=s.get(p);if(y){const _={tags:ck(y.input,t.propResolvers||[]).map(I=>Object.assign(I,y.options)),entry:y};await e.callHook("entries:normalize",_),y._tags=_.tags.map((I,k)=>(I._w=hk(o,I),I._p=(y._i<<10)+k,I._d=Qu(I),I))}}let c=!1;a.entries.flatMap(p=>(p._tags||[]).map(y=>({...y,props:{...y.props}}))).sort(nm).reduce((p,y)=>{const _=String(y._d||y._p);if(!p.has(_))return p.set(_,y);const I=p.get(_);if((y?.tagDuplicateStrategy||(sk.has(y.tag)?"merge":null)||(y.key&&y.key===I.key?"merge":null))==="merge"){const N={...I.props};Object.entries(y.props).forEach(([L,R])=>N[L]=L==="style"?new Map([...I.props.style||new Map,...R]):L==="class"?new Set([...I.props.class||new Set,...R]):R),p.set(_,{...y,props:N})}else y._p>>10===I._p>>10&&y.tag==="meta"&&t_(_)?(p.set(_,Object.assign([...Array.isArray(I)?I:[I],y],y)),c=!0):(y._w===I._w?y._p>I._p:y?._w<I?._w)&&p.set(_,y);return p},a.tagMap);const u=a.tagMap.get("title"),d=a.tagMap.get("titleTemplate");if(o._title=u?.textContent,d){const p=d?.textContent;if(o._titleTemplate=p,p){let y=typeof p=="function"?p(u?.textContent):p;typeof y=="string"&&!o.plugins.has("template-params")&&(y=y.replace("%s",u?.textContent||"")),u?y===null?a.tagMap.delete("title"):a.tagMap.set("title",{...u,textContent:y}):(d.tag="title",d.textContent=y)}}a.tags=Array.from(a.tagMap.values()),c&&(a.tags=a.tags.flat().sort(nm)),await e.callHook("tags:beforeResolve",a),await e.callHook("tags:resolve",a),await e.callHook("tags:afterResolve",a);const h=[];for(const p of a.tags){const{innerHTML:y,tag:_,props:I}=p;if(ek.has(_)&&!(Object.keys(I).length===0&&!p.innerHTML&&!p.textContent)&&!(_==="meta"&&!I.content&&!I["http-equiv"]&&!I.charset)){if(_==="script"&&y){if(I.type?.endsWith("json")){const k=typeof y=="string"?y:JSON.stringify(y);p.innerHTML=k.replace(/</g,"\\u003C")}else typeof y=="string"&&(p.innerHTML=y.replace(new RegExp(`</${_}`,"g"),`<\\/${_}`));p._d=Qu(p)}h.push(p)}}return h},invalidate(){for(const a of s.values())r.add(a._i);o.dirty=!0,e.callHook("entries:updated",o)}};return(t?.plugins||[]).forEach(a=>rm(o,a)),o.hooks.callHook("init",o),t.init?.forEach(a=>a&&o.push(a)),o}const pk=(t,e)=>at(e)?rT(e):e,lh="usehead";function mk(t){return{install(n){n.config.globalProperties.$unhead=t,n.config.globalProperties.$head=t,n.provide(lh,t)}}.install}function gk(){if(Lo()){const t=ts(lh);if(!t)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return t}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function yk(t,e={}){const n=e.head||gk();return n.ssr?n.push(t||{},e):vk(n,t,e)}function vk(t,e,n={}){const s=te(!1);let i;return e1(()=>{const o=s.value?{}:ml(e,pk);i?i.patch(o):i=t.push(o,n)}),Fo()&&(Kd(()=>{i.dispose()}),zy(()=>{s.value=!0}),By(()=>{s.value=!1})),i}function _k(t){const e=t||pt();return e.ssrContext?.head||e.runWithContext(()=>{if(Lo()){const n=ts(lh);if(!n)throw new Error("[nuxt] [unhead] Missing Unhead instance.");return n}})}function wk(t,e={}){const n=_k(e.nuxt);return yk(t,{head:n,...e})}const bk="modulepreload",Tk=function(t,e){return new URL(t,e).href},om={},Yu=function(e,n,s){let i=Promise.resolve();if(n&&n.length>0){let u=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");i=u(n.map(d=>{if(d=Tk(d,s),d in om)return;om[d]=!0;const h=d.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(!!s)for(let I=o.length-1;I>=0;I--){const k=o[I];if(k.href===d&&(!h||k.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${p}`))return;const _=document.createElement("link");if(_.rel=h?"stylesheet":bk,h||(_.as="script"),_.crossOrigin="",_.href=d,c&&_.setAttribute("nonce",c),document.head.appendChild(_),h)return new Promise((I,k)=>{_.addEventListener("load",I),_.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${d}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})};let Va,La;function Ik(){return Va=$fetch(ih(`builds/meta/${fr().app.buildId}.json`),{responseType:"json"}),Va.then(t=>{La=IE(t.matcher)}).catch(t=>{console.error("[nuxt] Error fetching app manifest.",t)}),Va}function Yl(){return Va||Ik()}async function ch(t){const e=typeof t=="string"?t:t.path;if(await Yl(),!La)return console.error("[nuxt] Error creating app manifest matcher.",La),{};try{return EE({},...La.matchAll(e).reverse())}catch(n){return console.error("[nuxt] Error matching route rules.",n),{}}}async function am(t,e={}){if(!await i_(t))return null;const s=await kk(t,e);return await s_(s)||null}const Ek="_payload.json";async function kk(t,e={}){const n=new URL(t,"http://localhost");if(n.host!=="localhost"||Ir(n.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+t);const s=fr(),i=e.hash||(e.fresh?Date.now():s.app.buildId),r=s.app.cdnURL,o=r&&await i_(t)?r:s.app.baseURL;return Ql(o,n.pathname,Ek+(i?`?${i}`:""))}async function s_(t){const e=fetch(t,{cache:"force-cache"}).then(n=>n.text().then(r_));try{return await e}catch(n){console.warn("[nuxt] Cannot load payload ",t,n)}return null}async function i_(t=Gv().path){const e=pt();return t=nh(t),(await Yl()).prerendered.includes(t)?!0:e.runWithContext(async()=>{const s=await ch({path:t});return!!s.prerender&&!s.redirect})}let oi=null;async function Ak(){if(oi)return oi;const t=document.getElementById("__NUXT_DATA__");if(!t)return{};const e=await r_(t.textContent||""),n=t.dataset.src?await s_(t.dataset.src):void 0;return oi={...e,...n,...window.__NUXT__},oi.config?.public&&(oi.config.public=vn(oi.config.public)),oi}async function r_(t){return await YE(t,pt()._payloadRevivers)}function o_(t,e){pt()._payloadRevivers[t]=e}const Sk=wE(()=>{o_("skipHydrate",t=>{})}),Ck=[["NuxtError",t=>ah(t)],["EmptyShallowRef",t=>ku(t==="_"?void 0:t==="0n"?BigInt(0):dl(t))],["EmptyRef",t=>te(t==="_"?void 0:t==="0n"?BigInt(0):dl(t))],["ShallowRef",t=>ku(t)],["ShallowReactive",t=>Qi(t)],["Ref",t=>te(t)],["Reactive",t=>vn(t)]],Rk=cn({name:"nuxt:revive-payload:client",order:-30,async setup(t){let e,n;for(const[s,i]of Ck)o_(s,i);Object.assign(t.payload,([e,n]=Uv(()=>t.runWithContext(Ak)),e=await e,n(),e)),delete window.__NUXT__}});async function uh(t,e={}){const n=e.document||t.resolvedOptions.document;if(!n||!t.dirty)return;const s={shouldRender:!0,tags:[]};if(await t.hooks.callHook("dom:beforeRender",s),!!s.shouldRender)return t._domUpdatePromise||(t._domUpdatePromise=new Promise(async i=>{const r=new Map,o=new Promise(y=>{t.resolveTags().then(_=>{y(_.map(I=>{const k=r.get(I._d)||0,N={tag:I,id:(k?`${I._d}:${k}`:I._d)||tm(I),shouldRender:!0};return I._d&&t_(I._d)&&r.set(I._d,k+1),N}))})});let a=t._dom;if(!a){a={title:n.title,elMap:new Map().set("htmlAttrs",n.documentElement).set("bodyAttrs",n.body)};for(const y of["body","head"]){const _=n[y]?.children;for(const I of _){const k=I.tagName.toLowerCase();if(!em.has(k))continue;const N=n_({tag:k,props:{}},{innerHTML:I.innerHTML,...I.getAttributeNames().reduce((L,R)=>(L[R]=I.getAttribute(R),L),{})||{}});if(N.key=I.getAttribute("data-hid")||void 0,N._d=Qu(N)||tm(N),a.elMap.has(N._d)){let L=1,R=N._d;for(;a.elMap.has(R);)R=`${N._d}:${L++}`;a.elMap.set(R,I)}else a.elMap.set(N._d,I)}}}a.pendingSideEffects={...a.sideEffects},a.sideEffects={};function c(y,_,I){const k=`${y}:${_}`;a.sideEffects[k]=I,delete a.pendingSideEffects[k]}function u({id:y,$el:_,tag:I}){const k=I.tag.endsWith("Attrs");a.elMap.set(y,_),k||(I.textContent&&I.textContent!==_.textContent&&(_.textContent=I.textContent),I.innerHTML&&I.innerHTML!==_.innerHTML&&(_.innerHTML=I.innerHTML),c(y,"el",()=>{_?.remove(),a.elMap.delete(y)}));for(const N in I.props){if(!Object.prototype.hasOwnProperty.call(I.props,N))continue;const L=I.props[N];if(N.startsWith("on")&&typeof L=="function"){const C=_?.dataset;if(C&&C[`${N}fired`]){const P=N.slice(0,-5);L.call(_,new Event(P.substring(2)))}_.getAttribute(`data-${N}`)!==""&&((I.tag==="bodyAttrs"?n.defaultView:_).addEventListener(N.substring(2),L.bind(_)),_.setAttribute(`data-${N}`,""));continue}const R=`attr:${N}`;if(N==="class"){if(!L)continue;for(const C of L)k&&c(y,`${R}:${C}`,()=>_.classList.remove(C)),!_.classList.contains(C)&&_.classList.add(C)}else if(N==="style"){if(!L)continue;for(const[C,P]of L)c(y,`${R}:${C}`,()=>{_.style.removeProperty(C)}),_.style.setProperty(C,P)}else L!==!1&&L!==null&&(_.getAttribute(N)!==L&&_.setAttribute(N,L===!0?"":String(L)),k&&c(y,R,()=>_.removeAttribute(N)))}}const d=[],h={bodyClose:void 0,bodyOpen:void 0,head:void 0},p=await o;for(const y of p){const{tag:_,shouldRender:I,id:k}=y;if(I){if(_.tag==="title"){n.title=_.textContent,c("title","",()=>n.title=a.title);continue}y.$el=y.$el||a.elMap.get(k),y.$el?u(y):em.has(_.tag)&&d.push(y)}}for(const y of d){const _=y.tag.tagPosition||"head";y.$el=n.createElement(y.tag.tag),u(y),h[_]=h[_]||n.createDocumentFragment(),h[_].appendChild(y.$el)}for(const y of p)await t.hooks.callHook("dom:renderTag",y,n,c);h.head&&n.head.appendChild(h.head),h.bodyOpen&&n.body.insertBefore(h.bodyOpen,n.body.firstChild),h.bodyClose&&n.body.appendChild(h.bodyClose);for(const y in a.pendingSideEffects)a.pendingSideEffects[y]();t._dom=a,await t.hooks.callHook("dom:rendered",{renders:p}),i()}).finally(()=>{t._domUpdatePromise=void 0,t.dirty=!1})),t._domUpdatePromise}function Pk(t={}){const e=t.domOptions?.render||uh;t.document=t.document||(typeof window<"u"?document:void 0);const n=t.document?.head.querySelector('script[id="unhead:payload"]')?.innerHTML||!1;return fk({...t,plugins:[...t.plugins||[],{key:"client",hooks:{"entries:updated":e}}],init:[n?JSON.parse(n):!1,...t.init||[]]})}function xk(t,e){let n=0;return()=>{const s=++n;e(()=>{n===s&&t()})}}function Mk(t={}){const e=Pk({domOptions:{render:xk(()=>uh(e),n=>setTimeout(n,0))},...t});return e.install=mk(e),e}const Dk={disableDefaults:!0},Nk=cn({name:"nuxt:head",enforce:"pre",setup(t){const e=Mk(Dk);t.vueApp.use(e);{let n=!0;const s=async()=>{n=!1,await uh(e)};e.hooks.hook("dom:beforeRender",i=>{i.shouldRender=!n}),t.hooks.hook("page:start",()=>{n=!0}),t.hooks.hook("page:finish",()=>{t.isHydrating||s()}),t.hooks.hook("app:error",s),t.hooks.hook("app:suspense:resolve",s)}}}),Ok=async t=>{let e,n;const s=([e,n]=Uv(()=>ch({path:t.path})),e=await e,n(),e);if(s.redirect)return Ir(s.redirect,{acceptRelative:!0})?(window.location.href=s.redirect,!1):s.redirect},Vk=[Ok];function nu(t){const e=t&&typeof t=="object"?t:{};typeof t=="object"&&(t=Vv({pathname:t.path||"",search:Pv(t.query||{}),hash:t.hash||""}));const n=new URL(t.toString(),window.location.href);return{path:n.pathname,fullPath:t,query:th(n.search),hash:n.hash,params:e.params||{},name:void 0,matched:e.matched||[],redirectedFrom:void 0,meta:e.meta||{},href:t}}const Lk=cn({name:"nuxt:router",enforce:"pre",setup(t){const e=VI(window.location.pathname,fr().app.baseURL)+window.location.search+window.location.hash,n=[],s={"navigate:before":[],"resolve:before":[],"navigate:after":[],error:[]},i=(h,p)=>(s[h].push(p),()=>s[h].splice(s[h].indexOf(p),1)),r=fr().app.baseURL,o=vn(nu(e));async function a(h,p){try{const y=nu(h);for(const _ of s["navigate:before"]){const I=await _(y,o);if(I===!1||I instanceof Error)return;if(typeof I=="string"&&I.length)return a(I,!0)}for(const _ of s["resolve:before"])await _(y,o);Object.assign(o,y),window.history[p?"replaceState":"pushState"]({},"",Ql(r,y.fullPath)),t.isHydrating||await t.runWithContext(NE);for(const _ of s["navigate:after"])await _(y,o)}catch(y){for(const _ of s.error)await _(y)}}const u={currentRoute:xe(()=>o),isReady:()=>Promise.resolve(),options:{},install:()=>Promise.resolve(),push:h=>a(h,!1),replace:h=>a(h,!0),back:()=>window.history.go(-1),go:h=>window.history.go(h),forward:()=>window.history.go(1),beforeResolve:h=>i("resolve:before",h),beforeEach:h=>i("navigate:before",h),afterEach:h=>i("navigate:after",h),onError:h=>i("error",h),resolve:nu,addRoute:(h,p)=>{n.push(p)},getRoutes:()=>n,hasRoute:h=>n.some(p=>p.name===h),removeRoute:h=>{const p=n.findIndex(y=>y.name===h);p!==-1&&n.splice(p,1)}};t.vueApp.component("RouterLink",ct({functional:!0,props:{to:{type:String,required:!0},custom:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:String},setup:(h,{slots:p})=>{const y=()=>a(h.to,h.replace);return()=>{const _=u.resolve(h.to);return h.custom?p.default?.({href:h.to,navigate:y,route:_}):Lu("a",{href:h.to,onClick:I=>(I.preventDefault(),y())},p)}}})),window.addEventListener("popstate",h=>{const p=h.target.location;u.replace(p.href.replace(p.origin,""))}),t._route=o,t._middleware||={global:[],named:{}};const d=t.payload.state._layout;return t.hooks.hookOnce("app:created",async()=>{u.beforeEach(async(h,p)=>{h.meta=vn(h.meta||{}),t.isHydrating&&d&&!os(h.meta.layout)&&(h.meta.layout=d),t._processingMiddleware=!0;{const y=new Set([...Vk,...t._middleware.global]);{const _=await t.runWithContext(()=>ch({path:h.path}));if(_.appMiddleware)for(const I in _.appMiddleware){const k=t._middleware.named[I];if(!k)return;_.appMiddleware[I]?y.add(k):y.delete(k)}}for(const _ of y){const I=await t.runWithContext(()=>_(h,p));if(I!==!0&&(I||I===!1))return I}}}),u.afterEach(()=>{delete t._processingMiddleware}),await u.replace(e),FI(o.fullPath,e)||await t.runWithContext(()=>xE(o.fullPath))}),{provide:{route:o,router:u}}}}),lm=globalThis.requestIdleCallback||(t=>{const e=Date.now(),n={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-e))};return setTimeout(()=>{t(n)},1)}),UL=globalThis.cancelIdleCallback||(t=>{clearTimeout(t)}),dh=t=>{const e=pt();e.isHydrating?e.hooks.hookOnce("app:suspense:resolve",()=>{lm(()=>t())}):lm(()=>t())},Fk=cn({name:"nuxt:payload",setup(t){const e=new Set;Bs().beforeResolve(async(n,s)=>{if(n.path===s.path)return;const i=await am(n.path);if(i){for(const r of e)delete t.static.data[r];for(const r in i.data)r in t.static.data||e.add(r),t.static.data[r]=i.data[r]}}),dh(()=>{t.hooks.hook("link:prefetch",async n=>{const{hostname:s}=new URL(n,window.location.href);s===window.location.hostname&&await am(n).catch(()=>{console.warn("[nuxt] Error preloading payload for",n)})}),navigator.connection?.effectiveType!=="slow-2g"&&setTimeout(Yl,1e3)})}}),$k=cn(()=>{const t=Bs();dh(()=>{t.beforeResolve(async()=>{await new Promise(e=>{setTimeout(e,100),requestAnimationFrame(()=>{setTimeout(e,0)})})})})}),Uk=cn(t=>{let e;async function n(){const s=await Yl();e&&clearTimeout(e),e=setTimeout(n,Kp);try{const i=await $fetch(ih("builds/latest.json")+`?${Date.now()}`);i.id!==s.id&&t.hooks.callHook("app:manifest:update",i)}catch{}}dh(()=>{e=setTimeout(n,Kp)})});function jk(t={}){const e=t.path||window.location.pathname;let n={};try{n=dl(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(t.force||n?.path!==e||n?.expires<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:e,expires:Date.now()+(t.ttl??1e4)}))}catch{}if(t.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:pt().payload.state}))}catch{}window.location.pathname!==e?window.location.href=e:window.location.reload()}}const Bk=cn({name:"nuxt:chunk-reload",setup(t){const e=Bs(),n=fr(),s=new Set;e.beforeEach(()=>{s.clear()}),t.hook("app:chunkError",({error:r})=>{s.add(r)});function i(r){const o=Ql(n.app.baseURL,r.fullPath);jk({path:o,persistState:!0})}t.hook("app:manifest:update",()=>{e.beforeResolve(i)}),e.onError((r,o)=>{s.has(r)&&i(o)})}}),zk="$s";function Hk(...t){const e=typeof t[t.length-1]=="string"?t.pop():void 0;typeof t[0]!="string"&&t.unshift(e);const[n,s]=t;if(!n||typeof n!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+n);if(s!==void 0&&typeof s!="function")throw new Error("[nuxt] [useState] init must be a function: "+s);const i=zk+n,r=pt(),o=My(r.payload.state,i);if(o.value===void 0&&s){const a=s();if(at(a))return r.payload.state[i]=a,a;o.value=a}return o}const Wk={nuxt:{},ui:{colors:{primary:"green",secondary:"blue",success:"green",info:"blue",warning:"yellow",error:"red",neutral:"slate"},icons:{arrowLeft:"i-lucide-arrow-left",arrowRight:"i-lucide-arrow-right",check:"i-lucide-check",chevronDoubleLeft:"i-lucide-chevrons-left",chevronDoubleRight:"i-lucide-chevrons-right",chevronDown:"i-lucide-chevron-down",chevronLeft:"i-lucide-chevron-left",chevronRight:"i-lucide-chevron-right",chevronUp:"i-lucide-chevron-up",close:"i-lucide-x",ellipsis:"i-lucide-ellipsis",external:"i-lucide-arrow-up-right",file:"i-lucide-file",folder:"i-lucide-folder",folderOpen:"i-lucide-folder-open",loading:"i-lucide-loader-circle",minus:"i-lucide-minus",plus:"i-lucide-plus",search:"i-lucide-search",upload:"i-lucide-upload"}},icon:{provider:"iconify",class:"",aliases:{},iconifyApiEndpoint:"https://api.iconify.design",localApiEndpoint:"/api/_nuxt_icon",fallbackToApi:!0,cssSelectorPrefix:"i-",cssWherePseudo:!0,cssLayer:"components",mode:"css",attrs:{"aria-hidden":!0},collections:["academicons","akar-icons","ant-design","arcticons","basil","bi","bitcoin-icons","bpmn","brandico","bx","bxl","bxs","bytesize","carbon","catppuccin","cbi","charm","ci","cib","cif","cil","circle-flags","circum","clarity","codicon","covid","cryptocurrency","cryptocurrency-color","dashicons","devicon","devicon-plain","ei","el","emojione","emojione-monotone","emojione-v1","entypo","entypo-social","eos-icons","ep","et","eva","f7","fa","fa-brands","fa-regular","fa-solid","fa6-brands","fa6-regular","fa6-solid","fad","fe","feather","file-icons","flag","flagpack","flat-color-icons","flat-ui","flowbite","fluent","fluent-emoji","fluent-emoji-flat","fluent-emoji-high-contrast","fluent-mdl2","fontelico","fontisto","formkit","foundation","fxemoji","gala","game-icons","geo","gg","gis","gravity-ui","gridicons","grommet-icons","guidance","healthicons","heroicons","heroicons-outline","heroicons-solid","hugeicons","humbleicons","ic","icomoon-free","icon-park","icon-park-outline","icon-park-solid","icon-park-twotone","iconamoon","iconoir","icons8","il","ion","iwwa","jam","la","lets-icons","line-md","logos","ls","lucide","lucide-lab","mage","majesticons","maki","map","marketeq","material-symbols","material-symbols-light","mdi","mdi-light","medical-icon","memory","meteocons","mi","mingcute","mono-icons","mynaui","nimbus","nonicons","noto","noto-v1","octicon","oi","ooui","openmoji","oui","pajamas","pepicons","pepicons-pencil","pepicons-pop","pepicons-print","ph","pixelarticons","prime","ps","quill","radix-icons","raphael","ri","rivet-icons","si-glyph","simple-icons","simple-line-icons","skill-icons","solar","streamline","streamline-emojis","subway","svg-spinners","system-uicons","tabler","tdesign","teenyicons","token","token-branded","topcoat","twemoji","typcn","uil","uim","uis","uit","uiw","unjs","vaadin","vs","vscode-icons","websymbol","weui","whh","wi","wpf","zmdi","zondicons"],fetchTimeout:1500}},qk=kE(Wk);function a_(){const t=pt();return t._appConfig||=vn(qk),t._appConfig}const Kk=cn({name:"pinia",setup(t){const e=VE();return t.vueApp.use(e),Uo(e),t.payload&&t.payload.pinia&&(e.state.value=t.payload.pinia),{provide:{pinia:e}}}}),Gk=Ru(()=>Yu(()=>import("./DuJN7PQp.js"),[],import.meta.url).then(t=>t.default||t.default||t)),Qk=[["Icon",Gk]],Yk=cn({name:"nuxt:global-components",setup(t){for(const[e,n]of Qk)t.vueApp.component(e,n),t.vueApp.component("Lazy"+e,n)}});var Ea={inherit:"inherit",current:"currentcolor",transparent:"transparent",black:"#000",white:"#fff",slate:{50:"oklch(98.4% 0.003 247.858)",100:"oklch(96.8% 0.007 247.896)",200:"oklch(92.9% 0.013 255.508)",300:"oklch(86.9% 0.022 252.894)",400:"oklch(70.4% 0.04 256.788)",500:"oklch(55.4% 0.046 257.417)",600:"oklch(44.6% 0.043 257.281)",700:"oklch(37.2% 0.044 257.287)",800:"oklch(27.9% 0.041 260.031)",900:"oklch(20.8% 0.042 265.755)",950:"oklch(12.9% 0.042 264.695)"},gray:{50:"oklch(98.5% 0.002 247.839)",100:"oklch(96.7% 0.003 264.542)",200:"oklch(92.8% 0.006 264.531)",300:"oklch(87.2% 0.01 258.338)",400:"oklch(70.7% 0.022 261.325)",500:"oklch(55.1% 0.027 264.364)",600:"oklch(44.6% 0.03 256.802)",700:"oklch(37.3% 0.034 259.733)",800:"oklch(27.8% 0.033 256.848)",900:"oklch(21% 0.034 264.665)",950:"oklch(13% 0.028 261.692)"},zinc:{50:"oklch(98.5% 0 0)",100:"oklch(96.7% 0.001 286.375)",200:"oklch(92% 0.004 286.32)",300:"oklch(87.1% 0.006 286.286)",400:"oklch(70.5% 0.015 286.067)",500:"oklch(55.2% 0.016 285.938)",600:"oklch(44.2% 0.017 285.786)",700:"oklch(37% 0.013 285.805)",800:"oklch(27.4% 0.006 286.033)",900:"oklch(21% 0.006 285.885)",950:"oklch(14.1% 0.005 285.823)"},neutral:{50:"oklch(98.5% 0 0)",100:"oklch(97% 0 0)",200:"oklch(92.2% 0 0)",300:"oklch(87% 0 0)",400:"oklch(70.8% 0 0)",500:"oklch(55.6% 0 0)",600:"oklch(43.9% 0 0)",700:"oklch(37.1% 0 0)",800:"oklch(26.9% 0 0)",900:"oklch(20.5% 0 0)",950:"oklch(14.5% 0 0)"},stone:{50:"oklch(98.5% 0.001 106.423)",100:"oklch(97% 0.001 106.424)",200:"oklch(92.3% 0.003 48.717)",300:"oklch(86.9% 0.005 56.366)",400:"oklch(70.9% 0.01 56.259)",500:"oklch(55.3% 0.013 58.071)",600:"oklch(44.4% 0.011 73.639)",700:"oklch(37.4% 0.01 67.558)",800:"oklch(26.8% 0.007 34.298)",900:"oklch(21.6% 0.006 56.043)",950:"oklch(14.7% 0.004 49.25)"},red:{50:"oklch(97.1% 0.013 17.38)",100:"oklch(93.6% 0.032 17.717)",200:"oklch(88.5% 0.062 18.334)",300:"oklch(80.8% 0.114 19.571)",400:"oklch(70.4% 0.191 22.216)",500:"oklch(63.7% 0.237 25.331)",600:"oklch(57.7% 0.245 27.325)",700:"oklch(50.5% 0.213 27.518)",800:"oklch(44.4% 0.177 26.899)",900:"oklch(39.6% 0.141 25.723)",950:"oklch(25.8% 0.092 26.042)"},orange:{50:"oklch(98% 0.016 73.684)",100:"oklch(95.4% 0.038 75.164)",200:"oklch(90.1% 0.076 70.697)",300:"oklch(83.7% 0.128 66.29)",400:"oklch(75% 0.183 55.934)",500:"oklch(70.5% 0.213 47.604)",600:"oklch(64.6% 0.222 41.116)",700:"oklch(55.3% 0.195 38.402)",800:"oklch(47% 0.157 37.304)",900:"oklch(40.8% 0.123 38.172)",950:"oklch(26.6% 0.079 36.259)"},amber:{50:"oklch(98.7% 0.022 95.277)",100:"oklch(96.2% 0.059 95.617)",200:"oklch(92.4% 0.12 95.746)",300:"oklch(87.9% 0.169 91.605)",400:"oklch(82.8% 0.189 84.429)",500:"oklch(76.9% 0.188 70.08)",600:"oklch(66.6% 0.179 58.318)",700:"oklch(55.5% 0.163 48.998)",800:"oklch(47.3% 0.137 46.201)",900:"oklch(41.4% 0.112 45.904)",950:"oklch(27.9% 0.077 45.635)"},yellow:{50:"oklch(98.7% 0.026 102.212)",100:"oklch(97.3% 0.071 103.193)",200:"oklch(94.5% 0.129 101.54)",300:"oklch(90.5% 0.182 98.111)",400:"oklch(85.2% 0.199 91.936)",500:"oklch(79.5% 0.184 86.047)",600:"oklch(68.1% 0.162 75.834)",700:"oklch(55.4% 0.135 66.442)",800:"oklch(47.6% 0.114 61.907)",900:"oklch(42.1% 0.095 57.708)",950:"oklch(28.6% 0.066 53.813)"},lime:{50:"oklch(98.6% 0.031 120.757)",100:"oklch(96.7% 0.067 122.328)",200:"oklch(93.8% 0.127 124.321)",300:"oklch(89.7% 0.196 126.665)",400:"oklch(84.1% 0.238 128.85)",500:"oklch(76.8% 0.233 130.85)",600:"oklch(64.8% 0.2 131.684)",700:"oklch(53.2% 0.157 131.589)",800:"oklch(45.3% 0.124 130.933)",900:"oklch(40.5% 0.101 131.063)",950:"oklch(27.4% 0.072 132.109)"},green:{50:"oklch(98.2% 0.018 155.826)",100:"oklch(96.2% 0.044 156.743)",200:"oklch(92.5% 0.084 155.995)",300:"oklch(87.1% 0.15 154.449)",400:"oklch(79.2% 0.209 151.711)",500:"oklch(72.3% 0.219 149.579)",600:"oklch(62.7% 0.194 149.214)",700:"oklch(52.7% 0.154 150.069)",800:"oklch(44.8% 0.119 151.328)",900:"oklch(39.3% 0.095 152.535)",950:"oklch(26.6% 0.065 152.934)"},emerald:{50:"oklch(97.9% 0.021 166.113)",100:"oklch(95% 0.052 163.051)",200:"oklch(90.5% 0.093 164.15)",300:"oklch(84.5% 0.143 164.978)",400:"oklch(76.5% 0.177 163.223)",500:"oklch(69.6% 0.17 162.48)",600:"oklch(59.6% 0.145 163.225)",700:"oklch(50.8% 0.118 165.612)",800:"oklch(43.2% 0.095 166.913)",900:"oklch(37.8% 0.077 168.94)",950:"oklch(26.2% 0.051 172.552)"},teal:{50:"oklch(98.4% 0.014 180.72)",100:"oklch(95.3% 0.051 180.801)",200:"oklch(91% 0.096 180.426)",300:"oklch(85.5% 0.138 181.071)",400:"oklch(77.7% 0.152 181.912)",500:"oklch(70.4% 0.14 182.503)",600:"oklch(60% 0.118 184.704)",700:"oklch(51.1% 0.096 186.391)",800:"oklch(43.7% 0.078 188.216)",900:"oklch(38.6% 0.063 188.416)",950:"oklch(27.7% 0.046 192.524)"},cyan:{50:"oklch(98.4% 0.019 200.873)",100:"oklch(95.6% 0.045 203.388)",200:"oklch(91.7% 0.08 205.041)",300:"oklch(86.5% 0.127 207.078)",400:"oklch(78.9% 0.154 211.53)",500:"oklch(71.5% 0.143 215.221)",600:"oklch(60.9% 0.126 221.723)",700:"oklch(52% 0.105 223.128)",800:"oklch(45% 0.085 224.283)",900:"oklch(39.8% 0.07 227.392)",950:"oklch(30.2% 0.056 229.695)"},sky:{50:"oklch(97.7% 0.013 236.62)",100:"oklch(95.1% 0.026 236.824)",200:"oklch(90.1% 0.058 230.902)",300:"oklch(82.8% 0.111 230.318)",400:"oklch(74.6% 0.16 232.661)",500:"oklch(68.5% 0.169 237.323)",600:"oklch(58.8% 0.158 241.966)",700:"oklch(50% 0.134 242.749)",800:"oklch(44.3% 0.11 240.79)",900:"oklch(39.1% 0.09 240.876)",950:"oklch(29.3% 0.066 243.157)"},blue:{50:"oklch(97% 0.014 254.604)",100:"oklch(93.2% 0.032 255.585)",200:"oklch(88.2% 0.059 254.128)",300:"oklch(80.9% 0.105 251.813)",400:"oklch(70.7% 0.165 254.624)",500:"oklch(62.3% 0.214 259.815)",600:"oklch(54.6% 0.245 262.881)",700:"oklch(48.8% 0.243 264.376)",800:"oklch(42.4% 0.199 265.638)",900:"oklch(37.9% 0.146 265.522)",950:"oklch(28.2% 0.091 267.935)"},indigo:{50:"oklch(96.2% 0.018 272.314)",100:"oklch(93% 0.034 272.788)",200:"oklch(87% 0.065 274.039)",300:"oklch(78.5% 0.115 274.713)",400:"oklch(67.3% 0.182 276.935)",500:"oklch(58.5% 0.233 277.117)",600:"oklch(51.1% 0.262 276.966)",700:"oklch(45.7% 0.24 277.023)",800:"oklch(39.8% 0.195 277.366)",900:"oklch(35.9% 0.144 278.697)",950:"oklch(25.7% 0.09 281.288)"},violet:{50:"oklch(96.9% 0.016 293.756)",100:"oklch(94.3% 0.029 294.588)",200:"oklch(89.4% 0.057 293.283)",300:"oklch(81.1% 0.111 293.571)",400:"oklch(70.2% 0.183 293.541)",500:"oklch(60.6% 0.25 292.717)",600:"oklch(54.1% 0.281 293.009)",700:"oklch(49.1% 0.27 292.581)",800:"oklch(43.2% 0.232 292.759)",900:"oklch(38% 0.189 293.745)",950:"oklch(28.3% 0.141 291.089)"},purple:{50:"oklch(97.7% 0.014 308.299)",100:"oklch(94.6% 0.033 307.174)",200:"oklch(90.2% 0.063 306.703)",300:"oklch(82.7% 0.119 306.383)",400:"oklch(71.4% 0.203 305.504)",500:"oklch(62.7% 0.265 303.9)",600:"oklch(55.8% 0.288 302.321)",700:"oklch(49.6% 0.265 301.924)",800:"oklch(43.8% 0.218 303.724)",900:"oklch(38.1% 0.176 304.987)",950:"oklch(29.1% 0.149 302.717)"},fuchsia:{50:"oklch(97.7% 0.017 320.058)",100:"oklch(95.2% 0.037 318.852)",200:"oklch(90.3% 0.076 319.62)",300:"oklch(83.3% 0.145 321.434)",400:"oklch(74% 0.238 322.16)",500:"oklch(66.7% 0.295 322.15)",600:"oklch(59.1% 0.293 322.896)",700:"oklch(51.8% 0.253 323.949)",800:"oklch(45.2% 0.211 324.591)",900:"oklch(40.1% 0.17 325.612)",950:"oklch(29.3% 0.136 325.661)"},pink:{50:"oklch(97.1% 0.014 343.198)",100:"oklch(94.8% 0.028 342.258)",200:"oklch(89.9% 0.061 343.231)",300:"oklch(82.3% 0.12 346.018)",400:"oklch(71.8% 0.202 349.761)",500:"oklch(65.6% 0.241 354.308)",600:"oklch(59.2% 0.249 0.584)",700:"oklch(52.5% 0.223 3.958)",800:"oklch(45.9% 0.187 3.815)",900:"oklch(40.8% 0.153 2.432)",950:"oklch(28.4% 0.109 3.907)"},rose:{50:"oklch(96.9% 0.015 12.422)",100:"oklch(94.1% 0.03 12.58)",200:"oklch(89.2% 0.058 10.001)",300:"oklch(81% 0.117 11.638)",400:"oklch(71.2% 0.194 13.428)",500:"oklch(64.5% 0.246 16.439)",600:"oklch(58.6% 0.253 17.585)",700:"oklch(51.4% 0.222 16.935)",800:"oklch(45.5% 0.188 13.697)",900:"oklch(41% 0.159 10.272)",950:"oklch(27.1% 0.105 12.094)"}};const Jk=[50,100,200,300,400,500,600,700,800,900,950];function Xk(t,e){return t in Ea&&typeof Ea[t]=="object"&&e in Ea[t]?Ea[t][e]:""}function Zk(t,e){return`${Jk.map(n=>`--ui-color-${t}-${n}: var(--color-${e==="neutral"?"old-neutral":e}-${n}, ${Xk(e,n)});`).join(`
  `)}`}function cm(t,e){return`--ui-${t}: var(--ui-color-${t}-${e});`}const eA=cn(()=>{const t=a_(),e=pt(),n=xe(()=>{const{neutral:i,...r}=t.ui.colors;return`@layer base {
  :root {
  ${Object.entries(t.ui.colors).map(([o,a])=>Zk(o,a)).join(`
  `)}
  }
  :root, .light {
  ${Object.keys(r).map(o=>cm(o,500)).join(`
  `)}
  }
  .dark {
  ${Object.keys(r).map(o=>cm(o,400)).join(`
  `)}
  }
}`}),s={style:[{innerHTML:()=>n.value,tagPriority:-2,id:"nuxt-ui-colors"}]};if(e.isHydrating&&!e.payload.serverRendered){const i=document.createElement("style");i.innerHTML=n.value,i.setAttribute("data-nuxt-ui-colors",""),document.head.appendChild(i),s.script=[{innerHTML:"document.head.removeChild(document.querySelector('[data-nuxt-ui-colors]'))"}]}wk(s)}),tA="__NUXT_COLOR_MODE__",su="nuxt-color-mode",nA="localStorage",Kn=window[tA]||{},sA=cn(t=>{const e=Hk("color-mode",()=>vn({preference:Kn.preference,value:Kn.value,unknown:!1,forced:!1})).value;Bs().afterEach(r=>{const o=r.meta.colorMode;o&&o!=="system"?(e.value=o,e.forced=!0):(o==="system"&&console.warn("You cannot force the colorMode to system at the page level."),e.forced=!1,e.value=e.preference==="system"?Kn.getColorScheme():e.preference)});let n;function s(){n||!window.matchMedia||(n=window.matchMedia("(prefers-color-scheme: dark)"),n.addEventListener("change",()=>{!e.forced&&e.preference==="system"&&(e.value=Kn.getColorScheme())}))}function i(r,o){switch(r){case"cookie":window.document.cookie=su+"="+o;break;case"sessionStorage":window.sessionStorage?.setItem(su,o);break;case"localStorage":default:window.localStorage?.setItem(su,o)}}an(()=>e.preference,r=>{e.forced||(r==="system"?(e.value=Kn.getColorScheme(),s()):e.value=r,i(nA,r))},{immediate:!0}),an(()=>e.value,(r,o)=>{let a;a=window.document.createElement("style"),a.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),window.document.head.appendChild(a),Kn.removeColorScheme(o),Kn.addColorScheme(r),window.getComputedStyle(a).opacity,document.head.removeChild(a)}),e.preference==="system"&&s(),t.hook("app:mounted",()=>{e.unknown&&(e.preference=Kn.preference,e.value=Kn.value,e.unknown=!1)}),t.provide("colorMode",e)}),l_=/^[a-z0-9]+(-[a-z0-9]+)*$/,jo=(t,e,n,s="")=>{const i=t.split(":");if(t.slice(0,1)==="@"){if(i.length<2||i.length>3)return null;s=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){const a=i.pop(),c=i.pop(),u={provider:i.length>0?i[0]:s,prefix:c,name:a};return e&&!Fa(u)?null:u}const r=i[0],o=r.split("-");if(o.length>1){const a={provider:s,prefix:o.shift(),name:o.join("-")};return e&&!Fa(a)?null:a}if(n&&s===""){const a={provider:s,prefix:"",name:r};return e&&!Fa(a,n)?null:a}return null},Fa=(t,e)=>t?!!((e&&t.prefix===""||t.prefix)&&t.name):!1,c_=Object.freeze({left:0,top:0,width:16,height:16}),gl=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),Er=Object.freeze({...c_,...gl}),Ju=Object.freeze({...Er,body:"",hidden:!1});function iA(t,e){const n={};!t.hFlip!=!e.hFlip&&(n.hFlip=!0),!t.vFlip!=!e.vFlip&&(n.vFlip=!0);const s=((t.rotate||0)+(e.rotate||0))%4;return s&&(n.rotate=s),n}function um(t,e){const n=iA(t,e);for(const s in Ju)s in gl?s in t&&!(s in n)&&(n[s]=gl[s]):s in e?n[s]=e[s]:s in t&&(n[s]=t[s]);return n}function rA(t,e){const n=t.icons,s=t.aliases||Object.create(null),i=Object.create(null);function r(o){if(n[o])return i[o]=[];if(!(o in i)){i[o]=null;const a=s[o]&&s[o].parent,c=a&&r(a);c&&(i[o]=[a].concat(c))}return i[o]}return Object.keys(n).concat(Object.keys(s)).forEach(r),i}function oA(t,e,n){const s=t.icons,i=t.aliases||Object.create(null);let r={};function o(a){r=um(s[a]||i[a],r)}return o(e),n.forEach(o),um(t,r)}function u_(t,e){const n=[];if(typeof t!="object"||typeof t.icons!="object")return n;t.not_found instanceof Array&&t.not_found.forEach(i=>{e(i,null),n.push(i)});const s=rA(t);for(const i in s){const r=s[i];r&&(e(i,oA(t,i,r)),n.push(i))}return n}const aA={provider:"",aliases:{},not_found:{},...c_};function iu(t,e){for(const n in e)if(n in t&&typeof t[n]!=typeof e[n])return!1;return!0}function d_(t){if(typeof t!="object"||t===null)return null;const e=t;if(typeof e.prefix!="string"||!t.icons||typeof t.icons!="object"||!iu(t,aA))return null;const n=e.icons;for(const i in n){const r=n[i];if(!i||typeof r.body!="string"||!iu(r,Ju))return null}const s=e.aliases||Object.create(null);for(const i in s){const r=s[i],o=r.parent;if(!i||typeof o!="string"||!n[o]&&!s[o]||!iu(r,Ju))return null}return e}const dm=Object.create(null);function lA(t,e){return{provider:t,prefix:e,icons:Object.create(null),missing:new Set}}function Ii(t,e){const n=dm[t]||(dm[t]=Object.create(null));return n[e]||(n[e]=lA(t,e))}function h_(t,e){return d_(e)?u_(e,(n,s)=>{s?t.icons[n]=s:t.missing.add(n)}):[]}function cA(t,e,n){try{if(typeof n.body=="string")return t.icons[e]={...n},!0}catch{}return!1}let Eo=!1;function f_(t){return typeof t=="boolean"&&(Eo=t),Eo}function hh(t){const e=typeof t=="string"?jo(t,!0,Eo):t;if(e){const n=Ii(e.provider,e.prefix),s=e.name;return n.icons[s]||(n.missing.has(s)?null:void 0)}}function uA(t,e){const n=jo(t,!0,Eo);if(!n)return!1;const s=Ii(n.provider,n.prefix);return e?cA(s,n.name,e):(s.missing.add(n.name),!0)}function dA(t,e){if(typeof t!="object")return!1;if(typeof e!="string"&&(e=t.provider||""),Eo&&!e&&!t.prefix){let i=!1;return d_(t)&&(t.prefix="",u_(t,(r,o)=>{uA(r,o)&&(i=!0)})),i}const n=t.prefix;if(!Fa({prefix:n,name:"a"}))return!1;const s=Ii(e,n);return!!h_(s,t)}function jL(t){const e=hh(t);return e&&{...Er,...e}}const p_=Object.freeze({width:null,height:null}),m_=Object.freeze({...p_,...gl}),hA=/(-?[0-9.]*[0-9]+[0-9.]*)/g,fA=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function hm(t,e,n){if(e===1)return t;if(n=n||100,typeof t=="number")return Math.ceil(t*e*n)/n;if(typeof t!="string")return t;const s=t.split(hA);if(s===null||!s.length)return t;const i=[];let r=s.shift(),o=fA.test(r);for(;;){if(o){const a=parseFloat(r);isNaN(a)?i.push(r):i.push(Math.ceil(a*e*n)/n)}else i.push(r);if(r=s.shift(),r===void 0)return i.join("");o=!o}}function pA(t,e="defs"){let n="";const s=t.indexOf("<"+e);for(;s>=0;){const i=t.indexOf(">",s),r=t.indexOf("</"+e);if(i===-1||r===-1)break;const o=t.indexOf(">",r);if(o===-1)break;n+=t.slice(i+1,r).trim(),t=t.slice(0,s).trim()+t.slice(o+1)}return{defs:n,content:t}}function mA(t,e){return t?"<defs>"+t+"</defs>"+e:e}function gA(t,e,n){const s=pA(t);return mA(s.defs,e+s.content+n)}const yA=t=>t==="unset"||t==="undefined"||t==="none";function vA(t,e){const n={...Er,...t},s={...m_,...e},i={left:n.left,top:n.top,width:n.width,height:n.height};let r=n.body;[n,s].forEach(I=>{const k=[],N=I.hFlip,L=I.vFlip;let R=I.rotate;N?L?R+=2:(k.push("translate("+(i.width+i.left).toString()+" "+(0-i.top).toString()+")"),k.push("scale(-1 1)"),i.top=i.left=0):L&&(k.push("translate("+(0-i.left).toString()+" "+(i.height+i.top).toString()+")"),k.push("scale(1 -1)"),i.top=i.left=0);let C;switch(R<0&&(R-=Math.floor(R/4)*4),R=R%4,R){case 1:C=i.height/2+i.top,k.unshift("rotate(90 "+C.toString()+" "+C.toString()+")");break;case 2:k.unshift("rotate(180 "+(i.width/2+i.left).toString()+" "+(i.height/2+i.top).toString()+")");break;case 3:C=i.width/2+i.left,k.unshift("rotate(-90 "+C.toString()+" "+C.toString()+")");break}R%2===1&&(i.left!==i.top&&(C=i.left,i.left=i.top,i.top=C),i.width!==i.height&&(C=i.width,i.width=i.height,i.height=C)),k.length&&(r=gA(r,'<g transform="'+k.join(" ")+'">',"</g>"))});const o=s.width,a=s.height,c=i.width,u=i.height;let d,h;o===null?(h=a===null?"1em":a==="auto"?u:a,d=hm(h,c/u)):(d=o==="auto"?c:o,h=a===null?hm(d,u/c):a==="auto"?u:a);const p={},y=(I,k)=>{yA(k)||(p[I]=k.toString())};y("width",d),y("height",h);const _=[i.left,i.top,c,u];return p.viewBox=_.join(" "),{attributes:p,viewBox:_,body:r}}const _A=/\sid="(\S+)"/g,wA="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let bA=0;function TA(t,e=wA){const n=[];let s;for(;s=_A.exec(t);)n.push(s[1]);if(!n.length)return t;const i="suffix"+(Math.random()*16777216|Date.now()).toString(16);return n.forEach(r=>{const o=typeof e=="function"?e(r):e+(bA++).toString(),a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+o+i+"$3")}),t=t.replace(new RegExp(i,"g"),""),t}const Xu=Object.create(null);function g_(t,e){Xu[t]=e}function Zu(t){return Xu[t]||Xu[""]}function fh(t){let e;if(typeof t.resources=="string")e=[t.resources];else if(e=t.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:t.path||"/",maxURL:t.maxURL||500,rotate:t.rotate||750,timeout:t.timeout||5e3,random:t.random===!0,index:t.index||0,dataAfterTimeout:t.dataAfterTimeout!==!1}}const Jl=Object.create(null),Kr=["https://api.simplesvg.com","https://api.unisvg.com"],$a=[];for(;Kr.length>0;)Kr.length===1||Math.random()>.5?$a.push(Kr.shift()):$a.push(Kr.pop());Jl[""]=fh({resources:["https://api.iconify.design"].concat($a)});function y_(t,e){const n=fh(e);return n===null?!1:(Jl[t]=n,!0)}function Xl(t){return Jl[t]}function IA(){return Object.keys(Jl)}const EA=()=>{let t;try{if(t=fetch,typeof t=="function")return t}catch{}};let yl=EA();function kA(t){yl=t}function AA(){return yl}function SA(t,e){const n=Xl(t);if(!n)return 0;let s;if(!n.maxURL)s=0;else{let i=0;n.resources.forEach(o=>{i=Math.max(i,o.length)});const r=e+".json?icons=";s=n.maxURL-i-n.path.length-r.length}return s}function CA(t){return t===404}const RA=(t,e,n)=>{const s=[],i=SA(t,e),r="icons";let o={type:r,provider:t,prefix:e,icons:[]},a=0;return n.forEach((c,u)=>{a+=c.length+1,a>=i&&u>0&&(s.push(o),o={type:r,provider:t,prefix:e,icons:[]},a=c.length),o.icons.push(c)}),s.push(o),s};function PA(t){if(typeof t=="string"){const e=Xl(t);if(e)return e.path}return"/"}const xA=(t,e,n)=>{if(!yl){n("abort",424);return}let s=PA(e.provider);switch(e.type){case"icons":{const r=e.prefix,a=e.icons.join(","),c=new URLSearchParams({icons:a});s+=r+".json?"+c.toString();break}case"custom":{const r=e.uri;s+=r.slice(0,1)==="/"?r.slice(1):r;break}default:n("abort",400);return}let i=503;yl(t+s).then(r=>{const o=r.status;if(o!==200){setTimeout(()=>{n(CA(o)?"abort":"next",o)});return}return i=501,r.json()}).then(r=>{if(typeof r!="object"||r===null){setTimeout(()=>{r===404?n("abort",r):n("next",i)});return}setTimeout(()=>{n("success",r)})}).catch(()=>{n("next",i)})},MA={prepare:RA,send:xA};function DA(t){const e={loaded:[],missing:[],pending:[]},n=Object.create(null);t.sort((i,r)=>i.provider!==r.provider?i.provider.localeCompare(r.provider):i.prefix!==r.prefix?i.prefix.localeCompare(r.prefix):i.name.localeCompare(r.name));let s={provider:"",prefix:"",name:""};return t.forEach(i=>{if(s.name===i.name&&s.prefix===i.prefix&&s.provider===i.provider)return;s=i;const r=i.provider,o=i.prefix,a=i.name,c=n[r]||(n[r]=Object.create(null)),u=c[o]||(c[o]=Ii(r,o));let d;a in u.icons?d=e.loaded:o===""||u.missing.has(a)?d=e.missing:d=e.pending;const h={provider:r,prefix:o,name:a};d.push(h)}),e}function v_(t,e){t.forEach(n=>{const s=n.loaderCallbacks;s&&(n.loaderCallbacks=s.filter(i=>i.id!==e))})}function NA(t){t.pendingCallbacksFlag||(t.pendingCallbacksFlag=!0,setTimeout(()=>{t.pendingCallbacksFlag=!1;const e=t.loaderCallbacks?t.loaderCallbacks.slice(0):[];if(!e.length)return;let n=!1;const s=t.provider,i=t.prefix;e.forEach(r=>{const o=r.icons,a=o.pending.length;o.pending=o.pending.filter(c=>{if(c.prefix!==i)return!0;const u=c.name;if(t.icons[u])o.loaded.push({provider:s,prefix:i,name:u});else if(t.missing.has(u))o.missing.push({provider:s,prefix:i,name:u});else return n=!0,!0;return!1}),o.pending.length!==a&&(n||v_([t],r.id),r.callback(o.loaded.slice(0),o.missing.slice(0),o.pending.slice(0),r.abort))})}))}let OA=0;function VA(t,e,n){const s=OA++,i=v_.bind(null,n,s);if(!e.pending.length)return i;const r={id:s,icons:e,callback:t,abort:i};return n.forEach(o=>{(o.loaderCallbacks||(o.loaderCallbacks=[])).push(r)}),i}function LA(t,e=!0,n=!1){const s=[];return t.forEach(i=>{const r=typeof i=="string"?jo(i,e,n):i;r&&s.push(r)}),s}var FA={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function $A(t,e,n,s){const i=t.resources.length,r=t.random?Math.floor(Math.random()*i):t.index;let o;if(t.random){let O=t.resources.slice(0);for(o=[];O.length>1;){const b=Math.floor(Math.random()*O.length);o.push(O[b]),O=O.slice(0,b).concat(O.slice(b+1))}o=o.concat(O)}else o=t.resources.slice(r).concat(t.resources.slice(0,r));const a=Date.now();let c="pending",u=0,d,h=null,p=[],y=[];typeof s=="function"&&y.push(s);function _(){h&&(clearTimeout(h),h=null)}function I(){c==="pending"&&(c="aborted"),_(),p.forEach(O=>{O.status==="pending"&&(O.status="aborted")}),p=[]}function k(O,b){b&&(y=[]),typeof O=="function"&&y.push(O)}function N(){return{startTime:a,payload:e,status:c,queriesSent:u,queriesPending:p.length,subscribe:k,abort:I}}function L(){c="failed",y.forEach(O=>{O(void 0,d)})}function R(){p.forEach(O=>{O.status==="pending"&&(O.status="aborted")}),p=[]}function C(O,b,w){const T=b!=="success";switch(p=p.filter(A=>A!==O),c){case"pending":break;case"failed":if(T||!t.dataAfterTimeout)return;break;default:return}if(b==="abort"){d=w,L();return}if(T){d=w,p.length||(o.length?P():L());return}if(_(),R(),!t.random){const A=t.resources.indexOf(O.resource);A!==-1&&A!==t.index&&(t.index=A)}c="completed",y.forEach(A=>{A(w)})}function P(){if(c!=="pending")return;_();const O=o.shift();if(O===void 0){if(p.length){h=setTimeout(()=>{_(),c==="pending"&&(R(),L())},t.timeout);return}L();return}const b={status:"pending",resource:O,callback:(w,T)=>{C(b,w,T)}};p.push(b),u++,h=setTimeout(P,t.rotate),n(O,e,b.callback)}return setTimeout(P),N}function __(t){const e={...FA,...t};let n=[];function s(){n=n.filter(a=>a().status==="pending")}function i(a,c,u){const d=$A(e,a,c,(h,p)=>{s(),u&&u(h,p)});return n.push(d),d}function r(a){return n.find(c=>a(c))||null}return{query:i,find:r,setIndex:a=>{e.index=a},getIndex:()=>e.index,cleanup:s}}function fm(){}const ru=Object.create(null);function UA(t){if(!ru[t]){const e=Xl(t);if(!e)return;const n=__(e),s={config:e,redundancy:n};ru[t]=s}return ru[t]}function w_(t,e,n){let s,i;if(typeof t=="string"){const r=Zu(t);if(!r)return n(void 0,424),fm;i=r.send;const o=UA(t);o&&(s=o.redundancy)}else{const r=fh(t);if(r){s=__(r);const o=t.resources?t.resources[0]:"",a=Zu(o);a&&(i=a.send)}}return!s||!i?(n(void 0,424),fm):s.query(e,i,n)().abort}function pm(){}function jA(t){t.iconsLoaderFlag||(t.iconsLoaderFlag=!0,setTimeout(()=>{t.iconsLoaderFlag=!1,NA(t)}))}function BA(t){const e=[],n=[];return t.forEach(s=>{(s.match(l_)?e:n).push(s)}),{valid:e,invalid:n}}function Gr(t,e,n){function s(){const i=t.pendingIcons;e.forEach(r=>{i&&i.delete(r),t.icons[r]||t.missing.add(r)})}if(n&&typeof n=="object")try{if(!h_(t,n).length){s();return}}catch(i){console.error(i)}s(),jA(t)}function mm(t,e){t instanceof Promise?t.then(n=>{e(n)}).catch(()=>{e(null)}):e(t)}function zA(t,e){t.iconsToLoad?t.iconsToLoad=t.iconsToLoad.concat(e).sort():t.iconsToLoad=e,t.iconsQueueFlag||(t.iconsQueueFlag=!0,setTimeout(()=>{t.iconsQueueFlag=!1;const{provider:n,prefix:s}=t,i=t.iconsToLoad;if(delete t.iconsToLoad,!i||!i.length)return;const r=t.loadIcon;if(t.loadIcons&&(i.length>1||!r)){mm(t.loadIcons(i,s,n),d=>{Gr(t,i,d)});return}if(r){i.forEach(d=>{const h=r(d,s,n);mm(h,p=>{const y=p?{prefix:s,icons:{[d]:p}}:null;Gr(t,[d],y)})});return}const{valid:o,invalid:a}=BA(i);if(a.length&&Gr(t,a,null),!o.length)return;const c=s.match(l_)?Zu(n):null;if(!c){Gr(t,o,null);return}c.prepare(n,s,o).forEach(d=>{w_(n,d,h=>{Gr(t,d.icons,h)})})}))}const b_=(t,e)=>{const n=LA(t,!0,f_()),s=DA(n);if(!s.pending.length){let c=!0;return e&&setTimeout(()=>{c&&e(s.loaded,s.missing,s.pending,pm)}),()=>{c=!1}}const i=Object.create(null),r=[];let o,a;return s.pending.forEach(c=>{const{provider:u,prefix:d}=c;if(d===a&&u===o)return;o=u,a=d,r.push(Ii(u,d));const h=i[u]||(i[u]=Object.create(null));h[d]||(h[d]=[])}),s.pending.forEach(c=>{const{provider:u,prefix:d,name:h}=c,p=Ii(u,d),y=p.pendingIcons||(p.pendingIcons=new Set);y.has(h)||(y.add(h),i[u][d].push(h))}),r.forEach(c=>{const u=i[c.provider][c.prefix];u.length&&zA(c,u)}),e?VA(e,s,r):pm},BL=t=>new Promise((e,n)=>{const s=typeof t=="string"?jo(t,!0):t;if(!s){n(t);return}b_([s||t],i=>{if(i.length&&s){const r=hh(s);if(r){e({...Er,...r});return}}n(t)})});function HA(t,e,n){Ii("",e).loadIcons=t}function WA(t,e){const n={...t};for(const s in e){const i=e[s],r=typeof i;s in p_?(i===null||i&&(r==="string"||r==="number"))&&(n[s]=i):r===typeof n[s]&&(n[s]=s==="rotate"?i%4:i)}return n}const qA=/[\s,]+/;function KA(t,e){e.split(qA).forEach(n=>{switch(n.trim()){case"horizontal":t.hFlip=!0;break;case"vertical":t.vFlip=!0;break}})}function GA(t,e=0){const n=t.replace(/^-?[0-9.]*/,"");function s(i){for(;i<0;)i+=4;return i%4}if(n===""){const i=parseInt(t);return isNaN(i)?0:s(i)}else if(n!==t){let i=0;switch(n){case"%":i=25;break;case"deg":i=90}if(i){let r=parseFloat(t.slice(0,t.length-n.length));return isNaN(r)?0:(r=r/i,r%1===0?s(r):0)}}return e}function QA(t,e){let n=t.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const s in e)n+=" "+s+'="'+e[s]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+t+"</svg>"}function YA(t){return t.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function JA(t){return"data:image/svg+xml,"+YA(t)}function XA(t){return'url("'+JA(t)+'")'}const gm={...m_,inline:!1},ZA={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},eS={display:"inline-block"},ed={backgroundColor:"currentColor"},T_={backgroundColor:"transparent"},ym={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},vm={webkitMask:ed,mask:ed,background:T_};for(const t in vm){const e=vm[t];for(const n in ym)e[t+n]=ym[n]}const Ua={};["horizontal","vertical"].forEach(t=>{const e=t.slice(0,1)+"Flip";Ua[t+"-flip"]=e,Ua[t.slice(0,1)+"-flip"]=e,Ua[t+"Flip"]=e});function _m(t){return t+(t.match(/^[-0-9.]+$/)?"px":"")}const wm=(t,e)=>{const n=WA(gm,e),s={...ZA},i=e.mode||"svg",r={},o=e.style,a=typeof o=="object"&&!(o instanceof Array)?o:{};for(let I in e){const k=e[I];if(k!==void 0)switch(I){case"icon":case"style":case"onLoad":case"mode":case"ssr":break;case"inline":case"hFlip":case"vFlip":n[I]=k===!0||k==="true"||k===1;break;case"flip":typeof k=="string"&&KA(n,k);break;case"color":r.color=k;break;case"rotate":typeof k=="string"?n[I]=GA(k):typeof k=="number"&&(n[I]=k);break;case"ariaHidden":case"aria-hidden":k!==!0&&k!=="true"&&delete s["aria-hidden"];break;default:{const N=Ua[I];N?(k===!0||k==="true"||k===1)&&(n[N]=!0):gm[I]===void 0&&(s[I]=k)}}}const c=vA(t,n),u=c.attributes;if(n.inline&&(r.verticalAlign="-0.125em"),i==="svg"){s.style={...r,...a},Object.assign(s,u);let I=0,k=e.id;return typeof k=="string"&&(k=k.replace(/-/g,"_")),s.innerHTML=TA(c.body,k?()=>k+"ID"+I++:"iconifyVue"),Lu("svg",s)}const{body:d,width:h,height:p}=t,y=i==="mask"||(i==="bg"?!1:d.indexOf("currentColor")!==-1),_=QA(d,{...u,width:h+"",height:p+""});return s.style={...r,"--svg":XA(_),width:_m(u.width),height:_m(u.height),...eS,...y?ed:T_,...a},Lu("span",s)};f_(!0);g_("",MA);if(typeof document<"u"&&typeof window<"u"){const t=window;if(t.IconifyPreload!==void 0){const e=t.IconifyPreload,n="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(s=>{try{(typeof s!="object"||s===null||s instanceof Array||typeof s.icons!="object"||typeof s.prefix!="string"||!dA(s))&&console.error(n)}catch{console.error(n)}})}if(t.IconifyProviders!==void 0){const e=t.IconifyProviders;if(typeof e=="object"&&e!==null)for(let n in e){const s="IconifyProviders["+n+"] is invalid.";try{const i=e[n];if(typeof i!="object"||!i||i.resources===void 0)continue;y_(n,i)||console.error(s)}catch{console.error(s)}}}}const tS={...Er,body:""},zL=ct((t,{emit:e})=>{const n=te(null);function s(){n.value&&(n.value.abort?.(),n.value=null)}const i=te(!!t.ssr),r=te(""),o=ku(null);function a(){const u=t.icon;if(typeof u=="object"&&u!==null&&typeof u.body=="string")return r.value="",{data:u};let d;if(typeof u!="string"||(d=jo(u,!1,!0))===null)return null;let h=hh(d);if(!h){const _=n.value;return(!_||_.name!==u)&&(h===null?n.value={name:u}:n.value={name:u,abort:b_([d],c)}),null}s(),r.value!==u&&(r.value=u,as(()=>{e("load",u)}));const p=t.customise;if(p){h=Object.assign({},h);const _=p(h.body,d.name,d.prefix,d.provider);typeof _=="string"&&(h.body=_)}const y=["iconify"];return d.prefix!==""&&y.push("iconify--"+d.prefix),d.provider!==""&&y.push("iconify--"+d.provider),{data:h,classes:y}}function c(){const u=a();u?u.data!==o.value?.data&&(o.value=u):o.value=null}return i.value?c():nn(()=>{i.value=!0,c()}),an(()=>t.icon,c),_n(s),()=>{const u=o.value;if(!u)return wm(tS,t);let d=t;return u.classes&&(d={...t,class:u.classes.join(" ")}),wm({...Er,...u.data},d)}},{props:["icon","mode","ssr","width","height","style","color","inline","rotate","hFlip","horizontalFlip","vFlip","verticalFlip","flip","id","ariaHidden","customise","title"],emits:["load"]}),bm={getAPIConfig:Xl,setAPIModule:g_,sendAPIQuery:w_,setFetch:kA,getFetch:AA,listAPIProviders:IA},nS=cn({name:"@nuxt/icon",setup(){const t=fr(),e=a_().icon;bm.setFetch($fetch.native);const n=[];if(e.provider==="server"){const i=t.app?.baseURL?.replace(/\/$/,"")??"";n.push(i+(e.localApiEndpoint||"/api/_nuxt_icon")),(e.fallbackToApi===!0||e.fallbackToApi==="client-only")&&n.push(e.iconifyApiEndpoint)}else e.provider==="none"?bm.setFetch(()=>Promise.resolve(new Response)):n.push(e.iconifyApiEndpoint);async function s(i,r){try{const o=await $fetch(n[0]+"/"+r+".json",{query:{icons:i.join(",")}});if(!o||o.prefix!==r||!o.icons)throw new Error("Invalid data"+JSON.stringify(o));return o}catch(o){return console.error("Failed to load custom icons",o),null}}y_("",{resources:n});for(const i of e.customCollections||[])i&&HA(s,i)}}),sS=[Sk,Rk,Nk,Lk,Fk,$k,Uk,Bk,Kk,Yk,eA,sA,nS];function iS(t){if(!t)return"";const e=typeof navigator<"u"&&(navigator.platform.toLowerCase().includes("mac")||navigator.userAgent.toLowerCase().includes("mac")),n=[];t.alt&&(e?n.push("⌃"):n.push("Alt")),t.ctrl&&!t.alt&&n.push(e?"⌃":"Ctrl"),t.meta&&n.push(e?"⌘":"Meta"),t.shift&&n.push(e?"⇧":"Shift");const s=t.key==="`"?"`":t.key.toUpperCase();return n.push(s),e&&n.length>1?n.join(""):n.join("+")}const m={item(t,e,n){return{role:"item",id:t,label:e,enabled:!0,visible:!0,...n}},sep(t){return{role:"separator",id:t,visible:!0}},submenu(t,e,n){return{role:"submenu",id:t,label:e,children:n,visible:!0}},section(t,e,n){return{id:t,label:e,entries:n}},template(t,e,n){return{id:t,title:e,sections:n}}},ai=240,li=160;function Sn(t,e,n){return Math.max(e,Math.min(n,t))}function ou(){if(typeof window<"u"&&typeof document<"u"){const t=document.documentElement;return{vw:t.clientWidth,vh:t.clientHeight}}return{vw:1280,vh:800}}const rt=e_("os",{state:()=>({windows:[],nextWindowId:1,nextZ:100,drag:{active:!1,windowId:null,startX:0,startY:0,originX:0,originY:0,resizing:!1,edge:null,originW:0,originH:0},menu:{openType:"none",menubarIndex:null,activePath:[],contextPos:null,contextTemplate:null},focusedId:null,clock:"",menuBarHeight:40,desktopPadding:8,snapThreshold:16,wallpaper:null,theme:"glassmorphic-light"}),getters:{orderedWindows:t=>[...t.windows].filter(e=>!e.minimized).sort((e,n)=>e.zIndex-n.zIndex),focused:t=>t.windows.find(e=>e.id===t.focusedId)??null,activeAppId(){return this.focused?.appId??null},activeMenuTemplate(){return{id:"system-stub",title:this.activeAppId?"App":"Webintosh",sections:[]}}},actions:{saveSession(){if(typeof localStorage>"u")return;const t={windows:this.windows.map(e=>({id:e.id,title:e.title,kind:e.kind,rect:e.rect,zIndex:e.zIndex,appId:e.appId??null,resizable:e.resizable??!0,minimizable:e.minimizable??!0,maximizable:e.maximizable??!0,closable:e.closable??!0,maximized:!!e.maximized,minimized:!!e.minimized,lastNormalRect:e.lastNormalRect??null})),nextWindowId:this.nextWindowId,nextZ:this.nextZ,wallpaper:this.wallpaper,theme:this.theme};try{localStorage.setItem("webintosh:session:v1",JSON.stringify(t))}catch{}},loadSession(){if(!(typeof localStorage>"u"))try{const t=localStorage.getItem("webintosh:session:v1");if(!t){const n=typeof window<"u"&&window.location.pathname.includes("/webintosh/")?"/webintosh/":"/";this.wallpaper={type:"video",value:`${n}wallpapers/end-of-daylight.mp4`};return}const e=JSON.parse(t);if(Array.isArray(e?.windows)&&(this.windows=e.windows),typeof e?.nextWindowId=="number"&&(this.nextWindowId=e.nextWindowId),typeof e?.nextZ=="number"&&(this.nextZ=e.nextZ),"wallpaper"in e)this.wallpaper=e.wallpaper;else{const n=typeof window<"u"&&window.location.pathname.includes("/webintosh/")?"/webintosh/":"/";this.wallpaper={type:"video",value:`${n}wallpapers/end-of-daylight.mp4`}}typeof e?.theme=="string"&&(this.theme=e.theme,this.applyTheme(e.theme)),this.focusTopMost()}catch{}},setFocused(t){this.focusedId=t},focusTopMost(){const t=this.windows.filter(n=>!n.minimized).sort((n,s)=>n.zIndex-s.zIndex),e=t[t.length-1]??null;this.focusedId=e?e.id:null},ensureBounds(t){const{vw:e,vh:n}=ou(),s=this.desktopPadding,i=s,r=this.menuBarHeight,o=Math.max(ai,e-s*2),a=Math.max(li,n-this.menuBarHeight-s),c=Sn(t.rect.width,ai,o),u=Sn(t.rect.height,li,a);t.rect.width=Math.floor(c),t.rect.height=Math.floor(u);const d=e-t.rect.width-s,h=n-t.rect.height-s;t.rect.x=Math.round(Sn(t.rect.x,i,Math.max(i,d))),t.rect.y=Math.round(Sn(t.rect.y,r,Math.max(r,h)))},tickClock(){const t=new Date,e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=e[t.getDay()],i=t.getDate(),r=n[t.getMonth()],o=t.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0});this.clock=`${s} ${i} ${r} ${o}`},openWindow(t){const e=this.nextWindowId++,n=t?.rect?.width??360,s=t?.rect?.height??220,i=this.windows.length%6*24,r={id:e,title:t?.title??`Window ${e}`,kind:t?.kind??"blank",rect:{x:(t?.rect?.x??60)+i,y:(t?.rect?.y??this.menuBarHeight+20)+i,width:n,height:s},zIndex:this.nextZ++,appId:t?.appId,resizable:t?.resizable??!0,minimizable:t?.minimizable??!0,maximizable:t?.maximizable??!0,closable:t?.closable??!0,maximized:!1,minimized:!1};return this.windows.push(r),this.bringToFront(r.id),this.saveSession(),r.id},closeWindow(t){this.windows=this.windows.filter(e=>e.id!==t),this.drag.windowId===t&&this.endDrag(),this.focusedId===t&&this.focusTopMost(),this.saveSession()},bringToFront(t){const e=this.windows.find(n=>n.id===t);e&&(e.zIndex=this.nextZ++,this.setFocused(t),this.nextZ>1e4&&this.normalizeZOrder(),this.saveSession())},startDrag(t,e,n){const s=this.windows.find(i=>i.id===t);s&&(this.drag.active=!0,this.drag.resizing=!1,this.drag.windowId=t,this.drag.startX=e,this.drag.startY=n,this.drag.originX=s.rect.x,this.drag.originY=s.rect.y,this.bringToFront(t))},dragTo(t,e){if(!this.drag.active||this.drag.windowId==null||this.drag.resizing)return;const n=this.windows.find(r=>r.id===this.drag.windowId);if(!n)return;const s=t-this.drag.startX,i=e-this.drag.startY;n.rect.x=this.drag.originX+s,n.rect.y=this.drag.originY+i,this.ensureBounds(n)},endDrag(){this.drag.active=!1,this.drag.resizing=!1,this.drag.windowId=null,this.drag.edge=null,this.saveSession()},startResize(t,e,n,s){const i=this.windows.find(r=>r.id===t);!i||i.resizable===!1||(this.drag.active=!0,this.drag.resizing=!0,this.drag.edge=e??null,this.drag.windowId=t,this.drag.startX=n,this.drag.startY=s,this.drag.originX=i.rect.x,this.drag.originY=i.rect.y,this.drag.originW=i.rect.width,this.drag.originH=i.rect.height,this.bringToFront(t))},resizeTo(t,e){if(!this.drag.active||!this.drag.resizing||this.drag.windowId==null)return;const n=this.windows.find(b=>b.id===this.drag.windowId);if(!n)return;const s=t-this.drag.startX,i=e-this.drag.startY,r=this.drag.originX,o=this.drag.originY,a=this.drag.originW??n.rect.width,c=this.drag.originH??n.rect.height,{vw:u,vh:d}=ou(),h=this.desktopPadding,p=h,y=this.menuBarHeight,_=r+a,I=o+c;let k=r,N=o,L=a,R=c;const C=this.drag.edge;if(C?.includes("e")){const b=Math.max(ai,u-h-r);L=Sn(a+s,ai,b)}if(C?.includes("s")){const b=Math.max(li,d-h-o);R=Sn(c+i,li,b)}if(C?.includes("w")){const b=Math.max(ai,_-p);L=Sn(a-s,ai,b),k=_-L}if(C?.includes("n")){const b=Math.max(li,I-y);R=Sn(c-i,li,b),N=I-R}const P=u-L-h,O=d-R-h;k=Sn(k,p,Math.max(p,P)),N=Sn(N,y,Math.max(y,O)),n.rect={x:Math.round(k),y:Math.round(N),width:Math.floor(L),height:Math.floor(R)}},endResize(){this.endDrag()},toggleMaximize(t){const e=this.windows.find(r=>r.id===t);if(!e)return;const{vw:n,vh:s}=ou(),i=this.desktopPadding;e.maximized?(e.lastNormalRect&&(e.rect={...e.lastNormalRect}),e.maximized=!1):(e.lastNormalRect={...e.rect},e.rect.x=i,e.rect.y=this.menuBarHeight,e.rect.width=Math.floor(Math.max(ai,n-i*2)),e.rect.height=Math.floor(Math.max(li,s-this.menuBarHeight-i)),e.maximized=!0),this.bringToFront(t),this.saveSession()},minimizeWindow(t){const e=this.windows.find(n=>n.id===t);e&&(e.minimized=!0,this.focusedId===t&&this.focusTopMost(),this.saveSession())},restoreWindow(t){const e=this.windows.find(n=>n.id===t);e&&(e.minimized=!1,this.bringToFront(t),this.saveSession())},toggleMinimize(t){const e=this.windows.find(n=>n.id===t);e&&(e.minimized?this.restoreWindow(t):this.minimizeWindow(t))},setWindowRect(t,e){const n=this.windows.find(s=>s.id===t);n&&(n.rect={...n.rect,...e},this.ensureBounds(n),this.saveSession())},realignAllToBounds(){for(const t of this.windows)this.ensureBounds(t);this.saveSession()},normalizeZOrder(){const e=[...this.windows].sort((s,i)=>s.zIndex-i.zIndex);let n=100;for(const s of e)s.zIndex=n++;this.nextZ=n},openMenubar(t){this.menu.openType="menubar",this.menu.menubarIndex=typeof t=="number"?t:0,this.menu.activePath=[],this.menu.contextPos=null,this.menu.contextTemplate=null},openContext(t,e,n){this.menu.openType="context",this.menu.menubarIndex=null,this.menu.activePath=[],this.menu.contextPos={x:t,y:e},this.menu.contextTemplate=n},setActivePath(t){this.menu.activePath=Array.isArray(t)?[...t]:[]},closeMenu(){this.menu.openType="none",this.menu.menubarIndex=null,this.menu.activePath=[],this.menu.contextPos=null,this.menu.contextTemplate=null},setWallpaper(t){this.wallpaper=t,this.saveSession()},setTheme(t){this.theme=t,this.applyTheme(t),this.saveSession()},applyTheme(t){typeof document<"u"&&document.documentElement.setAttribute("data-theme",t)},initTheme(){this.applyTheme(this.theme)}}}),Tm="webintosh:dock:v1:pins",Im="webintosh:dock:v1:minOrder",au="webintosh:desktop:v1:iconPositions",Em="webintosh:desktop:v1:iconLayout",_t=e_("apps",{state:()=>({registry:{},pinned:[],minimizedOrder:[],iconPositions:{},iconLayoutDirection:"left",iconSortBy:"none",iconSize:"medium"}),getters:{pinnedDescriptors(t){return t.pinned.map(e=>t.registry[e]).filter(e=>!!e)}},actions:{registerApps(t){for(const e of t)this.registry[e.id]={kind:"app",...e}},loadPins(){if(!(typeof localStorage>"u"))try{const t=localStorage.getItem(Tm);if(!t)return;const e=JSON.parse(t);Array.isArray(e)&&(this.pinned=e.filter(n=>typeof n=="string"))}catch{}},savePins(){if(!(typeof localStorage>"u"))try{localStorage.setItem(Tm,JSON.stringify(this.pinned))}catch{}},isPinned(t){return this.pinned.includes(t)},togglePin(t){this.isPinned(t)?this.pinned=this.pinned.filter(e=>e!==t):this.pinned.push(t),this.savePins()},pinApp(t){this.pinned.includes(t)||(this.pinned.push(t),this.savePins())},unpinApp(t){this.pinned=this.pinned.filter(e=>e!==t),this.savePins()},loadIconPositions(){if(!(typeof localStorage>"u"))try{const t=localStorage.getItem(au);if(t){const e=JSON.parse(t);typeof e=="object"&&e!==null&&(this.iconPositions=e)}}catch(t){console.error("Failed to load icon positions:",t)}},loadIconLayout(){if(!(typeof localStorage>"u"))try{const t=localStorage.getItem(Em);if(t){const e=JSON.parse(t);typeof e=="object"&&e!==null&&((e.direction==="left"||e.direction==="right")&&(this.iconLayoutDirection=e.direction),(e.sortBy==="name"||e.sortBy==="type"||e.sortBy==="none")&&(this.iconSortBy=e.sortBy),(e.size==="small"||e.size==="medium"||e.size==="large")&&(this.iconSize=e.size))}}catch(t){console.error("Failed to load icon layout:",t)}},saveIconLayout(){if(!(typeof localStorage>"u"))try{const t={direction:this.iconLayoutDirection,sortBy:this.iconSortBy,size:this.iconSize};localStorage.setItem(Em,JSON.stringify(t))}catch(t){console.error("Failed to save icon layout:",t)}},setIconPosition(t,e,n){if(this.iconPositions[t]={x:e,y:n},typeof localStorage<"u")try{localStorage.setItem(au,JSON.stringify(this.iconPositions))}catch(s){console.error("Failed to save icon positions:",s)}},setIconLayoutDirection(t){this.iconLayoutDirection=t,this.saveIconLayout(),this.cleanUpIcons()},setIconSortBy(t){this.iconSortBy=t,this.saveIconLayout(),this.cleanUpIcons()},setIconSize(t){this.iconSize=t,this.saveIconLayout()},cleanUpIcons(){if(this.iconPositions={},typeof localStorage<"u")try{localStorage.setItem(au,JSON.stringify({}))}catch(t){console.error("Failed to clear icon positions:",t)}},getSortedAppList(){const t=Object.values(this.registry);return this.iconSortBy==="name"?t.sort((e,n)=>e.title.localeCompare(n.title)):this.iconSortBy==="type"?t.sort((e,n)=>e.kind!==n.kind?(e.kind||"").localeCompare(n.kind||""):e.title.localeCompare(n.title)):t},loadMinOrder(){if(!(typeof localStorage>"u"))try{const t=localStorage.getItem(Im);if(!t)return;const e=JSON.parse(t);Array.isArray(e)?this.minimizedOrder=e.filter(n=>typeof n=="string"):this.minimizedOrder=[]}catch{this.minimizedOrder=[]}},saveMinOrder(){if(!(typeof localStorage>"u"))try{localStorage.setItem(Im,JSON.stringify(this.minimizedOrder))}catch{}},orderMinimizedAppIds(t){const e=new Set(t),n=[],s=Array.isArray(this.minimizedOrder)?this.minimizedOrder:[];for(const i of s)e.has(i)&&n.push(i);for(const i of t)n.includes(i)||n.push(i);return n},moveInMinOrder(t,e){if(e!=null&&e===t){this.saveMinOrder();return}if(Array.isArray(this.minimizedOrder)||(this.minimizedOrder=[]),this.minimizedOrder.includes(t)||this.minimizedOrder.push(t),e&&!this.minimizedOrder.includes(e)&&this.minimizedOrder.push(e),this.minimizedOrder=this.minimizedOrder.filter(n=>n!==t),e){const n=this.minimizedOrder.indexOf(e);n>=0?this.minimizedOrder.splice(n,0,t):this.minimizedOrder.push(t)}else this.minimizedOrder.push(t);this.saveMinOrder()},launchOrFocus(t){const e=rt(),n=e.windows.filter(d=>d.appId===t),i=[...n.filter(d=>!d.minimized)].sort((d,h)=>h.zIndex-d.zIndex)[0];if(i){e.bringToFront(i.id);return}const o=[...n.filter(d=>!!d.minimized)].sort((d,h)=>h.zIndex-d.zIndex)[0];if(o){e.restoreWindow(o.id);return}const a=this.registry[t],c=t==="textedit"?"Untitled":a?.title??"App",u=a?.defaultRect??{x:80,y:e.menuBarHeight+24,width:520,height:360};e.openWindow({appId:t,title:c,kind:a?.kind??"app",rect:u})}}}),I_={};function xn(t,e){const n=I_[t];if(typeof n=="function")try{n(e)}catch{}}function oe(t,e){I_[t]=e}function td(){oe("os.openWindow",()=>{rt().openWindow()}),oe("os.openTestWindow",()=>{rt().openWindow({title:"Test Window"})}),oe("os.closeFocused",()=>{const t=rt(),e=t.focused;e&&t.closeWindow(e.id)}),oe("os.minimizeFocused",()=>{const t=rt(),e=t.focused;e&&t.toggleMinimize(e.id)}),oe("os.maximizeFocused",()=>{const t=rt(),e=t.focused;e&&t.toggleMaximize(e.id)}),oe("os.restoreWindowById",t=>{const e=rt(),n=ci(t,"id");typeof n=="number"&&e.restoreWindow(n)}),oe("view.toggleZoom",()=>{const t=rt(),e=t.focused;e&&t.toggleMaximize(e.id)}),oe("app.launch",t=>{const e=_t(),n=ci(t,"appId");n&&e.registry[n]&&e.launchOrFocus(n)}),oe("app.newWindow",t=>{const e=_t(),n=rt(),s=ci(t,"appId"),i=n.focused?.appId??null,r=s??i;if(r){const o=e.registry[r],a=r==="textedit"?"Untitled":o?.title??"App",c=o?.defaultRect??{x:80,y:n.menuBarHeight+24,width:520,height:360};n.openWindow({appId:r,title:a,kind:o?.kind??"app",rect:c})}else n.openWindow({title:"New Window"})}),oe("app.newDocument",t=>{const e=_t(),n=rt(),i=ci(t,"appId")??(e.registry.textedit?"textedit":void 0);if(i){const r=e.registry[i],o=i==="textedit"?"Untitled":r?.title??"Document",a=r?.defaultRect??{x:96,y:n.menuBarHeight+28,width:640,height:420};n.openWindow({appId:i,title:o,kind:r?.kind??"app",rect:a})}else n.openWindow({title:"New Document"})}),oe("system.showShortcuts",()=>{const t=_t(),e=rt();if(t.registry.shortcuts){t.launchOrFocus("shortcuts");return}e.openWindow({title:"Shortcuts"})}),oe("system.showAbout",()=>{const t=_t(),e=rt(),n=e.windows.filter(i=>i.appId==="about");if(n.length>0){const i=n.sort((r,o)=>o.zIndex-r.zIndex)[0];i.minimized?e.restoreWindow(i.id):e.bringToFront(i.id);return}const s=t.registry.about;e.openWindow({appId:"about",title:s?.title??"About",kind:"system",rect:s?.defaultRect??{x:100,y:100,width:400,height:420},maximizable:!1})}),oe("desktop.changeWallpaper",()=>{const t=_t(),e=rt(),n=e.windows.filter(s=>s.appId==="settings");if(n.length>0){const s=n.sort((i,r)=>r.zIndex-i.zIndex)[0];s.minimized?e.restoreWindow(s.id):e.bringToFront(s.id)}else{const s=t.registry.settings;e.openWindow({appId:"settings",title:s?.title??"System Settings",kind:"system",rect:s?.defaultRect??{x:100,y:80,width:900,height:600},metadata:{initialPanel:"wallpaper"}})}}),oe("desktop.cleanUpIcons",()=>{_t().cleanUpIcons()}),oe("desktop.sortIcons",t=>{const e=_t(),n=ci(t,"sortBy");(n==="name"||n==="type")&&e.setIconSortBy(n)}),oe("desktop.setIconDirection",t=>{const e=_t(),n=ci(t,"direction");(n==="left"||n==="right")&&e.setIconLayoutDirection(n)}),oe("desktop.setIconSize",t=>{const e=_t(),n=ci(t,"size");(n==="small"||n==="medium"||n==="large")&&e.setIconSize(n)})}function ci(t,e){if(t&&typeof t=="object"&&e in t)return t[e]}function rS(){return{register:oe,execute:xn}}const oS={key:0,class:"menu-sep",role:"separator"},aS=["role","aria-checked","aria-disabled","data-idx","onMouseenter","onClick"],lS={class:"menu-item-left"},cS={class:"checkmark","aria-hidden":"true"},uS={class:"label"},dS={class:"menu-item-right"},hS={key:0,class:"accel"},fS=["aria-expanded","data-idx","onMouseenter"],pS={class:"menu-item-left"},mS={class:"label"},gS=ct({name:"MenuDropdown",__name:"MenuDropdown",props:{entries:{},origin:{},teleport:{type:Boolean},z:{}},emits:["executed","navLeft","navRight"],setup(t,{emit:e}){const n=t,s=e,i=te(null),r=te(-1),o=te(!0);nn(()=>{const C=()=>{o.value=!1,window.removeEventListener("mousemove",C)};window.addEventListener("mousemove",C,{once:!0}),window.setTimeout(()=>{o.value=!1},150)});const a=xe(()=>{const P={position:"absolute",zIndex:n.z??1e3};return n.origin&&(P.left=`${n.origin.x}px`,P.top=`${n.origin.y}px`),P}),c=xe(()=>(n.z??1e3)+1);function u(C){return C.visible!==!1}const d=xe(()=>n.entries.map((C,P)=>C.role!=="separator"&&C.visible!==!1?P:-1).filter(C=>C>=0));function h(){const C=r.value,P=i.value;if(!P)return;P.querySelector(`.menu-item[data-idx="${C}"]`)?.focus()}function p(C){r.value=C,as(()=>h())}function y(){const C=d.value;if(!C.length)return;const P=C[0];p(P)}function _(){const C=d.value;if(!C.length)return;const P=C[C.length-1];p(P)}function I(C){const P=d.value;if(!P.length)return;const O=P.indexOf(r.value),b=O>=0?(O+C+P.length)%P.length:C>0?0:P.length-1,w=P[b]??P[0];p(w)}function k(C){o.value||(r.value=C)}function N(C){C.enabled!==!1&&C.command&&(xn(C.command,C.args),s("executed",{id:C.id}))}function L(C){s("executed",C)}function R(C){if(d.value.length)switch(C.key){case"ArrowDown":I(1);break;case"ArrowUp":I(-1);break;case"Home":y();break;case"End":_();break;case"Enter":{const O=r.value,b=n.entries[O];b&&b.role==="item"&&b.enabled!==!1&&N(b);break}case"Escape":break;case"ArrowRight":s("navRight");break;case"ArrowLeft":s("navLeft");break}}return(C,P)=>{const O=MT("MenuDropdown",!0);return $(),z("div",{class:Ee(["menu-dropdown",{"no-hover":o.value}]),style:nt(a.value),role:"menu",onKeydown:Ke(R,["stop","prevent"])},[v("ul",{ref_key:"listEl",ref:i,class:"menu-list",role:"none"},[($(!0),z(ye,null,Ve(C.entries,(b,w)=>($(),z(ye,{key:b.id},[b.role==="separator"&&u(b)?($(),z("li",oS)):b.role==="item"&&u(b)?($(),z("li",{key:1,class:Ee(["menu-item",{disabled:b.enabled===!1,checked:!!b.checked,active:w===r.value}]),role:b.checked?"menuitemcheckbox":"menuitem","aria-checked":b.checked===!0?"true":void 0,"aria-disabled":b.enabled===!1?"true":"false",tabindex:-1,"data-idx":w,onMouseenter:T=>k(w),onMouseleave:P[0]||(P[0]=T=>k(-1)),onClick:T=>N(b)},[v("div",lS,[v("span",cS,X(b.checked?"✓":""),1),v("span",uS,X(b.label),1)]),v("div",dS,[b.accel?($(),z("span",hS,X(we(iS)(b.accel)),1)):Qe("",!0)])],42,aS)):b.role==="submenu"&&u(b)?($(),z("li",{key:2,class:Ee(["menu-item submenu",{active:w===r.value}]),role:"menuitem","aria-haspopup":"true","aria-expanded":w===r.value?"true":"false",tabindex:-1,"data-idx":w,onMouseenter:T=>k(w)},[v("div",pS,[P[1]||(P[1]=v("span",{class:"checkmark","aria-hidden":"true"},null,-1)),v("span",mS,X(b.label),1)]),P[2]||(P[2]=v("div",{class:"menu-item-right"},[v("span",{class:"submenu-arrow","aria-hidden":"true"},"›")],-1)),w===r.value?($(),Ze(O,{key:0,class:"submenu-panel",entries:b.children,teleport:C.teleport,z:c.value,onExecuted:L},null,8,["entries","teleport","z"])):Qe("",!0)],42,fS)):Qe("",!0)],64))),128))],512)],38)}}}),vt=(t,e)=>{const n=t.__vccOpts||t;for(const[s,i]of e)n[s]=i;return n},E_=Object.assign(vt(gS,[["__scopeId","data-v-e83c3f18"]]),{__name:"OsMenuDropdown"});function nd(){const t=_t(),e=Object.values(t.registry).map(n=>m.item(`system.app.${n.id}`,n.title,{command:"app.launch",args:{appId:n.id}}));return m.template("system","",[m.section("system","",[m.item("system.about","About Webintosh",{command:"system.showAbout"}),m.item("system.settings","System Settings...",{command:"app.launch",args:{appId:"settings"}}),m.sep("system.sep1"),...e]),m.section("file","File",[m.item("file.openWindow","Open Window",{command:"os.openWindow",accel:{key:"N",alt:!0}}),m.item("file.shortcuts","Shortcuts",{command:"system.showShortcuts",accel:{key:"/",alt:!0}}),m.submenu("file.developer","Developer",[m.item("file.dev.openTestWindow","Open Test Window",{command:"os.openTestWindow"})])]),m.section("edit","Edit",[m.item("edit.undo","Undo",{enabled:!1}),m.item("edit.redo","Redo",{enabled:!1}),m.sep("edit.sep1"),m.item("edit.cut","Cut",{enabled:!1}),m.item("edit.copy","Copy",{enabled:!1}),m.item("edit.paste","Paste",{enabled:!1})]),m.section("view","View",[m.item("view.zoom","Zoom",{command:"view.toggleZoom",accel:{key:"Z",alt:!0}})]),m.section("window","Window",[m.item("window.minimize","Minimize",{command:"os.minimizeFocused",accel:{key:"M",alt:!0}}),m.item("window.close","Close Window",{command:"os.closeFocused",accel:{key:"W",alt:!0}}),m.item("window.cycle","Cycle Windows",{accel:{key:"`",alt:!0},enabled:!1})]),m.section("help","Help",[m.item("help.search","Search",{enabled:!1})])])}function yS(){const t=_t(),e=Object.values(t.registry).map(n=>m.item(`finder.app.${n.id}`,n.title,{command:"app.launch",args:{appId:n.id}}));return m.template("finder","",[m.section("finder","",[m.item("finder.about","About Webintosh",{command:"system.showAbout"}),m.item("finder.settings","System Settings...",{command:"app.launch",args:{appId:"settings"}}),m.sep("finder.sep1"),...e]),m.section("file","File",[m.item("file.newWindow","New Finder Window",{command:"app.newWindow",args:{appId:"finder"},accel:{key:"N",alt:!0}}),m.item("file.newFolder","New Folder",{command:"finder.newFolder",accel:{key:"N",alt:!0,shift:!0}}),m.sep("file.sep1"),m.item("file.getInfo","Get Info",{enabled:!1,accel:{key:"I",alt:!0}}),m.item("file.rename","Rename",{enabled:!1}),m.sep("file.sep2"),m.item("file.duplicate","Duplicate",{enabled:!1}),m.item("file.trash","Move to Trash",{enabled:!1,accel:{key:"Delete",alt:!0}})]),m.section("edit","Edit",[m.item("edit.undo","Undo",{command:"edit.undo",accel:{key:"Z",alt:!0}}),m.item("edit.redo","Redo",{command:"edit.redo",accel:{key:"Z",alt:!0,shift:!0}}),m.sep("edit.sep1"),m.item("edit.cut","Cut",{command:"edit.cut",accel:{key:"X",alt:!0}}),m.item("edit.copy","Copy",{command:"edit.copy",accel:{key:"C",alt:!0}}),m.item("edit.paste","Paste",{command:"edit.paste",accel:{key:"V",alt:!0}}),m.sep("edit.sep2"),m.item("edit.selectAll","Select All",{command:"edit.selectAll",accel:{key:"A",alt:!0}})]),m.section("view","View",[m.submenu("view.as","View As",[m.item("view.as.icons","Icons",{command:"finder.viewAs",args:{view:"icons"}}),m.item("view.as.list","List",{command:"finder.viewAs",args:{view:"list"}}),m.item("view.as.columns","Columns",{command:"finder.viewAs",args:{view:"columns"}}),m.item("view.as.gallery","Gallery",{command:"finder.viewAs",args:{view:"gallery"}})]),m.sep("view.sep1"),m.submenu("view.sortBy","Sort By",[m.item("view.sortBy.name","Name",{command:"finder.sortBy",args:{sort:"name"}}),m.item("view.sortBy.kind","Kind",{command:"finder.sortBy",args:{sort:"kind"}}),m.item("view.sortBy.dateModified","Date Modified",{command:"finder.sortBy",args:{sort:"dateModified"}}),m.item("view.sortBy.size","Size",{command:"finder.sortBy",args:{sort:"size"}})]),m.sep("view.sep2"),m.item("view.showPathBar","Show Path Bar",{command:"finder.togglePathBar",checkable:!0}),m.item("view.showStatusBar","Show Status Bar",{command:"finder.toggleStatusBar",checkable:!0}),m.item("view.showSidebar","Show Sidebar",{command:"finder.toggleSidebar",checkable:!0}),m.sep("view.sep3"),m.item("view.showIconPreview","Show Icon Preview",{command:"finder.toggleIconPreview",checkable:!0})]),m.section("go","Go",[m.item("go.desktop","Desktop",{command:"finder.goTo",args:{location:"desktop"},accel:{key:"D",alt:!0,shift:!0}}),m.item("go.documents","Documents",{command:"finder.goTo",args:{location:"documents"},accel:{key:"O",alt:!0,shift:!0}}),m.item("go.downloads","Downloads",{command:"finder.goTo",args:{location:"downloads"},accel:{key:"L",alt:!0}}),m.item("go.pictures","Pictures",{command:"finder.goTo",args:{location:"pictures"}}),m.item("go.music","Music",{command:"finder.goTo",args:{location:"music"}}),m.item("go.videos","Videos",{command:"finder.goTo",args:{location:"videos"}}),m.sep("go.sep1"),m.item("go.applications","Applications",{command:"finder.goTo",args:{location:"applications"},accel:{key:"A",alt:!0,shift:!0}}),m.item("go.utilities","Utilities",{command:"finder.goTo",args:{location:"utilities"},accel:{key:"U",alt:!0,shift:!0}}),m.sep("go.sep2"),m.item("go.recent","Recent",{command:"finder.goTo",args:{location:"recent"}})]),m.section("window","Window",[m.item("window.minimize","Minimize",{command:"os.minimizeFocused",accel:{key:"M",alt:!0}}),m.item("window.close","Close Window",{command:"os.closeFocused",accel:{key:"W",alt:!0}}),m.item("window.cycle","Cycle Windows",{accel:{key:"`",alt:!0},enabled:!1}),m.sep("window.sep1"),m.item("window.bringAllToFront","Bring All to Front",{command:"finder.bringAllToFront"})]),m.section("help","Help",[m.item("help.finderHelp","Finder Help",{command:"help.showFinderHelp"}),m.item("help.shareApp","Share Webintosh...",{command:"help.shareApp"}),m.sep("help.sep1"),m.item("help.aboutFinder","About Finder",{command:"help.showAboutFinder"})])])}function vS(){return m.template("textedit","TextEdit",[m.section("textedit","TextEdit",[m.item("textedit.about","About TextEdit"),m.item("textedit.preferences","Preferences…",{enabled:!1}),m.sep("textedit.sep1"),m.item("textedit.quit","Quit TextEdit",{command:"os.closeFocused",accel:{key:"Q",alt:!0}})]),m.section("file","File",[m.item("file.new","New",{command:"app.newDocument",args:{appId:"textedit"},accel:{key:"N",alt:!0}}),m.item("file.open","Open…",{command:"textedit.open",accel:{key:"O",alt:!0}}),m.item("file.openRecent","Open Recent",{enabled:!1}),m.sep("file.sep1"),m.item("file.save","Save",{command:"textedit.save",accel:{key:"S",alt:!0}}),m.item("file.saveAs","Save As…",{command:"textedit.saveAs",accel:{key:"S",alt:!0,shift:!0}}),m.item("file.export","Export As PDF…",{enabled:!1}),m.sep("file.sep2"),m.item("file.print","Print…",{command:"textedit.print",accel:{key:"P",alt:!0}}),m.sep("file.sep3"),m.item("file.close","Close",{command:"os.closeFocused",accel:{key:"W",alt:!0}})]),m.section("edit","Edit",[m.item("edit.undo","Undo",{command:"textedit.undo",accel:{key:"Z",alt:!0}}),m.item("edit.redo","Redo",{command:"textedit.redo",accel:{key:"Z",alt:!0,shift:!0}}),m.sep("edit.sep1"),m.item("edit.cut","Cut",{command:"textedit.cut",accel:{key:"X",alt:!0}}),m.item("edit.copy","Copy",{command:"textedit.copy",accel:{key:"C",alt:!0}}),m.item("edit.paste","Paste",{command:"textedit.paste",accel:{key:"V",alt:!0}}),m.item("edit.pasteAndMatchStyle","Paste and Match Style",{command:"textedit.pasteAndMatchStyle",accel:{key:"V",alt:!0,shift:!0}}),m.item("edit.delete","Delete"),m.item("edit.selectAll","Select All",{command:"textedit.selectAll",accel:{key:"A",alt:!0}}),m.sep("edit.sep2"),m.item("edit.find","Find…",{command:"textedit.find",accel:{key:"F",alt:!0}}),m.item("edit.findAndReplace","Find and Replace…",{command:"textedit.findAndReplace",accel:{key:"F",alt:!0,shift:!0}}),m.item("edit.findNext","Find Next",{command:"textedit.findNext",accel:{key:"G",alt:!0}}),m.item("edit.findPrevious","Find Previous",{command:"textedit.findPrevious",accel:{key:"G",alt:!0,shift:!0}})]),m.section("format","Format",[m.item("format.bold","Bold",{command:"textedit.bold",accel:{key:"B",alt:!0}}),m.item("format.italic","Italic",{command:"textedit.italic",accel:{key:"I",alt:!0}}),m.item("format.underline","Underline",{command:"textedit.underline",accel:{key:"U",alt:!0}}),m.item("format.strikethrough","Strikethrough",{command:"textedit.strikethrough"}),m.sep("format.sep1"),m.item("format.alignLeft","Align Left",{command:"textedit.alignLeft",accel:{key:"L",alt:!0,shift:!0}}),m.item("format.alignCenter","Center",{command:"textedit.alignCenter",accel:{key:"E",alt:!0,shift:!0}}),m.item("format.alignRight","Align Right",{command:"textedit.alignRight",accel:{key:"R",alt:!0,shift:!0}}),m.item("format.justify","Justify",{command:"textedit.justify",accel:{key:"J",alt:!0,shift:!0}}),m.sep("format.sep2"),m.item("format.bulletList","Bullet List",{command:"textedit.bulletList",accel:{key:"8",alt:!0,shift:!0}}),m.item("format.numberedList","Numbered List",{command:"textedit.numberedList",accel:{key:"7",alt:!0,shift:!0}}),m.sep("format.sep3"),m.item("format.increaseIndent","Increase Indent",{command:"textedit.increaseIndent",accel:{key:"]",alt:!0}}),m.item("format.decreaseIndent","Decrease Indent",{command:"textedit.decreaseIndent",accel:{key:"[",alt:!0}}),m.sep("format.sep4"),m.item("format.font","Font…",{command:"textedit.showFonts"}),m.item("format.fontSize","Font Size",[m.item("format.fontSize.smaller","Smaller",{command:"textedit.fontSizeSmaller",accel:{key:"-",alt:!0}}),m.item("format.fontSize.larger","Larger",{command:"textedit.fontSizeLarger",accel:{key:"=",alt:!0}})]),m.sep("format.sep5"),m.item("format.clearFormatting","Clear Formatting",{command:"textedit.clearFormatting"})]),m.section("view","View",[m.item("view.zoomIn","Zoom In",{command:"textedit.zoomIn",accel:{key:"=",alt:!0}}),m.item("view.zoomOut","Zoom Out",{command:"textedit.zoomOut",accel:{key:"-",alt:!0}}),m.item("view.actualSize","Actual Size",{command:"textedit.zoomReset",accel:{key:"0",alt:!0}}),m.sep("view.sep1"),m.item("view.showToolbar","Show Toolbar",{command:"textedit.toggleToolbar",checkable:!0,checked:!0}),m.item("view.showRuler","Show Ruler",{command:"textedit.toggleRuler",checkable:!0}),m.item("view.showInvisibles","Show Invisibles",{command:"textedit.toggleInvisibles",checkable:!0}),m.sep("view.sep2"),m.item("view.enterFullScreen","Enter Full Screen",{command:"view.toggleFullScreen",accel:{key:"F",alt:!0,shift:!0}})]),m.section("window","Window",[m.item("window.minimize","Minimize",{command:"os.minimizeFocused",accel:{key:"M",alt:!0}}),m.item("window.zoom","Zoom",{command:"view.toggleZoom"}),m.sep("window.sep1"),m.item("window.bringAllToFront","Bring All to Front",{command:"textedit.bringAllToFront"}),m.sep("window.sep2"),m.item("window.cycle","Cycle Through Windows",{command:"os.cycleWindows",accel:{key:"`",alt:!0}})]),m.section("help","Help",[m.item("help.textEditHelp","TextEdit Help",{enabled:!1}),m.item("help.shortcuts","Keyboard Shortcuts",{command:"system.showShortcuts",accel:{key:"/",alt:!0}})])])}function _S(){return m.template("typingtest","TypingTest",[m.section("typingtest","TypingTest",[m.item("typingtest.about","About TypingTest",{command:"system.showAbout"}),m.item("typingtest.preferences","Preferences…",{enabled:!1}),m.sep("typingtest.sep1"),m.item("typingtest.quit","Quit TypingTest",{command:"os.closeFocused",accel:{key:"Q",alt:!0}})]),m.section("test","Test",[m.item("test.new","New Test",{command:"typingtest.newTest",accel:{key:"N",alt:!0}}),m.item("test.restart","Restart Test",{command:"typingtest.restartTest",accel:{key:"R",alt:!0}}),m.sep("test.sep1"),m.item("test.changeText","Change Text",{command:"typingtest.changeText",accel:{key:"T",alt:!0}}),m.sep("test.sep2"),m.submenu("test.difficulty","Difficulty",[m.item("test.difficulty.easy","Easy",{command:"typingtest.setDifficulty",args:{level:"easy"},checked:!0}),m.item("test.difficulty.medium","Medium",{command:"typingtest.setDifficulty",args:{level:"medium"}}),m.item("test.difficulty.hard","Hard",{command:"typingtest.setDifficulty",args:{level:"hard"}})]),m.sep("test.sep3"),m.item("test.practiceMode","Practice Mode",{command:"typingtest.togglePracticeMode",checked:!1,enabled:!1})]),m.section("settings","Settings",[m.item("settings.sound","Sound Effects",{command:"typingtest.toggleSound",checked:!0,accel:{key:"S",alt:!0,shift:!0}}),m.item("settings.showKeyboard","Show Keyboard",{command:"typingtest.toggleKeyboard",checked:!0,accel:{key:"K",alt:!0}}),m.sep("settings.sep1"),m.submenu("settings.theme","Test Theme",[m.item("settings.theme.light","Light",{command:"typingtest.setTheme",args:{theme:"light"},checked:!0}),m.item("settings.theme.dark","Dark",{command:"typingtest.setTheme",args:{theme:"dark"}}),m.item("settings.theme.highContrast","High Contrast",{command:"typingtest.setTheme",args:{theme:"highContrast"}})]),m.sep("settings.sep2"),m.item("settings.showTimer","Show Timer",{command:"typingtest.toggleTimer",checked:!0}),m.item("settings.showWPM","Show Live WPM",{command:"typingtest.toggleLiveWPM",checked:!0}),m.item("settings.showAccuracy","Show Live Accuracy",{command:"typingtest.toggleLiveAccuracy",checked:!0})]),m.section("stats","Statistics",[m.item("stats.currentSession","Current Session",{command:"typingtest.showSessionStats",accel:{key:"I",alt:!0}}),m.item("stats.allTime","All Time Stats",{command:"typingtest.showAllTimeStats",enabled:!1}),m.sep("stats.sep1"),m.item("stats.personalBest","Personal Best",{command:"typingtest.showPersonalBest",enabled:!1}),m.item("stats.history","Test History",{command:"typingtest.showHistory",enabled:!1}),m.sep("stats.sep2"),m.item("stats.reset","Reset Statistics",{command:"typingtest.resetStats",enabled:!1}),m.item("stats.export","Export Statistics…",{command:"typingtest.exportStats",enabled:!1})]),m.section("view","View",[m.item("view.zoom","Zoom",{command:"view.toggleZoom",accel:{key:"Z",alt:!0}}),m.item("view.fullscreen","Enter Full Screen",{command:"typingtest.toggleFullscreen",accel:{key:"F",alt:!0,shift:!0}}),m.sep("view.sep1"),m.item("view.focusMode","Focus Mode",{command:"typingtest.toggleFocusMode",checked:!1,enabled:!1}),m.item("view.nightMode","Night Mode",{command:"typingtest.toggleNightMode",checked:!1,enabled:!1})]),m.section("window","Window",[m.item("window.minimize","Minimize",{command:"os.minimizeFocused",accel:{key:"M",alt:!0}}),m.item("window.close","Close Window",{command:"os.closeFocused",accel:{key:"W",alt:!0}}),m.item("window.cycle","Cycle Windows",{accel:{key:"`",alt:!0},enabled:!1}),m.sep("window.sep1"),m.item("window.bringAllToFront","Bring All to Front",{enabled:!1})]),m.section("help","Help",[m.item("help.typingTips","Typing Tips",{command:"typingtest.showTips"}),m.item("help.keyboardShortcuts","Keyboard Shortcuts",{command:"system.showShortcuts",accel:{key:"/",alt:!0}}),m.sep("help.sep1"),m.item("help.learnToType","Learn to Type",{command:"typingtest.showTutorial",enabled:!1}),m.item("help.fingerPlacement","Finger Placement Guide",{command:"typingtest.showFingerGuide",enabled:!1})])])}function wS(){return m.template("keystation","KeyStation",[m.section("keystation","KeyStation",[m.item("keystation.about","About KeyStation",{command:"system.showAbout"}),m.item("keystation.preferences","Preferences…",{enabled:!1}),m.sep("keystation.sep1"),m.item("keystation.quit","Quit KeyStation",{command:"os.closeFocused",accel:{key:"Q",alt:!0}})]),m.section("file","File",[m.item("file.newSession","New Session",{command:"keystation.newSession",accel:{key:"N",alt:!0}}),m.sep("file.sep1"),m.item("file.startRecording","Start Recording",{command:"keystation.startRecording",accel:{key:"R",alt:!0}}),m.item("file.stopRecording","Stop Recording",{command:"keystation.stopRecording",accel:{key:"R",alt:!0,shift:!0},enabled:!1}),m.item("file.playRecording","Play Recording",{command:"keystation.playRecording",accel:{key:"P",alt:!0}}),m.item("file.clearRecording","Clear Recording",{command:"keystation.clearRecording"}),m.sep("file.sep2"),m.item("file.export","Export Audio…",{command:"keystation.exportAudio",enabled:!1}),m.item("file.importMidi","Import MIDI…",{command:"keystation.importMidi",enabled:!1})]),m.section("edit","Edit",[m.item("edit.undo","Undo",{command:"keystation.undo",accel:{key:"Z",alt:!0},enabled:!1}),m.item("edit.redo","Redo",{command:"keystation.redo",accel:{key:"Z",alt:!0,shift:!0},enabled:!1}),m.sep("edit.sep1"),m.item("edit.copy","Copy Pattern",{command:"keystation.copyPattern",accel:{key:"C",alt:!0},enabled:!1}),m.item("edit.paste","Paste Pattern",{command:"keystation.pastePattern",accel:{key:"V",alt:!0},enabled:!1}),m.sep("edit.sep2"),m.item("edit.clearAll","Clear All",{command:"keystation.clearAll"})]),m.section("instrument","Instrument",[m.item("instrument.piano","Piano",{command:"keystation.setInstrument",args:{instrument:"piano"},checked:!0}),m.item("instrument.synth","Synth",{command:"keystation.setInstrument",args:{instrument:"synth"}}),m.item("instrument.organ","Organ",{command:"keystation.setInstrument",args:{instrument:"organ"}}),m.item("instrument.strings","Strings",{command:"keystation.setInstrument",args:{instrument:"strings"}}),m.item("instrument.brass","Brass",{command:"keystation.setInstrument",args:{instrument:"brass"}}),m.item("instrument.flute","Flute",{command:"keystation.setInstrument",args:{instrument:"flute"}}),m.sep("instrument.sep1"),m.submenu("instrument.oscillator","Oscillator Type",[m.item("instrument.oscillator.sine","Sine",{command:"keystation.setOscillator",args:{type:"sine"},checked:!0}),m.item("instrument.oscillator.triangle","Triangle",{command:"keystation.setOscillator",args:{type:"triangle"}}),m.item("instrument.oscillator.sawtooth","Sawtooth",{command:"keystation.setOscillator",args:{type:"sawtooth"}}),m.item("instrument.oscillator.square","Square",{command:"keystation.setOscillator",args:{type:"square"}})])]),m.section("effects","Effects",[m.submenu("effects.reverb","Reverb",[m.item("effects.reverb.off","Off",{command:"keystation.setReverb",args:{level:0},checked:!1}),m.item("effects.reverb.low","Low (20%)",{command:"keystation.setReverb",args:{level:20},checked:!0}),m.item("effects.reverb.medium","Medium (50%)",{command:"keystation.setReverb",args:{level:50}}),m.item("effects.reverb.high","High (80%)",{command:"keystation.setReverb",args:{level:80}}),m.item("effects.reverb.max","Maximum",{command:"keystation.setReverb",args:{level:100}})]),m.submenu("effects.delay","Delay",[m.item("effects.delay.off","Off",{command:"keystation.setDelay",args:{level:0},checked:!0}),m.item("effects.delay.low","Low (25%)",{command:"keystation.setDelay",args:{level:25}}),m.item("effects.delay.medium","Medium (50%)",{command:"keystation.setDelay",args:{level:50}}),m.item("effects.delay.high","High (75%)",{command:"keystation.setDelay",args:{level:75}}),m.item("effects.delay.max","Maximum",{command:"keystation.setDelay",args:{level:100}})]),m.sep("effects.sep1"),m.item("effects.sustain","Sustain Pedal",{command:"keystation.toggleSustain",accel:{key:" ",alt:!1},checked:!1})]),m.section("octave","Octave",[m.item("octave.c1","C1",{command:"keystation.setOctave",args:{octave:1}}),m.item("octave.c2","C2",{command:"keystation.setOctave",args:{octave:2}}),m.item("octave.c3","C3",{command:"keystation.setOctave",args:{octave:3}}),m.item("octave.c4","C4",{command:"keystation.setOctave",args:{octave:4},checked:!0}),m.item("octave.c5","C5",{command:"keystation.setOctave",args:{octave:5}}),m.item("octave.c6","C6",{command:"keystation.setOctave",args:{octave:6}}),m.item("octave.c7","C7",{command:"keystation.setOctave",args:{octave:7}}),m.sep("octave.sep1"),m.item("octave.up","Octave Up",{command:"keystation.octaveUp",accel:{key:"]",alt:!0}}),m.item("octave.down","Octave Down",{command:"keystation.octaveDown",accel:{key:"[",alt:!0}})]),m.section("audio","Audio",[m.submenu("audio.volume","Master Volume",[m.item("audio.volume.mute","Mute",{command:"keystation.setVolume",args:{level:0}}),m.item("audio.volume.25","25%",{command:"keystation.setVolume",args:{level:25}}),m.item("audio.volume.50","50%",{command:"keystation.setVolume",args:{level:50},checked:!0}),m.item("audio.volume.75","75%",{command:"keystation.setVolume",args:{level:75}}),m.item("audio.volume.100","100%",{command:"keystation.setVolume",args:{level:100}})]),m.sep("audio.sep1"),m.item("audio.volumeUp","Volume Up",{command:"keystation.volumeUp",accel:{key:"=",alt:!0}}),m.item("audio.volumeDown","Volume Down",{command:"keystation.volumeDown",accel:{key:"-",alt:!0}}),m.sep("audio.sep2"),m.item("audio.resetAudio","Reset Audio Context",{command:"keystation.resetAudio"})]),m.section("view","View",[m.item("view.zoom","Zoom",{command:"view.toggleZoom",accel:{key:"Z",alt:!0}}),m.sep("view.sep1"),m.item("view.showWaveform","Show Waveform",{command:"keystation.toggleWaveform",checked:!0}),m.item("view.showKeyLabels","Show Key Labels",{command:"keystation.toggleKeyLabels",checked:!0}),m.item("view.showOctaveLabels","Show Octave Labels",{command:"keystation.toggleOctaveLabels",checked:!0}),m.sep("view.sep2"),m.item("view.compactMode","Compact Mode",{command:"keystation.toggleCompactMode",enabled:!1})]),m.section("window","Window",[m.item("window.minimize","Minimize",{command:"os.minimizeFocused",accel:{key:"M",alt:!0}}),m.item("window.close","Close Window",{command:"os.closeFocused",accel:{key:"W",alt:!0}}),m.sep("window.sep1"),m.item("window.newWindow","New KeyStation Window",{command:"app.newWindow",args:{appId:"keystation"},accel:{key:"N",alt:!0,shift:!0}})]),m.section("help","Help",[m.item("help.keyboardShortcuts","Keyboard Shortcuts",{command:"system.showShortcuts",accel:{key:"/",alt:!0}}),m.sep("help.sep1"),m.item("help.keyboardLayout","Keyboard Layout Guide",{command:"keystation.showKeyboardGuide"}),m.item("help.midiLearn","MIDI Learn Mode",{command:"keystation.toggleMidiLearn",enabled:!1}),m.sep("help.sep2"),m.item("help.documentation","KeyStation Documentation",{command:"keystation.showDocumentation",enabled:!1})])])}function bS(){return m.template("yahooMessenger","Yahoo! Messenger",[m.section("yahooMessenger","Yahoo! Messenger",[m.item("yahooMessenger.about","About Yahoo! Messenger",{command:"system.showAbout"}),m.item("yahooMessenger.preferences","Preferences…",{enabled:!1}),m.sep("yahooMessenger.sep1"),m.item("yahooMessenger.signOut","Sign Out",{command:"yahooMessenger.signOut"}),m.sep("yahooMessenger.sep2"),m.item("yahooMessenger.quit","Quit Yahoo! Messenger",{command:"os.closeFocused",accel:{key:"Q",alt:!0}})]),m.section("conversations","Conversations",[m.item("conversations.newMessage","New Message",{command:"yahooMessenger.newMessage",accel:{key:"N",alt:!0}}),m.item("conversations.joinChannel","Join Channel",{command:"yahooMessenger.joinChannel",accel:{key:"J",alt:!0}}),m.sep("conversations.sep1"),m.submenu("conversations.channels","Channels",[m.item("conversations.channels.general","#general",{command:"yahooMessenger.switchChannel",args:{channel:"general"}}),m.item("conversations.channels.design","#design",{command:"yahooMessenger.switchChannel",args:{channel:"design"}}),m.item("conversations.channels.gaming","#gaming",{command:"yahooMessenger.switchChannel",args:{channel:"gaming"}}),m.item("conversations.channels.music","#music",{command:"yahooMessenger.switchChannel",args:{channel:"music"}})]),m.sep("conversations.sep2"),m.item("conversations.directMessages","Direct Messages",{command:"yahooMessenger.showDirectMessages",accel:{key:"D",alt:!0}}),m.sep("conversations.sep3"),m.item("conversations.clearChat","Clear Current Chat",{command:"yahooMessenger.clearChat",accel:{key:"L",alt:!0}})]),m.section("edit","Edit",[m.item("edit.copy","Copy",{command:"document.copy",accel:{key:"C",alt:!0}}),m.item("edit.paste","Paste",{command:"document.paste",accel:{key:"V",alt:!0}}),m.sep("edit.sep1"),m.item("edit.selectAll","Select All",{command:"document.selectAll",accel:{key:"A",alt:!0}}),m.sep("edit.sep2"),m.item("edit.findInChat","Find in Chat…",{command:"yahooMessenger.findInChat",accel:{key:"F",alt:!0},enabled:!1})]),m.section("status","Status",[m.item("status.available","Available",{command:"yahooMessenger.setStatus",args:{status:"available"},checked:!0}),m.item("status.busy","Busy",{command:"yahooMessenger.setStatus",args:{status:"busy"}}),m.item("status.away","Away",{command:"yahooMessenger.setStatus",args:{status:"away"}}),m.item("status.invisible","Invisible",{command:"yahooMessenger.setStatus",args:{status:"invisible"}}),m.sep("status.sep1"),m.item("status.customMessage","Set Status Message…",{command:"yahooMessenger.setStatusMessage",enabled:!1})]),m.section("tools","Tools",[m.item("tools.buzz","Send BUZZ!",{command:"yahooMessenger.sendBuzz",accel:{key:"B",alt:!0}}),m.sep("tools.sep1"),m.submenu("tools.emoticons","Emoticons",[m.item("tools.emoticons.smile","😊 Smile",{command:"yahooMessenger.insertEmoticon",args:{emoticon:"😊"}}),m.item("tools.emoticons.laugh","😂 Laugh",{command:"yahooMessenger.insertEmoticon",args:{emoticon:"😂"}}),m.item("tools.emoticons.heart","❤️ Heart",{command:"yahooMessenger.insertEmoticon",args:{emoticon:"❤️"}}),m.item("tools.emoticons.thumbsUp","👍 Thumbs Up",{command:"yahooMessenger.insertEmoticon",args:{emoticon:"👍"}}),m.item("tools.emoticons.cool","😎 Cool",{command:"yahooMessenger.insertEmoticon",args:{emoticon:"😎"}}),m.item("tools.emoticons.thinking","🤔 Thinking",{command:"yahooMessenger.insertEmoticon",args:{emoticon:"🤔"}}),m.item("tools.emoticons.cry","😭 Cry",{command:"yahooMessenger.insertEmoticon",args:{emoticon:"😭"}}),m.item("tools.emoticons.party","🎉 Party",{command:"yahooMessenger.insertEmoticon",args:{emoticon:"🎉"}})]),m.sep("tools.sep2"),m.item("tools.sounds","Message Sounds",{command:"yahooMessenger.toggleSounds",checked:!0}),m.item("tools.notifications","Desktop Notifications",{command:"yahooMessenger.toggleNotifications",checked:!0}),m.sep("tools.sep3"),m.item("tools.clearAllChats","Clear All Chats…",{command:"yahooMessenger.clearAllChats",enabled:!1})]),m.section("view","View",[m.item("view.showSidebar","Show Sidebar",{command:"yahooMessenger.toggleSidebar",checked:!0}),m.item("view.showOnlineUsers","Show Online Users",{command:"yahooMessenger.toggleOnlineUsers",checked:!0}),m.sep("view.sep1"),m.item("view.compactMode","Compact Mode",{command:"yahooMessenger.toggleCompactMode",enabled:!1}),m.sep("view.sep2"),m.item("view.zoomIn","Zoom In",{command:"yahooMessenger.zoomIn",accel:{key:"=",alt:!0}}),m.item("view.zoomOut","Zoom Out",{command:"yahooMessenger.zoomOut",accel:{key:"-",alt:!0}}),m.item("view.resetZoom","Reset Zoom",{command:"yahooMessenger.resetZoom",accel:{key:"0",alt:!0}})]),m.section("window","Window",[m.item("window.minimize","Minimize",{command:"os.minimizeFocused",accel:{key:"M",alt:!0}}),m.item("window.close","Close Window",{command:"os.closeFocused",accel:{key:"W",alt:!0}}),m.sep("window.sep1"),m.item("window.newWindow","New Messenger Window",{command:"app.newWindow",args:{appId:"yahooMessenger"},accel:{key:"N",alt:!0,shift:!0}})]),m.section("help","Help",[m.item("help.keyboardShortcuts","Keyboard Shortcuts",{command:"system.showShortcuts",accel:{key:"/",alt:!0}}),m.sep("help.sep1"),m.item("help.about","About Yahoo! Messenger",{command:"yahooMessenger.showAbout"}),m.item("help.whatsnew","What's New",{command:"yahooMessenger.showWhatsNew",enabled:!1})])])}function TS(){return m.template("whitenoise","Noise Mixer",[m.section("whitenoise","Noise Mixer",[m.item("whitenoise.about","About Noise Mixer",{command:"system.showAbout"}),m.item("whitenoise.preferences","Preferences…",{enabled:!1}),m.sep("whitenoise.sep1"),m.item("whitenoise.quit","Quit Noise Mixer",{command:"os.closeFocused",accel:{key:"Q",alt:!0}})]),m.section("sounds","Sounds",[m.item("sounds.stopAll","Stop All Sounds",{command:"whitenoise.stopAll",accel:{key:"S",alt:!0}}),m.sep("sounds.sep1"),m.submenu("sounds.nature","Nature Sounds",[m.item("sounds.nature.rain","Rain",{command:"whitenoise.toggleSound",args:{soundId:"rain"},checked:!1}),m.item("sounds.nature.waves","Ocean Waves",{command:"whitenoise.toggleSound",args:{soundId:"waves"},checked:!1}),m.item("sounds.nature.forest","Forest",{command:"whitenoise.toggleSound",args:{soundId:"forest"},checked:!1}),m.item("sounds.nature.birds","Birds",{command:"whitenoise.toggleSound",args:{soundId:"birds"},checked:!1}),m.item("sounds.nature.wind","Wind",{command:"whitenoise.toggleSound",args:{soundId:"wind"},checked:!1}),m.item("sounds.nature.river","River Stream",{command:"whitenoise.toggleSound",args:{soundId:"river"},checked:!1}),m.item("sounds.nature.thunder","Thunderstorm",{command:"whitenoise.toggleSound",args:{soundId:"thunder"},checked:!1})]),m.submenu("sounds.ambient","Ambient Sounds",[m.item("sounds.ambient.campfire","Campfire",{command:"whitenoise.toggleSound",args:{soundId:"campfire"},checked:!1}),m.item("sounds.ambient.cafe","Cafe Ambience",{command:"whitenoise.toggleSound",args:{soundId:"cafe"},checked:!1}),m.item("sounds.ambient.library","Library",{command:"whitenoise.toggleSound",args:{soundId:"library"},checked:!1}),m.item("sounds.ambient.city","City Traffic",{command:"whitenoise.toggleSound",args:{soundId:"city"},checked:!1})]),m.submenu("sounds.transport","Transport Sounds",[m.item("sounds.transport.airplane","Airplane Cabin",{command:"whitenoise.toggleSound",args:{soundId:"airplane"},checked:!1}),m.item("sounds.transport.train","Train Journey",{command:"whitenoise.toggleSound",args:{soundId:"train"},checked:!1})]),m.submenu("sounds.other","Other Sounds",[m.item("sounds.other.whale","Whale",{command:"whitenoise.toggleSound",args:{soundId:"whale"},checked:!1}),m.item("sounds.other.heartbeat","Heartbeat",{command:"whitenoise.toggleSound",args:{soundId:"heartbeat"},checked:!1})])]),m.section("presets","Presets",[m.item("presets.focus","Focus",{command:"whitenoise.loadPreset",args:{preset:"focus"},accel:{key:"1",alt:!0}}),m.item("presets.sleep","Sleep",{command:"whitenoise.loadPreset",args:{preset:"sleep"},accel:{key:"2",alt:!0}}),m.item("presets.nature","Nature",{command:"whitenoise.loadPreset",args:{preset:"nature"},accel:{key:"3",alt:!0}}),m.item("presets.city","City Life",{command:"whitenoise.loadPreset",args:{preset:"city"},accel:{key:"4",alt:!0}}),m.item("presets.storm","Stormy Night",{command:"whitenoise.loadPreset",args:{preset:"storm"},accel:{key:"5",alt:!0}}),m.sep("presets.sep1"),m.item("presets.save","Save Current as Preset…",{command:"whitenoise.savePreset",enabled:!1}),m.item("presets.manage","Manage Presets…",{command:"whitenoise.managePresets",enabled:!1})]),m.section("volume","Volume",[m.item("volume.masterUp","Master Volume Up",{command:"whitenoise.masterVolumeUp",accel:{key:"ArrowUp",alt:!0}}),m.item("volume.masterDown","Master Volume Down",{command:"whitenoise.masterVolumeDown",accel:{key:"ArrowDown",alt:!0}}),m.item("volume.mute","Mute All",{command:"whitenoise.muteAll",accel:{key:"M",alt:!0},checked:!1}),m.sep("volume.sep1"),m.item("volume.fadeIn","Fade In",{command:"whitenoise.fadeIn",enabled:!1}),m.item("volume.fadeOut","Fade Out",{command:"whitenoise.fadeOut",enabled:!1})]),m.section("view","View",[m.item("view.zoom","Zoom",{command:"view.toggleZoom",accel:{key:"Z",alt:!0}}),m.item("view.fullscreen","Enter Full Screen",{command:"view.toggleFullScreen",accel:{key:"F",alt:!0,shift:!0}}),m.sep("view.sep1"),m.item("view.compactMode","Compact Mode",{command:"whitenoise.toggleCompactMode",checked:!1,enabled:!1}),m.item("view.showVolumeSliders","Show Volume Sliders",{command:"whitenoise.toggleVolumeSliders",checked:!0,enabled:!1})]),m.section("window","Window",[m.item("window.minimize","Minimize",{command:"os.minimizeFocused",accel:{key:"M",alt:!0}}),m.item("window.close","Close Window",{command:"os.closeFocused",accel:{key:"W",alt:!0}}),m.item("window.cycle","Cycle Windows",{command:"os.cycleWindows",accel:{key:"`",alt:!0}}),m.sep("window.sep1"),m.item("window.bringAllToFront","Bring All to Front",{enabled:!1})]),m.section("help","Help",[m.item("help.soundLibrary","Sound Library Info",{command:"whitenoise.showSoundInfo",enabled:!1}),m.item("help.keyboardShortcuts","Keyboard Shortcuts",{command:"system.showShortcuts",accel:{key:"/",alt:!0}}),m.sep("help.sep1"),m.item("help.tips","Usage Tips",{command:"whitenoise.showTips",enabled:!1}),m.item("help.audioSettings","Audio Settings Help",{command:"whitenoise.showAudioHelp",enabled:!1})])])}function IS(t,e,n){const s=e.length?e.map(i=>m.item(`dock.${t}.win.${i.id}`,i.title&&i.title.trim().length?i.title:`Window ${i.id}`,{command:"os.restoreWindowById",args:{id:i.id}})):[m.item(`dock.${t}.empty`,"No minimized windows",{enabled:!1})];return m.template(`dock-${t}`,n??"Windows",[m.section("windows","Windows",s)])}function ES(){return nd()}function kS(t,e){switch((t||"").toLowerCase()){case"finder":return yS();case"textedit":return vS();case"typingtest":return _S();case"keystation":return wS();case"yahoomessenger":return bS();case"whitenoise":return TS();case"about":return nd();default:return{...nd(),id:`app-${t||"unknown"}`,title:e??"App"}}}function Ss(t){if(!t)return;const{$config:e}=pt(),n=e.app.baseURL||"/";if(t.startsWith("http")||t.startsWith("data:"))return t;const s=t.startsWith("/")?t.slice(1):t;return`${n}${s}`}const AS=["aria-expanded"],SS=["src"],CS={key:1,class:"logo-fallback"},RS={class:"app-name"},PS=["data-index","aria-expanded","onClick","onMouseenter"],xS={class:"menu-right"},MS={class:"clock"},DS=ct({name:"OsMenuBar",__name:"MenuBar",setup(t){const e=rt(),n=_t(),s=te(null),i=te(Ss("/icons/system/apple.png")||null);let r;nn(()=>{e.tickClock(),r=window.setInterval(()=>e.tickClock(),1e3)}),_n(()=>{r&&window.clearInterval(r)});const o=xe(()=>{const C=e.activeAppId;if(!C)return ES();const P=n.registry[C]?.title;return kS(C,P)}),a=xe(()=>{const C=e.activeAppId;return C?n.registry[C]?.title??"App":"Webintosh"}),c=xe(()=>e.menu.openType==="menubar"),u=xe(()=>{const C=e.menu.menubarIndex??0;return o.value.sections[C]?.entries??[]}),d=te({x:10,y:40});function h(C){const P=C.currentTarget;if(!P)return;const O=P.getBoundingClientRect();d.value={x:Math.round(O.left+4),y:Math.round(O.bottom)}}function p(C,P){h(P),e.openMenubar(C)}function y(C,P){c.value&&e.menu.menubarIndex!==C&&(h(P),e.openMenubar(C))}function _(){e.closeMenu()}function I(C){const P=s.value;return P?P.querySelector(`[data-index="${C}"]`):null}function k(C){const P=I(C);if(!P)return;const O=P.getBoundingClientRect();d.value={x:Math.round(O.left+4),y:Math.round(O.bottom)}}function N(C){k(C),e.openMenubar(C)}function L(){const C=o.value.sections.length,O=((e.menu.menubarIndex??0)-1+C)%C;N(O)}function R(){const C=o.value.sections.length,O=((e.menu.menubarIndex??0)+1)%C;N(O)}return(C,P)=>{const O=E_;return $(),z("header",{class:"menu-bar",onClick:P[3]||(P[3]=b=>we(e).closeMenu())},[v("div",{ref_key:"menuLeftEl",ref:s,class:"menu-left",role:"menubar"},[v("button",{class:"menu-logo",role:"menuitem","aria-haspopup":"true","data-index":0,"aria-expanded":c.value?"true":"false",onClick:P[1]||(P[1]=Ke(b=>p(0,b),["stop"])),onMouseenter:P[2]||(P[2]=b=>y(0,b))},[i.value?($(),z("img",{key:0,src:i.value,alt:"Logo",class:"logo-icon",onError:P[0]||(P[0]=b=>i.value=null)},null,40,SS)):($(),z("span",CS,"🍎"))],40,AS),v("span",RS,X(a.value),1),($(!0),z(ye,null,Ve(o.value.sections.slice(1),(b,w)=>($(),z("button",{key:b.id,class:"menu-item",role:"menuitem","aria-haspopup":"true","data-index":w+1,"aria-expanded":c.value&&we(e).menu.menubarIndex===w+1?"true":"false",onClick:Ke(T=>p(w+1,T),["stop"]),onMouseenter:T=>y(w+1,T)},X(b.label),41,PS))),128))],512),v("div",xS,[v("span",MS,X(we(e).clock),1)]),($(),Ze(Hd,{to:"body"},[c.value&&u.value.length?($(),Ze(O,{key:0,entries:u.value,origin:d.value,z:2e3,onExecuted:_,onNavLeft:L,onNavRight:R},null,8,["entries","origin"])):Qe("",!0)]))])}}}),NS=Object.assign(vt(DS,[["__scopeId","data-v-9516b1c8"]]),{__name:"OsMenuBar"}),OS=["title"],VS=["src","alt"],LS={key:1,class:"icon-emoji","aria-hidden":"true"},FS={class:"icon-label"},$S=ct({name:"OsDesktopIcon",__name:"DesktopIcon",props:{title:{},icon:{},emoji:{},x:{},y:{}},emits:["open","context","move"],setup(t,{emit:e}){const n=t,s=e,i=_t(),r=te(!1),o=te(n.x??0),a=te(n.y??0),c=te(!1),u=xe(()=>Ss(n.icon));an(()=>n.x,p=>{p!==void 0&&!r.value&&(o.value=p)}),an(()=>n.y,p=>{p!==void 0&&!r.value&&(a.value=p)});const d=xe(()=>n.x!==void 0&&n.y!==void 0?{position:"absolute",left:`${o.value}px`,top:`${a.value}px`,opacity:r.value?.6:1,transition:r.value?"none":"opacity 0.2s"}:{});function h(p){if(p.button!==0)return;p.preventDefault();const y=p.clientX,_=p.clientY,I=o.value,k=a.value;r.value=!0;function N(R){const C=R.clientX-y,P=R.clientY-_,O=window.innerWidth,b=window.innerHeight,w={small:{width:72,height:68},medium:{width:88,height:80},large:{width:104,height:92}},{width:T,height:A}=w[i.iconSize],D=40,x=8,S=I+C,ve=k+P;o.value=Math.max(0,Math.min(S,O-T-x)),a.value=Math.max(0,Math.min(ve,b-D-A))}function L(){r.value=!1,s("move",{x:o.value,y:a.value}),document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",L)}document.addEventListener("mousemove",N),document.addEventListener("mouseup",L)}return(p,y)=>($(),z("div",{class:Ee(["desktop-icon",`icon-size-${we(i).iconSize}`]),style:nt(d.value),onMousedown:h},[v("button",{class:"icon-button",title:p.title,onDblclick:y[1]||(y[1]=Ke(_=>p.$emit("open"),["stop"])),onContextmenu:y[2]||(y[2]=Ke(_=>p.$emit("context",_),["prevent","stop"]))},[u.value&&!c.value?($(),z("img",{key:0,src:u.value,alt:p.title,class:"icon-svg","aria-hidden":"true",onError:y[0]||(y[0]=_=>c.value=!0)},null,40,VS)):($(),z("span",LS,X(p.emoji||"🗂️"),1)),v("span",FS,X(p.title),1)],40,OS)],38))}}),US=Object.assign(vt($S,[["__scopeId","data-v-5921bd9c"]]),{__name:"OsDesktopIcon"}),jS={class:"icons-container",role:"grid"},BS=ct({name:"OsDesktopIcons",__name:"DesktopIcons",setup(t){const e=_t(),n=rt(),s=xe(()=>e.getSortedAppList().filter(u=>u.showOnDesktop!==!1));function i(u,d){const h=e.iconPositions[u];if(h)return h.x;const p=100,y=100,N=(typeof window<"u"?window.innerHeight:768)-40-20,L=Math.floor(N/p),R=Math.floor(d/L);return e.iconLayoutDirection==="right"?(typeof window<"u"?window.innerWidth:1280)-y-R*y-20:20+R*y}function r(u,d){const h=e.iconPositions[u];if(h)return h.y;const p=100,y=20,k=(typeof window<"u"?window.innerHeight:768)-40-y,N=Math.floor(k/p),L=d%N;return y+L*p}function o(u,d){e.setIconPosition(u,d.x,d.y)}function a(u){const h=n.windows.filter(_=>_.appId===u&&_.minimized).sort((_,I)=>I.zIndex-_.zIndex)[0];if(h){n.restoreWindow(h.id);return}const y=n.windows.filter(_=>_.appId===u&&!_.minimized).sort((_,I)=>I.zIndex-_.zIndex)[0];if(y){n.bringToFront(y.id);return}xn("app.newWindow",{appId:u})}function c(u,d){const h=m.template(`desktop-app-context-${u}`,"Webintosh",[m.section("app","App",[m.item("app.open","Open",{command:"app.newWindow",args:{appId:u}})])]);n.openContext(d.clientX,d.clientY,h)}return(u,d)=>{const h=US;return $(),z("div",jS,[($(!0),z(ye,null,Ve(s.value,(p,y)=>($(),Ze(h,{key:p.id,title:p.title,icon:p.icon,emoji:p.emoji??"🗂️",x:i(p.id,y),y:r(p.id,y),onOpen:_=>a(p.id),onContext:_=>c(p.id,_),onMove:_=>o(p.id,_)},null,8,["title","icon","emoji","x","y","onOpen","onContext","onMove"]))),128))])}}}),zS=Object.assign(vt(BS,[["__scopeId","data-v-7aeb3560"]]),{__name:"OsDesktopIcons"}),HS=ct({name:"OsDesktop",__name:"Desktop",setup(t){const e=rt(),n=_t(),s=xe(()=>m.template("desktop-context","Webintosh",[m.section("wallpaper","Wallpaper",[m.item("ctx.changeWallpaper","Change Wallpaper...",{command:"desktop.changeWallpaper"})]),m.section("icons","Icons",[m.item("ctx.cleanUp","Clean Up Icons",{command:"desktop.cleanUpIcons"}),m.submenu("ctx.iconSorting","Sort Icons By",[m.item("ctx.sort.name","Name",{command:"desktop.sortIcons",args:{sortBy:"name"}}),m.item("ctx.sort.type","Type",{command:"desktop.sortIcons",args:{sortBy:"type"}})]),m.submenu("ctx.iconDirection","Icon Direction",[m.item("ctx.dir.left","Start from Left",{command:"desktop.setIconDirection",args:{direction:"left"},checked:n.iconLayoutDirection==="left"}),m.item("ctx.dir.right","Start from Right",{command:"desktop.setIconDirection",args:{direction:"right"},checked:n.iconLayoutDirection==="right"})]),m.submenu("ctx.iconSize","Icon Size",[m.item("ctx.size.small","Small",{command:"desktop.setIconSize",args:{size:"small"},checked:n.iconSize==="small"}),m.item("ctx.size.medium","Medium",{command:"desktop.setIconSize",args:{size:"medium"},checked:n.iconSize==="medium"}),m.item("ctx.size.large","Large",{command:"desktop.setIconSize",args:{size:"large"},checked:n.iconSize==="large"})])])]));an([()=>n.iconLayoutDirection,()=>n.iconSize],()=>{e.menu.openType==="context"&&e.menu.contextTemplate?.id==="desktop-context"&&(e.menu.contextTemplate=s.value)});function i(){e.closeMenu(),e.setFocused(null)}function r(o){e.openContext(o.clientX,o.clientY,s.value)}return(o,a)=>{const c=zS;return $(),z("div",{class:"os-desktop",onClick:i,onContextmenu:Ke(r,["prevent"])},[qe(c)],32)}}}),WS=Object.assign(vt(HS,[["__scopeId","data-v-f7a26b7e"]]),{__name:"OsDesktop"}),qS={class:"finder-app"},KS={class:"finder-sidebar"},GS={class:"sidebar-section"},QS=["onClick"],YS={class:"sidebar-icon"},JS={class:"sidebar-label"},XS={class:"finder-content"},ZS={class:"finder-toolbar"},eC={class:"toolbar-section"},tC={class:"toolbar-title"},nC={class:"finder-files"},sC=["onClick","onDblclick"],iC={class:"file-icon"},rC=["src","alt"],oC={key:1,class:"file-icon-emoji"},aC={class:"file-name"},lC=ct({name:"FinderApp",__name:"index",setup(t){const e=_t();rt();const n=te("documents"),s=te(null),i=[{id:"applications",name:"Applications",icon:"🚀"},{id:"documents",name:"Documents",icon:"📄"},{id:"images",name:"Images",icon:"🖼️"},{id:"music",name:"Music",icon:"🎵"},{id:"videos",name:"Videos",icon:"🎬"},{id:"trash",name:"Trash",icon:"🗑️"}],r=()=>Object.values(e.registry).map(d=>({id:`app-${d.id}`,name:d.title,iconPath:d.icon,iconEmoji:d.emoji||"📱",type:"app",appId:d.id})),o={applications:r(),documents:[{id:"doc-1",name:"Welcome.txt",iconEmoji:"📄",type:"file"},{id:"doc-2",name:"Notes.md",iconEmoji:"📝",type:"file"}],images:[{id:"img-1",name:"Screenshot.png",iconEmoji:"🖼️",type:"file"},{id:"img-2",name:"Wallpaper.jpg",iconEmoji:"🖼️",type:"file"}],music:[{id:"music-1",name:"Playlist.m3u",iconEmoji:"🎵",type:"file"}],videos:[{id:"vid-1",name:"Demo.mp4",iconEmoji:"🎬",type:"file"}],trash:[]},a=xe(()=>i.find(h=>h.id===n.value)?.name||"Finder"),c=xe(()=>n.value==="applications"?r():o[n.value]||[]),u=d=>{console.log("Opening file:",d.name),d.type==="app"&&d.appId&&e.launchOrFocus(d.appId)};return(d,h)=>($(),z("div",qS,[v("div",KS,[v("div",GS,[h[0]||(h[0]=v("div",{class:"sidebar-title"},"Folders",-1)),($(),z(ye,null,Ve(i,p=>v("button",{key:p.id,onClick:y=>n.value=p.id,class:Ee(["sidebar-item",{active:n.value===p.id}])},[v("span",YS,X(p.icon),1),v("span",JS,X(p.name),1)],10,QS)),64))])]),v("div",XS,[v("div",ZS,[h[1]||(h[1]=fn('<div class="toolbar-section" data-v-9a46d674><button class="toolbar-button" title="Back" data-v-9a46d674><span class="toolbar-icon" data-v-9a46d674>←</span></button><button class="toolbar-button" title="Forward" data-v-9a46d674><span class="toolbar-icon" data-v-9a46d674>→</span></button></div>',1)),v("div",eC,[v("div",tC,X(a.value),1)]),h[2]||(h[2]=fn('<div class="toolbar-section" data-v-9a46d674><button class="toolbar-button" title="View" data-v-9a46d674><span class="toolbar-icon" data-v-9a46d674>⊞</span></button><button class="toolbar-button" title="Settings" data-v-9a46d674><span class="toolbar-icon" data-v-9a46d674>⚙</span></button></div>',1))]),v("div",nC,[($(!0),z(ye,null,Ve(c.value,p=>($(),z("div",{key:p.id,class:Ee(["file-item",{selected:s.value===p.id}]),onClick:y=>s.value=p.id,onDblclick:y=>u(p)},[v("div",iC,[p.iconPath?($(),z("img",{key:0,src:p.iconPath,alt:p.name,class:"file-icon-img"},null,8,rC)):($(),z("span",oC,X(p.iconEmoji||"📄"),1))]),v("div",aC,X(p.name),1)],42,sC))),128))])])]))}}),cC=Object.assign(vt(lC,[["__scopeId","data-v-9a46d674"]]),{__name:"AppsFinder"}),uC={class:"textedit-app"},dC={key:0,class:"toolbar"},hC={class:"toolbar-group"},fC={class:"toolbar-group"},pC={class:"toolbar-group"},mC={class:"toolbar-group"},gC={class:"modal"},yC={class:"modal-body"},vC={class:"filename-input-wrapper"},_C=ct({name:"TextEditApp",__name:"index",props:{windowId:{}},setup(t){const e=te(),n=te("-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"),s=te("3"),i=te(!0),r=te(100),o=vn({bold:!1,italic:!1,underline:!1,strikeThrough:!1,justifyLeft:!1,justifyCenter:!1,justifyRight:!1,justifyFull:!1,insertUnorderedList:!1,insertOrderedList:!1}),a=te("Untitled"),c=te(!1),u=te(""),d=te(),h=t,p=rt();an(a,J=>{if(h.windowId){const H=p.windows.find(se=>se.id===h.windowId);H&&(H.title=J)}});const y=()=>ce("bold"),_=()=>ce("italic"),I=()=>ce("underline"),k=()=>ce("strikeThrough"),N=()=>ce("justifyLeft"),L=()=>ce("justifyCenter"),R=()=>ce("justifyRight"),C=()=>ce("justifyFull"),P=()=>ce("insertUnorderedList"),O=()=>ce("insertOrderedList"),b=()=>ce("indent"),w=()=>ce("outdent"),T=()=>ce("removeFormat"),A=()=>{document.execCommand("undo"),e.value?.focus()},D=()=>{document.execCommand("redo"),e.value?.focus()},x=()=>{document.execCommand("cut"),e.value?.focus()},S=()=>{document.execCommand("copy"),e.value?.focus()},ve=()=>{document.execCommand("paste"),e.value?.focus()},Se=()=>{navigator.clipboard.readText().then(J=>{document.execCommand("insertText",!1,J),e.value?.focus()})},re=()=>{document.execCommand("selectAll"),e.value?.focus()},fe=()=>{const J=parseInt(s.value);J>1&&(s.value=String(J-1),K())},le=()=>{const J=parseInt(s.value);J<7&&(s.value=String(J+1),K())},Le=()=>{r.value<200&&(r.value+=10,e.value&&(e.value.style.zoom=`${r.value}%`))},St=()=>{r.value>50&&(r.value-=10,e.value&&(e.value.style.zoom=`${r.value}%`))},Et=()=>{r.value=100,e.value&&(e.value.style.zoom="100%")},He=()=>{i.value=!i.value},je=()=>{window.print()},Me=()=>{console.log("Open file feature not yet implemented")},ce=(J,H)=>{document.execCommand(J,!1,H),e.value?.focus(),F()},W=J=>o[J]||!1,F=()=>{o.bold=document.queryCommandState("bold"),o.italic=document.queryCommandState("italic"),o.underline=document.queryCommandState("underline"),o.strikeThrough=document.queryCommandState("strikeThrough"),o.justifyLeft=document.queryCommandState("justifyLeft"),o.justifyCenter=document.queryCommandState("justifyCenter"),o.justifyRight=document.queryCommandState("justifyRight"),o.justifyFull=document.queryCommandState("justifyFull"),o.insertUnorderedList=document.queryCommandState("insertUnorderedList"),o.insertOrderedList=document.queryCommandState("insertOrderedList");const J=document.queryCommandValue("fontName");if(J){const se=J.replace(/['"]/g,""),ne=Array.from(document.querySelectorAll(".font-selector option")).find(ge=>ge.getAttribute("value")?.includes(se));ne&&(n.value=ne.getAttribute("value")||n.value)}const H=document.queryCommandValue("fontSize");H&&(s.value=H)},B=()=>{ce("fontName",n.value)},K=()=>{ce("fontSize",s.value)},ue=()=>{F()},Te=J=>{if(J.metaKey||J.ctrlKey)switch(J.key){case"b":J.preventDefault(),ce("bold");break;case"i":J.preventDefault(),ce("italic");break;case"u":J.preventDefault(),ce("underline");break}},$e=J=>{J.preventDefault();const H=J.clipboardData?.getData("text/html")||J.clipboardData?.getData("text/plain");H&&document.execCommand("insertHTML",!1,H)},M=()=>{F()},V=()=>{Z()},j=()=>{Z()},Z=()=>{c.value=!0,u.value=a.value==="Untitled"?"":a.value,as(()=>{d.value?.focus(),d.value?.select()})},Q=()=>{c.value=!1,u.value=""},ee=()=>{const J=u.value.trim()||"Untitled",H=J.endsWith(".md")?J:`${J}.md`,se=H.replace(/\.(md|txt|rtf|html)$/i,"");a.value=se,console.log("Would save file:",H),Q()};return nn(()=>{oe("textedit.save",V),oe("textedit.saveAs",j),oe("textedit.open",Me),oe("textedit.print",je),oe("textedit.undo",A),oe("textedit.redo",D),oe("textedit.cut",x),oe("textedit.copy",S),oe("textedit.paste",ve),oe("textedit.pasteAndMatchStyle",Se),oe("textedit.selectAll",re),oe("textedit.bold",y),oe("textedit.italic",_),oe("textedit.underline",I),oe("textedit.strikethrough",k),oe("textedit.alignLeft",N),oe("textedit.alignCenter",L),oe("textedit.alignRight",R),oe("textedit.justify",C),oe("textedit.bulletList",P),oe("textedit.numberedList",O),oe("textedit.increaseIndent",b),oe("textedit.decreaseIndent",w),oe("textedit.clearFormatting",T),oe("textedit.fontSizeSmaller",fe),oe("textedit.fontSizeLarger",le),oe("textedit.zoomIn",Le),oe("textedit.zoomOut",St),oe("textedit.zoomReset",Et),oe("textedit.toggleToolbar",He),document.addEventListener("selectionchange",M),e.value?.addEventListener("click",F),e.value?.addEventListener("keyup",F),F()}),_n(()=>{document.removeEventListener("selectionchange",M)}),(J,H)=>($(),z("div",uC,[i.value?($(),z("div",dC,[v("div",hC,[v("button",{onClick:y,class:Ee({active:W("bold")}),title:"Bold (Cmd+B)"},H[3]||(H[3]=[v("strong",null,"B",-1)]),2),v("button",{onClick:_,class:Ee({active:W("italic")}),title:"Italic (Cmd+I)"},H[4]||(H[4]=[v("em",null,"I",-1)]),2),v("button",{onClick:I,class:Ee({active:W("underline")}),title:"Underline (Cmd+U)"},H[5]||(H[5]=[v("u",null,"U",-1)]),2),v("button",{onClick:k,class:Ee({active:W("strikeThrough")}),title:"Strikethrough"},H[6]||(H[6]=[v("s",null,"S",-1)]),2)]),H[16]||(H[16]=v("div",{class:"toolbar-divider"},null,-1)),v("div",fC,[v("button",{onClick:N,class:Ee({active:W("justifyLeft")}),title:"Align Left"},H[7]||(H[7]=[v("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor"},[v("path",{d:"M2 3h12v1H2zM2 6h8v1H2zM2 9h12v1H2zM2 12h8v1H2z"})],-1)]),2),v("button",{onClick:L,class:Ee({active:W("justifyCenter")}),title:"Align Center"},H[8]||(H[8]=[v("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor"},[v("path",{d:"M4 3h8v1H4zM2 6h12v1H2zM4 9h8v1H4zM2 12h12v1H2z"})],-1)]),2),v("button",{onClick:R,class:Ee({active:W("justifyRight")}),title:"Align Right"},H[9]||(H[9]=[v("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor"},[v("path",{d:"M2 3h12v1H2zM6 6h8v1H6zM2 9h12v1H2zM6 12h8v1H6z"})],-1)]),2),v("button",{onClick:C,class:Ee({active:W("justifyFull")}),title:"Justify"},H[10]||(H[10]=[v("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor"},[v("path",{d:"M2 3h12v1H2zM2 6h12v1H2zM2 9h12v1H2zM2 12h12v1H2z"})],-1)]),2)]),H[17]||(H[17]=v("div",{class:"toolbar-divider"},null,-1)),v("div",pC,[v("button",{onClick:P,class:Ee({active:W("insertUnorderedList")}),title:"Bullet List"},H[11]||(H[11]=[fn('<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" data-v-a9b2a7e3><circle cx="3" cy="4" r="1" data-v-a9b2a7e3></circle><circle cx="3" cy="8" r="1" data-v-a9b2a7e3></circle><circle cx="3" cy="12" r="1" data-v-a9b2a7e3></circle><path d="M6 3.5h8v1H6zM6 7.5h8v1H6zM6 11.5h8v1H6z" data-v-a9b2a7e3></path></svg>',1)]),2),v("button",{onClick:O,class:Ee({active:W("insertOrderedList")}),title:"Numbered List"},H[12]||(H[12]=[fn('<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" data-v-a9b2a7e3><text x="2" y="5" font-size="5" font-family="Arial" data-v-a9b2a7e3>1</text><text x="2" y="9" font-size="5" font-family="Arial" data-v-a9b2a7e3>2</text><text x="2" y="13" font-size="5" font-family="Arial" data-v-a9b2a7e3>3</text><path d="M6 3.5h8v1H6zM6 7.5h8v1H6zM6 11.5h8v1H6z" data-v-a9b2a7e3></path></svg>',1)]),2)]),H[18]||(H[18]=v("div",{class:"toolbar-divider"},null,-1)),v("div",mC,[Xt(v("select",{"onUpdate:modelValue":H[0]||(H[0]=se=>n.value=se),onChange:B,class:"font-selector"},H[13]||(H[13]=[fn('<option value="-apple-system, BlinkMacSystemFont, &#39;Segoe UI&#39;, Roboto, sans-serif" data-v-a9b2a7e3>System</option><option value="&#39;Helvetica Neue&#39;, Helvetica, Arial, sans-serif" data-v-a9b2a7e3>Helvetica</option><option value="&#39;Times New Roman&#39;, Times, serif" data-v-a9b2a7e3>Times</option><option value="Georgia, serif" data-v-a9b2a7e3>Georgia</option><option value="&#39;Courier New&#39;, Courier, monospace" data-v-a9b2a7e3>Courier</option><option value="&#39;Monaco&#39;, &#39;Courier New&#39;, monospace" data-v-a9b2a7e3>Monaco</option><option value="&#39;Arial&#39;, sans-serif" data-v-a9b2a7e3>Arial</option><option value="&#39;Verdana&#39;, sans-serif" data-v-a9b2a7e3>Verdana</option><option value="&#39;Comic Sans MS&#39;, cursive" data-v-a9b2a7e3>Comic Sans</option>',9)]),544),[[Io,n.value]]),Xt(v("select",{"onUpdate:modelValue":H[1]||(H[1]=se=>s.value=se),onChange:K,class:"size-selector"},H[14]||(H[14]=[fn('<option value="1" data-v-a9b2a7e3>8pt</option><option value="2" data-v-a9b2a7e3>10pt</option><option value="3" data-v-a9b2a7e3>12pt</option><option value="4" data-v-a9b2a7e3>14pt</option><option value="5" data-v-a9b2a7e3>18pt</option><option value="6" data-v-a9b2a7e3>24pt</option><option value="7" data-v-a9b2a7e3>36pt</option>',7)]),544),[[Io,s.value]])]),H[19]||(H[19]=v("div",{class:"toolbar-divider"},null,-1)),v("div",{class:"toolbar-group"},[v("button",{onClick:T,title:"Clear Formatting"},H[15]||(H[15]=[v("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor"},[v("path",{d:"M8.5 2L3 7.5 4.5 9l2-2v7h2V7l2 2L12 7.5 8.5 2zM2 14h12v1H2z"})],-1)]))])])):Qe("",!0),v("div",{ref_key:"editor",ref:e,class:"editor",contenteditable:"true",onInput:ue,onKeydown:Te,onPaste:$e,spellcheck:"true","data-placeholder":"Start typing...",style:nt({zoom:`${r.value}%`})},null,36),c.value?($(),z("div",{key:1,class:"modal-overlay",onClick:Ke(Q,["self"])},[v("div",gC,[v("div",{class:"modal-header"},[H[20]||(H[20]=v("h3",null,"Save File",-1)),v("button",{class:"modal-close",onClick:Q},"×")]),v("div",yC,[H[22]||(H[22]=v("label",{for:"filename"},"Save as:",-1)),v("div",vC,[Xt(v("input",{id:"filename","onUpdate:modelValue":H[2]||(H[2]=se=>u.value=se),type:"text",placeholder:"Untitled",onKeyup:[ul(ee,["enter"]),ul(Q,["escape"])],ref_key:"saveInput",ref:d},null,544),[[ns,u.value]]),H[21]||(H[21]=v("span",{class:"filename-extension"},".md",-1))])]),v("div",{class:"modal-footer"},[v("button",{class:"modal-button cancel",onClick:Q},"Cancel"),v("button",{class:"modal-button save",onClick:ee},"Save")])])])):Qe("",!0)]))}}),wC=Object.assign(vt(_C,[["__scopeId","data-v-a9b2a7e3"]]),{__name:"AppsTextEdit"});function k_(){const t=te(!1);nn(()=>{t.value=navigator.platform.toLowerCase().includes("mac")||navigator.userAgent.toLowerCase().includes("mac")});const e=xe(()=>t.value?"ctrlKey":"altKey"),n=xe(()=>t.value?"Ctrl":"Alt"),s=xe(()=>t.value?"⌃":"Alt");function i(o){return t.value?o.ctrlKey&&!o.metaKey&&!o.altKey:o.altKey&&!o.metaKey&&!o.ctrlKey}function r(o,a=!1){const c=t.value?"⌃":"Alt",u=a?t.value?"⇧":"Shift + ":"",d=o==="`"?"`":o==="/"?"/":o.toUpperCase();return t.value?`${c}${u}${d}`:a?`Alt + Shift + ${d}`:`Alt + ${d}`}return{isMac:t,modifierKey:e,modifierName:n,modifierSymbol:s,isModifierPressed:i,formatShortcut:r}}const bC={class:"shortcuts-app"},TC={class:"note"},IC={class:"shortcuts-section"},EC={class:"shortcut-item"},kC={class:"keys"},AC={class:"shortcut-item"},SC={class:"keys"},CC={class:"shortcut-item"},RC={class:"keys"},PC={class:"shortcut-item"},xC={class:"keys"},MC={class:"shortcut-item"},DC={class:"keys"},NC={class:"shortcuts-section"},OC={class:"shortcut-item"},VC={class:"keys"},LC=ct({name:"ShortcutsApp",__name:"index",setup(t){const{isMac:e,formatShortcut:n}=k_();return(s,i)=>($(),z("div",bC,[i[15]||(i[15]=v("h2",null,"Keyboard Shortcuts",-1)),v("div",TC,[v("p",null,[i[6]||(i[6]=v("strong",null,"Note:",-1)),we(e)?($(),z(ye,{key:0},[i[0]||(i[0]=pi(" We use ",-1)),i[1]||(i[1]=v("strong",null,"Ctrl (⌃)",-1)),i[2]||(i[2]=pi(" on Mac instead of Cmd (⌘) to avoid browser conflicts. ",-1))],64)):($(),z(ye,{key:1},[i[3]||(i[3]=pi(" We use ",-1)),i[4]||(i[4]=v("strong",null,"Alt",-1)),i[5]||(i[5]=pi(" instead of Ctrl to avoid browser conflicts. ",-1))],64))])]),v("div",IC,[i[12]||(i[12]=v("h3",null,"Window Management",-1)),v("div",EC,[v("span",kC,X(we(n)("n")),1),i[7]||(i[7]=v("span",{class:"description"},"New Window",-1))]),v("div",AC,[v("span",SC,X(we(n)("w")),1),i[8]||(i[8]=v("span",{class:"description"},"Close Window",-1))]),v("div",CC,[v("span",RC,X(we(n)("m")),1),i[9]||(i[9]=v("span",{class:"description"},"Minimize Window",-1))]),v("div",PC,[v("span",xC,X(we(n)("z")),1),i[10]||(i[10]=v("span",{class:"description"},"Toggle Zoom",-1))]),v("div",MC,[v("span",DC,X(we(n)("`")),1),i[11]||(i[11]=v("span",{class:"description"},"Cycle Windows",-1))])]),v("div",NC,[i[14]||(i[14]=v("h3",null,"System",-1)),v("div",OC,[v("span",VC,X(we(n)("/")),1),i[13]||(i[13]=v("span",{class:"description"},"Show Shortcuts",-1))])]),i[16]||(i[16]=v("div",{class:"shortcuts-section"},[v("h3",null,"Navigation"),v("div",{class:"shortcut-item"},[v("span",{class:"keys"},"Esc"),v("span",{class:"description"},"Cancel drag/resize, Close menus")])],-1))]))}}),FC=Object.assign(vt(LC,[["__scopeId","data-v-2cd96dc8"]]),{__name:"AppsShortcuts"}),$C={class:"about-app"},UC={class:"about-tabs"},jC=["onClick"],BC={class:"about-content"},zC={key:0,class:"tab-content"},HC={class:"about-header"},WC={class:"about-icon"},qC={class:"icon-emoji"},KC={class:"about-title"},GC={class:"about-version"},QC={class:"about-tagline"},YC={class:"about-details"},JC={class:"about-description"},XC={class:"about-info"},ZC={class:"info-label"},eR=["href"],tR={key:1,class:"info-value"},nR={key:1,class:"tab-content"},sR={class:"features-list"},iR={key:2,class:"tab-content"},rR={class:"changelog"},oR={class:"release-header"},aR={class:"release-version"},lR={class:"release-date"},cR={class:"release-changes"},uR={key:3,class:"tab-content"},dR=ct({name:"AboutApp",__name:"index",setup(t){const e={app:{name:"Webintosh",version:"0.1.2",tagline:"A web-based desktop environment",description:"Webintosh brings the familiar desktop experience to your browser.",icon:"🖥️"},info:{repository:{label:"Repository",value:"GitHub",url:"https://github.com/rahul-akumar/webintosh"},license:{label:"License",value:"MIT"},author:{label:"Author",value:"Rahul Kumar"}},features:["Window management with dragging and resizing","Dynamic menubar that adapts to focused app","Dock with app launching and window restoration","Desktop with draggable app icons","Keyboard shortcuts (Alt-based)"],changelog:[{version:"0.1.2",date:"2025-08-17",changes:["Added viewport-aware window bounds","Improved dock functionality"]},{version:"0.1.0",date:"2025-08-15",changes:["Initial release"]}],credits:"Built with Nuxt 4, Vue 3, and TypeScript. 2025 Webintosh Project"},n=te("general"),s=[{id:"general",label:"General"},{id:"features",label:"Features"},{id:"changelog",label:"Changelog"},{id:"credits",label:"Credits"}];return(i,r)=>($(),z("div",$C,[v("div",UC,[($(),z(ye,null,Ve(s,o=>v("button",{key:o.id,onClick:a=>n.value=o.id,class:Ee(["tab",{active:n.value===o.id}])},X(o.label),11,jC)),64))]),v("div",BC,[n.value==="general"?($(),z("div",zC,[v("div",HC,[v("div",WC,[v("span",qC,X(e.app.icon),1)]),v("h1",KC,X(e.app.name),1),v("p",GC,"Version "+X(e.app.version),1),v("p",QC,X(e.app.tagline),1)]),v("div",YC,[v("p",JC,X(e.app.description),1),v("div",XC,[($(!0),z(ye,null,Ve(e.info,(o,a)=>($(),z("div",{key:a,class:"info-row"},[v("span",ZC,X(o.label)+":",1),o.url?($(),z("a",{key:0,href:o.url,target:"_blank",rel:"noopener noreferrer",class:"info-link"},X(o.value),9,eR)):($(),z("span",tR,X(o.value),1))]))),128))])])])):Qe("",!0),n.value==="features"?($(),z("div",nR,[r[0]||(r[0]=v("h2",{class:"tab-title"},"Features",-1)),v("ul",sR,[($(!0),z(ye,null,Ve(e.features,(o,a)=>($(),z("li",{key:a},X(o),1))),128))])])):Qe("",!0),n.value==="changelog"?($(),z("div",iR,[r[1]||(r[1]=v("h2",{class:"tab-title"},"Version History",-1)),v("div",rR,[($(!0),z(ye,null,Ve(e.changelog,o=>($(),z("div",{key:o.version,class:"release"},[v("div",oR,[v("span",aR,"v"+X(o.version),1),v("span",lR,X(o.date),1)]),v("ul",cR,[($(!0),z(ye,null,Ve(o.changes,(a,c)=>($(),z("li",{key:c},X(a),1))),128))])]))),128))])])):Qe("",!0),n.value==="credits"?($(),z("div",uR,[r[2]||(r[2]=v("h2",{class:"tab-title"},"Credits",-1)),v("p",null,X(e.credits),1)])):Qe("",!0)])]))}}),hR=Object.assign(vt(dR,[["__scopeId","data-v-88d44ee1"]]),{__name:"AppsAbout"}),fR={class:"settings-app"},pR={class:"settings-sidebar"},mR={class:"sidebar-header"},gR={class:"sidebar-nav"},yR=["onClick"],vR={class:"nav-icon"},_R={class:"nav-label"},wR={class:"settings-content"},bR={key:0,class:"panel"},TR={class:"wallpaper-sections"},IR={class:"current-wallpaper"},ER=["src"],kR=["src"],AR={key:2,class:"preview-placeholder"},SR={class:"wallpaper-options"},CR={class:"wallpaper-section"},RR={class:"wallpaper-grid"},PR=["onClick","title"],xR={class:"wallpaper-name"},MR={class:"wallpaper-section"},DR={class:"wallpaper-grid"},NR=["onClick","title"],OR={class:"wallpaper-name"},VR={class:"wallpaper-section"},LR={class:"wallpaper-grid"},FR=["onClick","title"],$R=["src"],UR=["src"],jR={key:2,class:"wallpaper-icon"},BR={class:"wallpaper-name"},zR={class:"wallpaper-section"},HR={class:"wallpaper-grid"},WR=["onClick","title"],qR={class:"wallpaper-name"},KR={class:"wallpaper-section"},GR={class:"wallpaper-grid"},QR=["onClick","title"],YR={class:"wallpaper-name"},JR={class:"wallpaper-section"},XR={class:"upload-section"},ZR={key:1,class:"panel"},e2={key:2,class:"panel"},t2={key:3,class:"panel"},n2={class:"appearance-sections"},s2={class:"appearance-section"},i2={class:"theme-grid"},r2=ct({name:"SettingsApp",__name:"index",setup(t){const e=ts("window",null),n=rt(),s=te(""),i=te("wallpaper"),r=te(null),o=te("glassmorphic-light"),a=[{id:"wallpaper",label:"Wallpaper",icon:"🖼️"},{id:"sound",label:"Sound",icon:"🔊"},{id:"account",label:"Account",icon:"👤"},{id:"appearance",label:"Appearance",icon:"🎨"}],c=xe(()=>{if(!s.value)return a;const P=s.value.toLowerCase();return a.filter(O=>O.label.toLowerCase().includes(P))}),u=xe(()=>{if(!r.value)return null;if(typeof r.value=="object"&&r.value.type)return r.value.type;const P=String(r.value);return P.includes(".mp4")||P.includes(".webm")?"video":P.includes(".gif")?"gif":P.startsWith("url(")?"image":P.includes("gradient")?"gradient":"color"}),d=xe(()=>{if(!r.value)return"";if(typeof r.value=="object"&&r.value.value)return r.value.value;const O=String(r.value).match(/url\("?([^"]+)"?\)/);return O?O[1]:""}),h=xe(()=>{if(!r.value)return{};const P=u.value;return P==="video"||P==="gif"?{}:typeof r.value=="string"?r.value.startsWith("url(")?{backgroundImage:r.value}:{background:r.value}:r.value.type==="image"?{backgroundImage:`url(${r.value.value})`}:r.value.type==="gradient"||r.value.type==="color"?{background:r.value.value}:{}}),p=[{id:"mac",name:"mac",type:"image",value:Ss("wallpapers/mac.jpg")},{id:"windows",name:"windows",type:"image",value:Ss("wallpapers/windows.jpg")},{id:"old-signal",name:"old signal",type:"image",value:Ss("wallpapers/old-signal.jpg")}],y=[{id:"day-night",name:"Day & Night",type:"gradient",value:"linear-gradient(to bottom, #87CEEB 0%, #1e3c72 100%)"},{id:"seasons",name:"Seasons",type:"gradient",value:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}],_=[{id:"ocean-waves",name:"Ocean Waves",type:"video",value:Ss("wallpapers/end-of-daylight.mp4")},{id:"ROG",name:"ROG",type:"gif",value:Ss("wallpapers/ROG.gif")}],I=[{id:"blue",name:"Blue",type:"color",value:"#007AFF"},{id:"purple",name:"Purple",type:"color",value:"#AF52DE"},{id:"pink",name:"Pink",type:"color",value:"#FF2D55"},{id:"orange",name:"Orange",type:"color",value:"#FF9500"},{id:"green",name:"Green",type:"color",value:"#34C759"},{id:"gray",name:"Gray",type:"color",value:"#8E8E93"},{id:"black",name:"Black",type:"color",value:"#000000"},{id:"white",name:"White",type:"color",value:"#FFFFFF"}],k=[{id:"sunset",name:"Sunset",type:"gradient",value:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},{id:"ocean",name:"Ocean",type:"gradient",value:"linear-gradient(to right, #4facfe 0%, #00f2fe 100%)"},{id:"forest",name:"Forest",type:"gradient",value:"linear-gradient(to top, #0ba360 0%, #3cba92 100%)"},{id:"fire",name:"Fire",type:"gradient",value:"linear-gradient(45deg, #ff0844 0%, #ffb199 100%)"},{id:"night",name:"Night Sky",type:"gradient",value:"linear-gradient(to bottom, #1e3c72 0%, #2a5298 100%)"},{id:"aurora",name:"Aurora",type:"gradient",value:"linear-gradient(to right, #00d2ff 0%, #3a7bd5 100%)"}];nn(()=>{if(e?.metadata?.initialPanel){const O=e.metadata.initialPanel;a.some(b=>b.id===O)&&(i.value=O)}const P=n.wallpaper;P&&(r.value=P),o.value=n.theme||"glassmorphic-light"});const N=P=>{const O={type:P.type,value:P.value};r.value=O,n.setWallpaper(O)},L=P=>{const b=P.target.files?.[0];if(b&&b.type.startsWith("image/")){const w=new FileReader;w.onload=T=>{const A=T.target?.result;N({type:"image",value:A})},w.readAsDataURL(b)}},R=()=>{const P=prompt("Enter image URL:");if(P&&P.trim())try{new URL(P),N({type:"image",value:P})}catch{alert("Please enter a valid URL")}},C=P=>{o.value=P,n.setTheme(P)};return(P,O)=>($(),z("div",fR,[v("div",pR,[v("div",mR,[Xt(v("input",{type:"search",placeholder:"Search",class:"search-input","onUpdate:modelValue":O[0]||(O[0]=b=>s.value=b)},null,512),[[ns,s.value]])]),v("nav",gR,[($(!0),z(ye,null,Ve(c.value,b=>($(),z("button",{key:b.id,onClick:w=>i.value=b.id,class:Ee(["nav-item",{active:i.value===b.id}])},[v("span",vR,X(b.icon),1),v("span",_R,X(b.label),1)],10,yR))),128))])]),v("div",wR,[i.value==="wallpaper"?($(),z("div",bR,[O[17]||(O[17]=v("h1",{class:"panel-title"},"Wallpaper",-1)),v("div",TR,[v("div",IR,[O[7]||(O[7]=v("h2",{class:"section-title"},"Current Wallpaper",-1)),v("div",{class:"wallpaper-preview",style:nt(h.value)},[u.value==="video"?($(),z("video",{key:0,src:d.value,autoplay:"",loop:"",muted:"",class:"preview-video"},null,8,ER)):u.value==="gif"?($(),z("img",{key:1,src:d.value,class:"preview-image"},null,8,kR)):r.value?Qe("",!0):($(),z("span",AR,"No wallpaper set"))],4)]),v("div",SR,[v("div",CR,[O[8]||(O[8]=v("h3",{class:"option-title"},"Static Wallpapers",-1)),v("div",RR,[($(),z(ye,null,Ve(p,b=>v("button",{key:b.id,onClick:w=>N(b),class:"wallpaper-item",style:nt({backgroundImage:b.type==="image"?`url(${b.value})`:b.value}),title:b.name},[v("span",xR,X(b.name),1)],12,PR)),64))])]),v("div",MR,[O[10]||(O[10]=v("h3",{class:"option-title"},"Dynamic Wallpapers",-1)),v("div",DR,[($(),z(ye,null,Ve(y,b=>v("button",{key:b.id,onClick:w=>N(b),class:"wallpaper-item dynamic",style:nt({background:b.value}),title:b.name},[O[9]||(O[9]=v("span",{class:"wallpaper-icon"},"🌅",-1)),v("span",OR,X(b.name),1)],12,NR)),64))])]),v("div",VR,[O[11]||(O[11]=v("h3",{class:"option-title"},"Live Wallpapers",-1)),v("div",LR,[($(),z(ye,null,Ve(_,b=>v("button",{key:b.id,onClick:w=>N(b),class:"wallpaper-item live",title:b.name},[b.type==="video"?($(),z("video",{key:0,src:b.value,class:"wallpaper-thumbnail-video",muted:"",loop:"",onMouseenter:O[1]||(O[1]=w=>w.target.play()),onMouseleave:O[2]||(O[2]=w=>w.target.pause())},null,40,$R)):b.type==="gif"?($(),z("img",{key:1,src:b.value,class:"wallpaper-thumbnail-image"},null,8,UR)):($(),z("span",jR,"🎬")),v("span",BR,X(b.name),1)],8,FR)),64))])]),v("div",zR,[O[12]||(O[12]=v("h3",{class:"option-title"},"Solid Colors",-1)),v("div",HR,[($(),z(ye,null,Ve(I,b=>v("button",{key:b.id,onClick:w=>N(b),class:"wallpaper-item color",style:nt({background:b.value}),title:b.name},[v("span",qR,X(b.name),1)],12,WR)),64))])]),v("div",KR,[O[13]||(O[13]=v("h3",{class:"option-title"},"Gradients",-1)),v("div",GR,[($(),z(ye,null,Ve(k,b=>v("button",{key:b.id,onClick:w=>N(b),class:"wallpaper-item gradient",style:nt({background:b.value}),title:b.name},[v("span",YR,X(b.name),1)],12,QR)),64))])]),v("div",JR,[O[16]||(O[16]=v("h3",{class:"option-title"},"Add custom wallpaper",-1)),v("div",XR,[v("input",{type:"file",accept:"image/*",onChange:L,id:"wallpaper-upload",class:"file-input"},null,32),O[15]||(O[15]=v("label",{for:"wallpaper-upload",class:"upload-button"},[v("span",{class:"upload-icon"},"📁"),v("span",null,"Upload")],-1)),v("label",{onClick:R,class:"upload-button"},O[14]||(O[14]=[v("span",{class:"upload-icon"},"🔗",-1),v("span",null,"Add URL",-1)]))])])])])])):i.value==="sound"?($(),z("div",ZR,O[18]||(O[18]=[v("h1",{class:"panel-title"},"Sound",-1),v("p",{class:"placeholder-text"},"Sound settings will be available in a future update.",-1)]))):i.value==="account"?($(),z("div",e2,O[19]||(O[19]=[v("h1",{class:"panel-title"},"Account",-1),v("p",{class:"placeholder-text"},"Account settings will be available in a future update.",-1)]))):i.value==="appearance"?($(),z("div",t2,[O[27]||(O[27]=v("h1",{class:"panel-title"},"Appearance",-1)),v("div",n2,[v("div",s2,[O[24]||(O[24]=v("h2",{class:"section-title"},"Theme",-1)),O[25]||(O[25]=v("p",{class:"section-description"},"Choose between classic and modern styles with light and dark variants",-1)),v("div",i2,[v("button",{onClick:O[3]||(O[3]=b=>C("glassmorphic-light")),class:Ee(["theme-option",{active:o.value==="glassmorphic-light"}])},O[20]||(O[20]=[fn('<div class="theme-preview glassmorphic-light" data-v-3b967288><div class="preview-menubar" data-v-3b967288></div><div class="preview-window" data-v-3b967288></div><div class="preview-dock" data-v-3b967288></div></div><span class="theme-name" data-v-3b967288>Glassmorphic Light</span><span class="theme-description" data-v-3b967288>Modern translucent design</span>',3)]),2),v("button",{onClick:O[4]||(O[4]=b=>C("glassmorphic-dark")),class:Ee(["theme-option",{active:o.value==="glassmorphic-dark"}])},O[21]||(O[21]=[fn('<div class="theme-preview glassmorphic-dark" data-v-3b967288><div class="preview-menubar" data-v-3b967288></div><div class="preview-window" data-v-3b967288></div><div class="preview-dock" data-v-3b967288></div></div><span class="theme-name" data-v-3b967288>Glassmorphic Dark</span><span class="theme-description" data-v-3b967288>Modern dark translucent</span>',3)]),2),v("button",{onClick:O[5]||(O[5]=b=>C("oldschool-light")),class:Ee(["theme-option",{active:o.value==="oldschool-light"}])},O[22]||(O[22]=[fn('<div class="theme-preview oldschool-light" data-v-3b967288><div class="preview-menubar" data-v-3b967288></div><div class="preview-window" data-v-3b967288></div><div class="preview-dock" data-v-3b967288></div></div><span class="theme-name" data-v-3b967288>Classic Light</span><span class="theme-description" data-v-3b967288>Traditional solid design</span>',3)]),2),v("button",{onClick:O[6]||(O[6]=b=>C("oldschool-dark")),class:Ee(["theme-option",{active:o.value==="oldschool-dark"}])},O[23]||(O[23]=[fn('<div class="theme-preview oldschool-dark" data-v-3b967288><div class="preview-menubar" data-v-3b967288></div><div class="preview-window" data-v-3b967288></div><div class="preview-dock" data-v-3b967288></div></div><span class="theme-name" data-v-3b967288>Classic Dark</span><span class="theme-description" data-v-3b967288>Traditional dark solid</span>',3)]),2)])]),O[26]||(O[26]=fn('<div class="appearance-section" data-v-3b967288><h2 class="section-title" data-v-3b967288>Accent Color</h2><p class="section-description" data-v-3b967288>Customize system accent colors (coming soon)</p><div class="color-grid disabled" data-v-3b967288><div class="color-option" style="background:#007AFF;" data-v-3b967288></div><div class="color-option" style="background:#AF52DE;" data-v-3b967288></div><div class="color-option" style="background:#FF3B30;" data-v-3b967288></div><div class="color-option" style="background:#FF9500;" data-v-3b967288></div><div class="color-option" style="background:#34C759;" data-v-3b967288></div><div class="color-option" style="background:#5AC8FA;" data-v-3b967288></div></div></div>',1))])])):Qe("",!0)])]))}}),o2=Object.assign(vt(r2,[["__scopeId","data-v-3b967288"]]),{__name:"AppsSettings"});function a2(t){oe("typingtest.newTest",()=>{t.startNewTest()}),oe("typingtest.restartTest",()=>{t.startNewTest()}),oe("typingtest.changeText",()=>{(!t.hasStarted.value||t.isComplete.value)&&t.changeText()}),oe("typingtest.setDifficulty",e=>{const n=e?.level;n&&["easy","medium","hard"].includes(n)&&(t.selectedDifficulty.value=n,(!t.hasStarted.value||t.isComplete.value)&&t.changeText())}),oe("typingtest.toggleSound",()=>{t.toggleSound()}),oe("typingtest.toggleKeyboard",()=>{t.showKeyboard&&(t.showKeyboard.value=!t.showKeyboard.value)}),oe("typingtest.showSessionStats",()=>{t.showStats&&(t.showStats.value=!t.showStats.value)}),oe("typingtest.showTips",()=>{alert(`Typing Tips:

1. Keep your fingers on the home row (ASDF JKL;)
2. Use the correct finger for each key
3. Focus on accuracy first, speed will follow
4. Practice regularly for best results
5. Take breaks to avoid fatigue`)})}const A_=window.setInterval,l2={class:"typing-test-app"},c2={class:"stats-bar"},u2={class:"stat-item"},d2={class:"stat-value"},h2={class:"stat-item"},f2={class:"stat-value"},p2={class:"stat-item"},m2={class:"stat-value"},g2={class:"stat-item"},y2={class:"stat-value"},v2={class:"test-area"},_2={class:"test-text-container"},w2={key:0,class:"cursor end"},b2={class:"user-input-display"},T2=["disabled"],I2={class:"typed-text"},E2={key:0,class:"cursor"},k2={class:"controls"},A2=["disabled"],S2=["disabled"],C2={key:0,class:"results-modal"},R2={class:"results-grid"},P2={class:"result-item"},x2={class:"result-value"},M2={class:"result-item"},D2={class:"result-value"},N2={class:"result-item"},O2={class:"result-value"},V2={class:"result-item"},L2={class:"result-value"},F2={key:0,class:"keyboard-container"},$2={class:"keyboard-row"},U2={key:0,class:"shift-label"},j2={class:"keyboard-row"},B2={class:"keyboard-row"},z2={class:"keyboard-row"},H2={class:"keyboard-row space-row"},W2=ct({__name:"index",props:{windowId:{}},setup(t){const e={easy:["The quick brown fox jumps over the lazy dog.","A journey of a thousand miles begins with a single step.","To be or not to be, that is the question.","All that glitters is not gold.","Practice makes perfect."],medium:["The early bird catches the worm, but the second mouse gets the cheese.","Success is not final, failure is not fatal: it is the courage to continue that counts.","In the middle of difficulty lies opportunity.","The only way to do great work is to love what you do.","Innovation distinguishes between a leader and a follower."],hard:["Pneumonoultramicroscopicsilicovolcanoconiosis is a type of lung disease caused by inhaling fine silicate or quartz dust.","The complexity of modern software systems requires careful architectural planning and meticulous implementation strategies.","Quantum entanglement demonstrates non-local correlations that challenge our classical understanding of physics.","Cryptographic hash functions provide one-way transformation of data, essential for blockchain technology.","The hippopotomonstrosesquippedaliophobia is ironically the fear of long words."]};rt();const n=te(""),s=te(""),i=te(0),r=te("easy"),o=te(new Set),a=te(null),c=te(null),u=te(!0),d=te(!1),h=te(!1),p=te(0),y=te(0),_=te(0),I=te(0),k=te(0),N=te(!1),L=te(null),R=te(!0),C=te(!1),P=xe(()=>{if(y.value===0)return 0;const Me=y.value/60,ce=k.value/5;return Math.round(ce/Me)}),O=xe(()=>I.value===0?100:Math.round(k.value/I.value*100)),b=[{code:"Backquote",label:"`",shift:"~"},{code:"Digit1",label:"1",shift:"!"},{code:"Digit2",label:"2",shift:"@"},{code:"Digit3",label:"3",shift:"#"},{code:"Digit4",label:"4",shift:"$"},{code:"Digit5",label:"5",shift:"%"},{code:"Digit6",label:"6",shift:"^"},{code:"Digit7",label:"7",shift:"&"},{code:"Digit8",label:"8",shift:"*"},{code:"Digit9",label:"9",shift:"("},{code:"Digit0",label:"0",shift:")"},{code:"Minus",label:"-",shift:"_"},{code:"Equal",label:"=",shift:"+"},{code:"Backspace",label:"⌫",class:"modifier",width:"90px"}],w=[{code:"Tab",label:"⇥",class:"modifier",width:"70px"},{code:"KeyQ",label:"Q"},{code:"KeyW",label:"W"},{code:"KeyE",label:"E"},{code:"KeyR",label:"R"},{code:"KeyT",label:"T"},{code:"KeyY",label:"Y"},{code:"KeyU",label:"U"},{code:"KeyI",label:"I"},{code:"KeyO",label:"O"},{code:"KeyP",label:"P"},{code:"BracketLeft",label:"[",shift:"{"},{code:"BracketRight",label:"]",shift:"}"},{code:"Backslash",label:"\\",shift:"|",width:"70px"}],T=[{code:"CapsLock",label:"⇪",class:"modifier",width:"85px"},{code:"KeyA",label:"A"},{code:"KeyS",label:"S"},{code:"KeyD",label:"D"},{code:"KeyF",label:"F"},{code:"KeyG",label:"G"},{code:"KeyH",label:"H"},{code:"KeyJ",label:"J"},{code:"KeyK",label:"K"},{code:"KeyL",label:"L"},{code:"Semicolon",label:";",shift:":"},{code:"Quote",label:"'",shift:'"'},{code:"Enter",label:"⏎",class:"modifier",width:"95px"}],A=[{code:"ShiftLeft",label:"⇧",class:"modifier",width:"110px"},{code:"KeyZ",label:"Z"},{code:"KeyX",label:"X"},{code:"KeyC",label:"C"},{code:"KeyV",label:"V"},{code:"KeyB",label:"B"},{code:"KeyN",label:"N"},{code:"KeyM",label:"M"},{code:"Comma",label:",",shift:"<"},{code:"Period",label:".",shift:">"},{code:"Slash",label:"/",shift:"?"},{code:"ShiftRight",label:"⇧",class:"modifier",width:"130px"}],D=[{code:"ControlLeft",label:"ctrl",class:"modifier",width:"60px"},{code:"AltLeft",label:"alt",class:"modifier",width:"60px"},{code:"MetaLeft",label:"⌘",class:"modifier",width:"70px"},{code:"Space",label:"",class:"space",width:"300px"},{code:"MetaRight",label:"⌘",class:"modifier",width:"70px"},{code:"AltRight",label:"alt",class:"modifier",width:"60px"},{code:"ControlRight",label:"ctrl",class:"modifier",width:"60px"}];function x(Me){return Me<i.value?s.value[Me]===n.value[Me]?"correct":"incorrect":Me===i.value?"current":"pending"}function S(){return i.value<n.value.length?n.value[i.value]?.toLowerCase()??"":""}function ve(Me){const ce=Math.floor(Me/60),W=Me%60;return`${ce}:${W.toString().padStart(2,"0")}`}function Se(){c.value||(c.value=new(window.AudioContext||window.webkitAudioContext),c.value.state==="suspended"&&c.value.resume())}function re(Me){if(!u.value||!c.value)return;const ce=c.value.createOscillator(),W=c.value.createGain();ce.connect(W),W.connect(c.value.destination),Me?(ce.frequency.value=400,W.gain.value=.03):(ce.frequency.value=600,W.gain.value=.03),W.gain.exponentialRampToValueAtTime(.001,c.value.currentTime+.05),ce.start(),ce.stop(c.value.currentTime+.1)}function fe(){u.value=!u.value,u.value&&!c.value&&Se()}function le(Me){const ce=Me.target,W=ce.value.slice(-1)||"";if(!d.value&&W&&(St(),u.value&&!c.value&&Se()),i.value<n.value.length&&W){const F=n.value[i.value],B=W===F;I.value++,B?k.value++:_.value++,i.value++,s.value+=W,re(B),i.value>=n.value.length&&Et()}ce.value=""}function Le(Me){Me.key==="Backspace"&&i.value>0&&(Me.preventDefault(),i.value--,s.value=s.value.slice(0,-1)),o.value.add(Me.code),setTimeout(()=>o.value.delete(Me.code),100),Me.code==="CapsLock"&&(N.value=!N.value)}function St(){d.value=!0,p.value=Date.now(),L.value=A_(()=>{y.value=Math.floor((Date.now()-p.value)/1e3)},1e3)}function Et(){h.value=!0,L.value&&(clearInterval(L.value),L.value=null)}function He(){s.value="",i.value=0,d.value=!1,h.value=!1,p.value=0,y.value=0,_.value=0,I.value=0,k.value=0,L.value&&(clearInterval(L.value),L.value=null),setTimeout(()=>{a.value&&a.value.focus()},100)}function je(){const Me=e[r.value],ce=Math.floor(Math.random()*Me.length);n.value=Me[ce]??"",He()}return nn(()=>{a2({startNewTest:He,changeText:je,toggleSound:fe,selectedDifficulty:r,hasStarted:d,isComplete:h,showKeyboard:R,showStats:C}),je(),setTimeout(()=>{a.value&&a.value.focus()},100)}),_n(()=>{L.value&&clearInterval(L.value),c.value&&c.value.close()}),an(h,Me=>{Me||setTimeout(()=>{a.value?.focus()},100)}),(Me,ce)=>($(),z("div",l2,[v("div",c2,[v("div",u2,[ce[1]||(ce[1]=v("span",{class:"stat-label"},"WPM",-1)),v("span",d2,X(P.value),1)]),v("div",h2,[ce[2]||(ce[2]=v("span",{class:"stat-label"},"Accuracy",-1)),v("span",f2,X(O.value)+"%",1)]),v("div",p2,[ce[3]||(ce[3]=v("span",{class:"stat-label"},"Time",-1)),v("span",m2,X(ve(y.value)),1)]),v("div",g2,[ce[4]||(ce[4]=v("span",{class:"stat-label"},"Errors",-1)),v("span",y2,X(_.value),1)])]),v("div",v2,[v("div",_2,[($(!0),z(ye,null,Ve(n.value,(W,F)=>($(),z("span",{key:F,class:Ee(x(F))},X(W),3))),128)),i.value===n.value.length?($(),z("span",w2,"|")):Qe("",!0)]),v("div",b2,[v("input",{ref_key:"hiddenInput",ref:a,type:"text",class:"hidden-input",onInput:le,onKeydown:Le,disabled:h.value,autofocus:""},null,40,T2),v("div",I2,[v("span",null,X(s.value),1),!h.value&&i.value<n.value.length?($(),z("span",E2,"|")):Qe("",!0)])]),v("div",k2,[v("button",{onClick:He,class:"control-btn primary"},X(d.value?"New Test":"Start Test"),1),v("button",{onClick:je,disabled:d.value&&!h.value,class:"control-btn"}," Change Text ",8,A2),v("button",{onClick:fe,class:Ee(["control-btn",{active:u.value}])}," Sound: "+X(u.value?"ON":"OFF"),3),Xt(v("select",{"onUpdate:modelValue":ce[0]||(ce[0]=W=>r.value=W),onChange:je,class:"difficulty-select",disabled:d.value&&!h.value},ce[5]||(ce[5]=[v("option",{value:"easy"},"Easy",-1),v("option",{value:"medium"},"Medium",-1),v("option",{value:"hard"},"Hard",-1)]),40,S2),[[Io,r.value]])]),h.value?($(),z("div",C2,[ce[10]||(ce[10]=v("h2",null,"Test Complete! 🎉",-1)),v("div",R2,[v("div",P2,[ce[6]||(ce[6]=v("span",{class:"result-label"},"Final WPM",-1)),v("span",x2,X(P.value),1)]),v("div",M2,[ce[7]||(ce[7]=v("span",{class:"result-label"},"Accuracy",-1)),v("span",D2,X(O.value)+"%",1)]),v("div",N2,[ce[8]||(ce[8]=v("span",{class:"result-label"},"Time Taken",-1)),v("span",O2,X(ve(y.value)),1)]),v("div",V2,[ce[9]||(ce[9]=v("span",{class:"result-label"},"Characters",-1)),v("span",L2,X(n.value.length),1)])]),v("button",{onClick:He,class:"control-btn primary"},"Try Again")])):Qe("",!0)]),R.value?($(),z("div",F2,[v("div",$2,[($(),z(ye,null,Ve(b,W=>v("div",{key:W.code,class:Ee(["key",W.class||"",{pressed:o.value.has(W.code),"next-key":S()===W.label.toLowerCase()||S()===W.shift}]),style:nt({width:W.width})},[W.shift?($(),z("span",U2,X(W.shift),1)):Qe("",!0),v("span",null,X(W.label),1)],6)),64))]),v("div",j2,[($(),z(ye,null,Ve(w,W=>v("div",{key:W.code,class:Ee(["key",W.class||"",{pressed:o.value.has(W.code),"next-key":S()===W.label.toLowerCase()}]),style:nt({width:W.width})},X(W.label),7)),64))]),v("div",B2,[($(),z(ye,null,Ve(T,W=>v("div",{key:W.code,class:Ee(["key",W.class||"",{pressed:o.value.has(W.code),"caps-active":W.code==="CapsLock"&&N.value,"next-key":S()===W.label.toLowerCase()}]),style:nt({width:W.width})},X(W.label),7)),64))]),v("div",z2,[($(),z(ye,null,Ve(A,W=>v("div",{key:W.code,class:Ee(["key",W.class||"",{pressed:o.value.has(W.code),"next-key":S()===W.label.toLowerCase()}]),style:nt({width:W.width})},X(W.label),7)),64))]),v("div",H2,[($(),z(ye,null,Ve(D,W=>v("div",{key:W.code,class:Ee(["key",W.class||"",{pressed:o.value.has(W.code),"next-key":W.code==="Space"&&S()===" "}]),style:nt({width:W.width})},X(W.label),7)),64))])])):Qe("",!0)]))}}),q2=Object.assign(vt(W2,[["__scopeId","data-v-140acf8e"]]),{__name:"AppsTypingTest"}),K2={class:"music-keyboard-app"},G2={class:"control-panel"},Q2={class:"controls-row"},Y2={class:"control-group"},J2={class:"control-group"},X2={class:"control-group"},Z2={class:"value"},eP={class:"control-group"},tP={class:"octave-buttons"},nP=["disabled"],sP={class:"octave-display"},iP=["disabled"],rP={class:"controls-row"},oP={class:"control-group"},aP={class:"value"},lP={class:"control-group"},cP={class:"value"},uP={class:"control-group"},dP={class:"control-group"},hP={class:"display-panel"},fP={class:"waveform-display",ref:"waveformDisplay"},pP={class:"oscillator-type-indicator"},mP={class:"info-display"},gP={key:0},yP={key:1,class:"hint"},vP={class:"keyboard-container"},_P={class:"keyboard"},wP=["onMousedown","onMouseup","onMouseleave"],bP={class:"key-label"},TP={class:"key-note"},IP=["onMousedown","onMouseup","onMouseleave"],EP={class:"key-label"},kP=ct({__name:"index",setup(t){const e=te(null),n=te(null),s=te(null),i=te(null),r=te(null),o=te(null),a=te(50),c=te(20),u=te(0),d=te(4),h=te("piano"),p=te("sine"),y=te(!1),_=te(new Set),I=te(""),k=te(!1),N=te([]),L=te(0),R=te(null),C=te(null),P=new Map,O={C:261.63,"C#":277.18,D:293.66,"D#":311.13,E:329.63,F:349.23,"F#":369.99,G:392,"G#":415.3,A:440,"A#":466.16,B:493.88},b=xe(()=>[{key:"A",note:"C",label:"C"},{key:"S",note:"D",label:"D"},{key:"D",note:"E",label:"E"},{key:"F",note:"F",label:"F"},{key:"G",note:"G",label:"G"},{key:"H",note:"A",label:"A"},{key:"J",note:"B",label:"B"},{key:"K",note:"C",label:"C",octaveOffset:1},{key:"L",note:"D",label:"D",octaveOffset:1}]),w=xe(()=>[{key:"W",note:"C#",label:"C#",position:"11.11%"},{key:"E",note:"D#",label:"D#",position:"22.22%"},{key:"T",note:"F#",label:"F#",position:"44.44%"},{key:"Y",note:"G#",label:"G#",position:"55.55%"},{key:"U",note:"A#",label:"A#",position:"66.66%"}]),T=()=>{e.value=new(window.AudioContext||window.webkitAudioContext),n.value=e.value.createGain(),n.value.gain.value=a.value/100,s.value=e.value.createConvolver(),A(),i.value=e.value.createDelay(1),i.value.delayTime.value=.3,r.value=e.value.createGain(),r.value.gain.value=0,o.value=e.value.createAnalyser(),o.value.fftSize=2048,i.value.connect(r.value),r.value.connect(i.value),r.value.connect(n.value),n.value.connect(o.value),o.value.connect(e.value.destination),ve()},A=()=>{if(!e.value||!s.value)return;const W=e.value.sampleRate*2,F=e.value.createBuffer(2,W,e.value.sampleRate);for(let B=0;B<2;B++){const K=F.getChannelData(B);for(let ue=0;ue<W;ue++)K[ue]=(Math.random()*2-1)*Math.pow(1-ue/W,2)}s.value.buffer=F},D=W=>{switch(W){case"piano":return{waveform:"triangle",harmonics:[1,.5,.3,.2],attack:.01,decay:.3,sustain:.4,release:.5};case"synth":return{waveform:"sawtooth",harmonics:[1,.7,.5,.3],attack:.05,decay:.2,sustain:.6,release:.3};case"organ":return{waveform:"sine",harmonics:[1,.8,.6,.4,.3],attack:.01,decay:.1,sustain:.8,release:.2};case"strings":return{waveform:"sawtooth",harmonics:[1,.4,.3,.2],attack:.3,decay:.2,sustain:.7,release:.8};case"brass":return{waveform:"sawtooth",harmonics:[1,.9,.7,.5],attack:.1,decay:.2,sustain:.7,release:.3};case"flute":return{waveform:"sine",harmonics:[1,.2],attack:.2,decay:.1,sustain:.6,release:.4};default:return{waveform:"sine",harmonics:[1],attack:.01,decay:.3,sustain:.5,release:.5}}},x=W=>{if((!e.value||!n.value)&&T(),!e.value||!n.value)return;const F=W.key,B=W.note,K=W.octaveOffset||0,ue=d.value+K;if(P.has(F))return;const $e=O[B]*Math.pow(2,ue-4),M=D(h.value),V=e.value.createOscillator(),j=e.value.createGain();V.type=p.value,V.frequency.setValueAtTime($e,e.value.currentTime);const Z=e.value.currentTime;if(j.gain.setValueAtTime(0,Z),j.gain.linearRampToValueAtTime(1,Z+M.attack),j.gain.linearRampToValueAtTime(M.sustain,Z+M.attack+M.decay),V.connect(j),c.value>0&&s.value){const Q=e.value.createGain();Q.gain.value=c.value/100,j.connect(Q),Q.connect(s.value),s.value.connect(n.value)}u.value>0&&i.value&&(j.connect(i.value),r.value&&(r.value.gain.value=u.value/100*.5)),j.connect(n.value),V.start(),P.set(F,{oscillator:V,gainNode:j}),_.value.add(F),I.value=`${B}${ue}`,k.value&&N.value.push({note:{...W,octave:ue},time:Date.now()-L.value})},S=W=>{if(!e.value||y.value)return;const F=W.key,B=P.get(F);if(B){const K=D(h.value),ue=e.value.currentTime;B.gainNode.gain.cancelScheduledValues(ue),B.gainNode.gain.setValueAtTime(B.gainNode.gain.value,ue),B.gainNode.gain.linearRampToValueAtTime(0,ue+K.release),B.oscillator.stop(ue+K.release),P.delete(F),_.value.delete(F),_.value.size===0&&(I.value="")}},ve=()=>{if(!R.value||!o.value)return;const W=R.value,F=W.getContext("2d");if(!F)return;W.width=W.offsetWidth*2,W.height=W.offsetHeight*2,F.scale(2,2);const B=o.value.frequencyBinCount,K=new Uint8Array(B),ue=()=>{C.value=requestAnimationFrame(ue),o.value.getByteTimeDomainData(K),F.fillStyle="rgba(20, 20, 30, 0.2)",F.fillRect(0,0,W.width,W.height);let Te="#00ffcc",$e=2;switch(p.value){case"sine":Te="#ff00cc",$e=2.5;break;case"square":Te="#00ffcc",$e=2;break;case"sawtooth":Te="#00ccff",$e=1.5;break;case"triangle":Te="#cc00ff",$e=3;break}F.lineWidth=$e,F.strokeStyle=Te,F.shadowBlur=10,F.shadowColor=Te,F.beginPath();const M=W.width/2/B;let V=0;for(let j=0;j<B;j++){const Q=K[j]/128*W.height/4;j===0?F.moveTo(V,Q):F.lineTo(V,Q),V+=M}F.stroke()};ue()},Se=()=>{n.value&&(n.value.gain.value=a.value/100)},re=W=>{d.value=Math.max(1,Math.min(7,d.value+W))},fe=()=>{},le=()=>{},Le=()=>{y.value=!y.value,!y.value&&e.value&&(P.forEach((W,F)=>{const B=D(h.value),K=e.value.currentTime;W.gainNode.gain.cancelScheduledValues(K),W.gainNode.gain.setValueAtTime(W.gainNode.gain.value,K),W.gainNode.gain.linearRampToValueAtTime(0,K+B.release),W.oscillator.stop(K+B.release),_.value.delete(F)}),P.clear(),I.value="")},St=()=>{k.value?k.value=!1:(k.value=!0,N.value=[],L.value=Date.now())},Et=()=>{N.value.length!==0&&N.value.forEach(({note:W,time:F})=>{setTimeout(()=>{x(W),setTimeout(()=>S(W),200)},F)})},He=W=>{const F=W.key.toUpperCase(),B=b.value.find(ue=>ue.key===F),K=w.value.find(ue=>ue.key===F);B?x(B):K?x(K):W.code==="Space"&&(W.preventDefault(),Le())},je=W=>{const F=W.key.toUpperCase(),B=b.value.find(ue=>ue.key===F),K=w.value.find(ue=>ue.key===F);B?S(B):K&&S(K)};nn(()=>{T(),window.addEventListener("keydown",He),window.addEventListener("keyup",je),Me()}),_n(()=>{window.removeEventListener("keydown",He),window.removeEventListener("keyup",je),C.value&&cancelAnimationFrame(C.value),P.forEach(({oscillator:W})=>{W.stop()}),e.value&&e.value.close()});const Me=()=>{oe("keystation.newSession",()=>{N.value=[],k.value=!1,I.value="",_.value.clear(),P.forEach(({oscillator:W,gainNode:F},B)=>{const K=D(h.value),ue=e.value?.currentTime||0;F.gain.cancelScheduledValues(ue),F.gain.setValueAtTime(F.gain.value,ue),F.gain.linearRampToValueAtTime(0,ue+K.release),W.stop(ue+K.release),_.value.delete(B)}),P.clear(),I.value=""}),oe("keystation.startRecording",()=>{k.value||St()}),oe("keystation.stopRecording",()=>{k.value&&St()}),oe("keystation.playRecording",()=>{Et()}),oe("keystation.clearRecording",()=>{N.value=[]}),oe("keystation.clearAll",()=>{N.value=[],I.value="",_.value.clear()}),oe("keystation.setInstrument",W=>{const F=ce(W,"instrument");F&&["piano","synth","organ","strings","brass","flute"].includes(F)&&(h.value=F)}),oe("keystation.setOscillator",W=>{const F=ce(W,"type");F&&["sine","triangle","sawtooth","square"].includes(F)&&(p.value=F)}),oe("keystation.setReverb",W=>{const F=ce(W,"level");typeof F=="number"&&(c.value=F)}),oe("keystation.setDelay",W=>{const F=ce(W,"level");typeof F=="number"&&(u.value=F,r.value&&(r.value.gain.value=F/100*.5))}),oe("keystation.toggleSustain",()=>{Le()}),oe("keystation.setOctave",W=>{const F=ce(W,"octave");typeof F=="number"&&F>=1&&F<=7&&(d.value=F)}),oe("keystation.octaveUp",()=>{re(1)}),oe("keystation.octaveDown",()=>{re(-1)}),oe("keystation.setVolume",W=>{const F=ce(W,"level");typeof F=="number"&&(a.value=F,Se())}),oe("keystation.volumeUp",()=>{a.value=Math.min(100,a.value+10),Se()}),oe("keystation.volumeDown",()=>{a.value=Math.max(0,a.value-10),Se()}),oe("keystation.resetAudio",()=>{e.value&&e.value.close(),T()}),oe("keystation.toggleWaveform",()=>{console.log("Toggle waveform display")}),oe("keystation.toggleKeyLabels",()=>{console.log("Toggle key labels")}),oe("keystation.toggleOctaveLabels",()=>{console.log("Toggle octave labels")}),oe("keystation.showKeyboardGuide",()=>{alert(`Keyboard Layout:

White Keys: A S D F G H J K L
Black Keys: W E T Y U
Sustain: Space

Octave Up: ]
Octave Down: [`)})};function ce(W,F){if(W&&typeof W=="object"&&F in W)return W[F]}return(W,F)=>($(),z("div",K2,[v("div",G2,[v("div",Q2,[v("div",Y2,[F[8]||(F[8]=v("label",null,"Instrument",-1)),Xt(v("select",{"onUpdate:modelValue":F[0]||(F[0]=B=>h.value=B),onChange:fe},F[7]||(F[7]=[fn('<option value="piano" data-v-c730ea8f>Piano</option><option value="synth" data-v-c730ea8f>Synth</option><option value="organ" data-v-c730ea8f>Organ</option><option value="strings" data-v-c730ea8f>Strings</option><option value="brass" data-v-c730ea8f>Brass</option><option value="flute" data-v-c730ea8f>Flute</option>',6)]),544),[[Io,h.value]])]),v("div",J2,[F[10]||(F[10]=v("label",null,"Oscillator",-1)),Xt(v("select",{"onUpdate:modelValue":F[1]||(F[1]=B=>p.value=B),onChange:le},F[9]||(F[9]=[v("option",{value:"sine"},"Sine",-1),v("option",{value:"triangle"},"Triangle",-1),v("option",{value:"sawtooth"},"Sawtooth",-1),v("option",{value:"square"},"Square",-1)]),544),[[Io,p.value]])]),v("div",X2,[F[11]||(F[11]=v("label",null,"Volume",-1)),Xt(v("input",{type:"range","onUpdate:modelValue":F[2]||(F[2]=B=>a.value=B),min:"0",max:"100",onInput:Se},null,544),[[ns,a.value]]),v("span",Z2,X(a.value),1)]),v("div",eP,[F[12]||(F[12]=v("label",null,"Octave",-1)),v("div",tP,[v("button",{onClick:F[3]||(F[3]=B=>re(-1)),disabled:d.value<=1},"-",8,nP),v("span",sP,"C"+X(d.value),1),v("button",{onClick:F[4]||(F[4]=B=>re(1)),disabled:d.value>=7},"+",8,iP)])])]),v("div",rP,[v("div",oP,[F[13]||(F[13]=v("label",null,"Reverb",-1)),Xt(v("input",{type:"range","onUpdate:modelValue":F[5]||(F[5]=B=>c.value=B),min:"0",max:"100"},null,512),[[ns,c.value]]),v("span",aP,X(c.value),1)]),v("div",lP,[F[14]||(F[14]=v("label",null,"Delay",-1)),Xt(v("input",{type:"range","onUpdate:modelValue":F[6]||(F[6]=B=>u.value=B),min:"0",max:"100"},null,512),[[ns,u.value]]),v("span",cP,X(u.value),1)]),v("div",uP,[F[15]||(F[15]=v("label",null,"Sustain",-1)),v("button",{onClick:Le,class:Ee(["sustain-button",{active:y.value}])},X(y.value?"ON":"OFF"),3)]),v("div",dP,[F[16]||(F[16]=v("label",null,"Recording",-1)),v("button",{onClick:St,class:Ee(["record-button",{recording:k.value}])},X(k.value?"⏺ Stop":"⏺ Record"),3),N.value.length>0?($(),z("button",{key:0,onClick:Et,class:"play-button"}," ▶ Play ")):Qe("",!0)])])]),v("div",hP,[v("div",fP,[v("canvas",{ref_key:"waveformCanvas",ref:R},null,512),v("div",pP,X(p.value.toUpperCase()),1)],512),v("div",mP,[I.value?($(),z("span",gP,X(I.value),1)):($(),z("span",yP,"Press keys A-L for white keys, W-E-T-Y-U for black keys"))])]),v("div",vP,[v("div",_P,[($(!0),z(ye,null,Ve(b.value,(B,K)=>($(),z("div",{key:`white-${K}`,class:Ee(["key","white-key",{active:_.value.has(B.key)}]),onMousedown:ue=>x(B),onMouseup:ue=>S(B),onMouseleave:ue=>S(B)},[v("span",bP,X(B.label),1),v("span",TP,X(B.key),1)],42,wP))),128)),($(!0),z(ye,null,Ve(w.value,(B,K)=>($(),z("div",{key:`black-${K}`,class:Ee(["key","black-key",{active:_.value.has(B.key)}]),style:nt({left:B.position}),onMousedown:ue=>x(B),onMouseup:ue=>S(B),onMouseleave:ue=>S(B)},[v("span",EP,X(B.label),1)],46,IP))),128))])])]))}}),AP=Object.assign(vt(kP,[["__scopeId","data-v-c730ea8f"]]),{__name:"AppsKeyStation"}),km=rh("/icons/apps/yahooMessenger.png"),SP=()=>{};var Am={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},CP=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const i=t[n++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=t[n++];e[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const r=t[n++],o=t[n++];e[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return e.join("")},C_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<t.length;i+=3){const r=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,d=r>>2,h=(r&3)<<4|a>>4;let p=(a&15)<<2|u>>6,y=u&63;c||(y=64,o||(p=64)),s.push(n[d],n[h],n[p],n[y])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(S_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):CP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<t.length;){const r=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,r==null||a==null||u==null||h==null)throw new RP;const p=r<<2|a>>4;if(s.push(p),u!==64){const y=a<<4&240|u>>2;if(s.push(y),h!==64){const _=u<<6&192|h;s.push(_)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class RP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const PP=function(t){const e=S_(t);return C_.encodeByteArray(e,!0)},vl=function(t){return PP(t).replace(/\./g,"")},R_=function(t){try{return C_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP=()=>xP().__FIREBASE_DEFAULTS__,DP=()=>{if(typeof process>"u"||typeof Am>"u")return;const t=Am.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},NP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&R_(t[1]);return e&&JSON.parse(e)},Zl=()=>{try{return SP()||MP()||DP()||NP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},P_=t=>Zl()?.emulatorHosts?.[t],OP=t=>{const e=P_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},x_=()=>Zl()?.config,M_=t=>Zl()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function D_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...t};return[vl(JSON.stringify(n)),vl(JSON.stringify(o)),""].join(".")}const uo={};function FP(){const t={prod:[],emulator:[]};for(const e of Object.keys(uo))uo[e]?t.emulator.push(e):t.prod.push(e);return t}function $P(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Sm=!1;function N_(t,e){if(typeof window>"u"||typeof document>"u"||!kr(window.location.host)||uo[t]===e||uo[t]||Sm)return;uo[t]=e;function n(p){return`__firebase__banner__${p}`}const s="__firebase__banner",r=FP().prod.length>0;function o(){const p=document.getElementById(s);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,y){p.setAttribute("width","24"),p.setAttribute("id",y),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Sm=!0,o()},p}function d(p,y){p.setAttribute("id",y),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function h(){const p=$P(s),y=n("text"),_=document.getElementById(y)||document.createElement("span"),I=n("learnmore"),k=document.getElementById(I)||document.createElement("a"),N=n("preprendIcon"),L=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const R=p.element;a(R),d(k,I);const C=u();c(L,N),R.append(L,_,k,C),document.body.appendChild(R)}r?(_.innerText="Preview backend disconnected.",L.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(L.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function jP(){const t=Zl()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function HP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WP(){const t=Wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qP(){return!jP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function KP(){try{return typeof indexedDB=="object"}catch{return!1}}function GP(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP="FirebaseError";class ms extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=QP,Object.setPrototypeOf(this,ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bo.prototype.create)}}class Bo{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},i=`${this.service}/${e}`,r=this.errors[e],o=r?YP(r,s):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ms(i,a,s)}}function YP(t,e){return t.replace(JP,(n,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const JP=/\{\$([^}]+)}/g;function XP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ei(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const i of n){if(!s.includes(i))return!1;const r=t[i],o=e[i];if(Cm(r)&&Cm(o)){if(!Ei(r,o))return!1}else if(r!==o)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function Cm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function ZP(t,e){const n=new ex(t,e);return n.subscribe.bind(n)}class ex{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let i;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");tx(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:s},i.next===void 0&&(i.next=lu),i.error===void 0&&(i.error=lu),i.complete===void 0&&(i.complete=lu);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tx(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function lu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(t){return t&&t._delegate?t._delegate:t}class ki{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new VP;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ix(e))try{this.getOrInitializeService({instanceIdentifier:di})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(e=di){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=di){return this.instances.has(e)}getOptions(e=di){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);s===a&&o.resolve(i)}return i}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(s)??new Set;i.add(e),this.onInitCallbacks.set(s,i);const r=this.instances.get(s);return r&&e(r,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:sx(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=di){return this.component?this.component.multipleInstances?e:di:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sx(t){return t===di?void 0:t}function ix(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(De||(De={}));const ox={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},ax=De.INFO,lx={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},cx=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),i=lx[e];if(i)console[i](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ph{constructor(e){this.name=e,this._logLevel=ax,this._logHandler=cx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ox[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const ux=(t,e)=>e.some(n=>t instanceof n);let Rm,Pm;function dx(){return Rm||(Rm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hx(){return Pm||(Pm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const O_=new WeakMap,sd=new WeakMap,V_=new WeakMap,cu=new WeakMap,mh=new WeakMap;function fx(t){const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{n(Vs(t.result)),i()},o=()=>{s(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&O_.set(n,t)}).catch(()=>{}),mh.set(e,t),e}function px(t){if(sd.has(t))return;const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{n(),i()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});sd.set(t,e)}let id={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||V_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function mx(t){id=t(id)}function gx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(uu(this),e,...n);return V_.set(s,e.sort?e.sort():[e]),Vs(s)}:hx().includes(t)?function(...e){return t.apply(uu(this),e),Vs(O_.get(this))}:function(...e){return Vs(t.apply(uu(this),e))}}function yx(t){return typeof t=="function"?gx(t):(t instanceof IDBTransaction&&px(t),ux(t,dx())?new Proxy(t,id):t)}function Vs(t){if(t instanceof IDBRequest)return fx(t);if(cu.has(t))return cu.get(t);const e=yx(t);return e!==t&&(cu.set(t,e),mh.set(e,t)),e}const uu=t=>mh.get(t);function vx(t,e,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(t,e),a=Vs(o);return s&&o.addEventListener("upgradeneeded",c=>{s(Vs(o.result),c.oldVersion,c.newVersion,Vs(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{r&&c.addEventListener("close",()=>r()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const _x=["get","getKey","getAll","getAllKeys","count"],wx=["put","add","delete","clear"],du=new Map;function xm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(du.get(e))return du.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,i=wx.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||_x.includes(n)))return;const r=async function(o,...a){const c=this.transaction(o,i?"readwrite":"readonly");let u=c.store;return s&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&c.done]))[0]};return du.set(e,r),r}mx(t=>({...t,get:(e,n,s)=>xm(e,n)||t.get(e,n,s),has:(e,n)=>!!xm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Tx(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Tx(t){return t.getComponent()?.type==="VERSION"}const rd="@firebase/app",Mm="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls=new ph("@firebase/app"),Ix="@firebase/app-compat",Ex="@firebase/analytics-compat",kx="@firebase/analytics",Ax="@firebase/app-check-compat",Sx="@firebase/app-check",Cx="@firebase/auth",Rx="@firebase/auth-compat",Px="@firebase/database",xx="@firebase/data-connect",Mx="@firebase/database-compat",Dx="@firebase/functions",Nx="@firebase/functions-compat",Ox="@firebase/installations",Vx="@firebase/installations-compat",Lx="@firebase/messaging",Fx="@firebase/messaging-compat",$x="@firebase/performance",Ux="@firebase/performance-compat",jx="@firebase/remote-config",Bx="@firebase/remote-config-compat",zx="@firebase/storage",Hx="@firebase/storage-compat",Wx="@firebase/firestore",qx="@firebase/ai",Kx="@firebase/firestore-compat",Gx="firebase",Qx="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od="[DEFAULT]",Yx={[rd]:"fire-core",[Ix]:"fire-core-compat",[kx]:"fire-analytics",[Ex]:"fire-analytics-compat",[Sx]:"fire-app-check",[Ax]:"fire-app-check-compat",[Cx]:"fire-auth",[Rx]:"fire-auth-compat",[Px]:"fire-rtdb",[xx]:"fire-data-connect",[Mx]:"fire-rtdb-compat",[Dx]:"fire-fn",[Nx]:"fire-fn-compat",[Ox]:"fire-iid",[Vx]:"fire-iid-compat",[Lx]:"fire-fcm",[Fx]:"fire-fcm-compat",[$x]:"fire-perf",[Ux]:"fire-perf-compat",[jx]:"fire-rc",[Bx]:"fire-rc-compat",[zx]:"fire-gcs",[Hx]:"fire-gcs-compat",[Wx]:"fire-fst",[Kx]:"fire-fst-compat",[qx]:"fire-vertex","fire-js":"fire-js",[Gx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _l=new Map,Jx=new Map,ad=new Map;function Dm(t,e){try{t.container.addComponent(e)}catch(n){ls.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function pr(t){const e=t.name;if(ad.has(e))return ls.debug(`There were multiple attempts to register component ${e}.`),!1;ad.set(e,t);for(const n of _l.values())Dm(n,t);for(const n of Jx.values())Dm(n,t);return!0}function gh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function bn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ls=new Bo("app","Firebase",Xx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ki("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ls.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar=Qx;function L_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:od,automaticDataCollectionEnabled:!0,...e},i=s.name;if(typeof i!="string"||!i)throw Ls.create("bad-app-name",{appName:String(i)});if(n||(n=x_()),!n)throw Ls.create("no-options");const r=_l.get(i);if(r){if(Ei(n,r.options)&&Ei(s,r.config))return r;throw Ls.create("duplicate-app",{appName:i})}const o=new rx(i);for(const c of ad.values())o.addComponent(c);const a=new Zx(n,s,o);return _l.set(i,a),a}function F_(t=od){const e=_l.get(t);if(!e&&t===od&&x_())return L_();if(!e)throw Ls.create("no-app",{appName:t});return e}function Fs(t,e,n){let s=Yx[t]??t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),r=e.match(/\s|\//);if(i||r){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&r&&o.push("and"),r&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ls.warn(o.join(" "));return}pr(new ki(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM="firebase-heartbeat-database",tM=1,ko="firebase-heartbeat-store";let hu=null;function $_(){return hu||(hu=vx(eM,tM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ko)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ls.create("idb-open",{originalErrorMessage:t.message})})),hu}async function nM(t){try{const n=(await $_()).transaction(ko),s=await n.objectStore(ko).get(U_(t));return await n.done,s}catch(e){if(e instanceof ms)ls.warn(e.message);else{const n=Ls.create("idb-get",{originalErrorMessage:e?.message});ls.warn(n.message)}}}async function Nm(t,e){try{const s=(await $_()).transaction(ko,"readwrite");await s.objectStore(ko).put(e,U_(t)),await s.done}catch(n){if(n instanceof ms)ls.warn(n.message);else{const s=Ls.create("idb-set",{originalErrorMessage:n?.message});ls.warn(s.message)}}}function U_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM=1024,iM=30;class rM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new aM(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Om();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>iM){const i=lM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ls.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Om(),{heartbeatsToSend:n,unsentEntries:s}=oM(this._heartbeatsCache.heartbeats),i=vl(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return ls.warn(e),""}}}function Om(){return new Date().toISOString().substring(0,10)}function oM(t,e=sM){const n=[];let s=t.slice();for(const i of t){const r=n.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),Vm(n)>e){r.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Vm(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class aM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return KP()?GP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await nM(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Nm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Nm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Vm(t){return vl(JSON.stringify({version:2,heartbeats:t})).length}function lM(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(t){pr(new ki("platform-logger",e=>new bx(e),"PRIVATE")),pr(new ki("heartbeat",e=>new rM(e),"PRIVATE")),Fs(rd,Mm,t),Fs(rd,Mm,"esm2020"),Fs("fire-js","")}cM("");var Lm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $s,j_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,w){function T(){}T.prototype=w.prototype,b.D=w.prototype,b.prototype=new T,b.prototype.constructor=b,b.C=function(A,D,x){for(var S=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)S[ve-2]=arguments[ve];return w.prototype[D].apply(A,S)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,w,T){T||(T=0);var A=Array(16);if(typeof w=="string")for(var D=0;16>D;++D)A[D]=w.charCodeAt(T++)|w.charCodeAt(T++)<<8|w.charCodeAt(T++)<<16|w.charCodeAt(T++)<<24;else for(D=0;16>D;++D)A[D]=w[T++]|w[T++]<<8|w[T++]<<16|w[T++]<<24;w=b.g[0],T=b.g[1],D=b.g[2];var x=b.g[3],S=w+(x^T&(D^x))+A[0]+3614090360&4294967295;w=T+(S<<7&4294967295|S>>>25),S=x+(D^w&(T^D))+A[1]+3905402710&4294967295,x=w+(S<<12&4294967295|S>>>20),S=D+(T^x&(w^T))+A[2]+606105819&4294967295,D=x+(S<<17&4294967295|S>>>15),S=T+(w^D&(x^w))+A[3]+3250441966&4294967295,T=D+(S<<22&4294967295|S>>>10),S=w+(x^T&(D^x))+A[4]+4118548399&4294967295,w=T+(S<<7&4294967295|S>>>25),S=x+(D^w&(T^D))+A[5]+1200080426&4294967295,x=w+(S<<12&4294967295|S>>>20),S=D+(T^x&(w^T))+A[6]+2821735955&4294967295,D=x+(S<<17&4294967295|S>>>15),S=T+(w^D&(x^w))+A[7]+4249261313&4294967295,T=D+(S<<22&4294967295|S>>>10),S=w+(x^T&(D^x))+A[8]+1770035416&4294967295,w=T+(S<<7&4294967295|S>>>25),S=x+(D^w&(T^D))+A[9]+2336552879&4294967295,x=w+(S<<12&4294967295|S>>>20),S=D+(T^x&(w^T))+A[10]+4294925233&4294967295,D=x+(S<<17&4294967295|S>>>15),S=T+(w^D&(x^w))+A[11]+2304563134&4294967295,T=D+(S<<22&4294967295|S>>>10),S=w+(x^T&(D^x))+A[12]+1804603682&4294967295,w=T+(S<<7&4294967295|S>>>25),S=x+(D^w&(T^D))+A[13]+4254626195&4294967295,x=w+(S<<12&4294967295|S>>>20),S=D+(T^x&(w^T))+A[14]+2792965006&4294967295,D=x+(S<<17&4294967295|S>>>15),S=T+(w^D&(x^w))+A[15]+1236535329&4294967295,T=D+(S<<22&4294967295|S>>>10),S=w+(D^x&(T^D))+A[1]+4129170786&4294967295,w=T+(S<<5&4294967295|S>>>27),S=x+(T^D&(w^T))+A[6]+3225465664&4294967295,x=w+(S<<9&4294967295|S>>>23),S=D+(w^T&(x^w))+A[11]+643717713&4294967295,D=x+(S<<14&4294967295|S>>>18),S=T+(x^w&(D^x))+A[0]+3921069994&4294967295,T=D+(S<<20&4294967295|S>>>12),S=w+(D^x&(T^D))+A[5]+3593408605&4294967295,w=T+(S<<5&4294967295|S>>>27),S=x+(T^D&(w^T))+A[10]+38016083&4294967295,x=w+(S<<9&4294967295|S>>>23),S=D+(w^T&(x^w))+A[15]+3634488961&4294967295,D=x+(S<<14&4294967295|S>>>18),S=T+(x^w&(D^x))+A[4]+3889429448&4294967295,T=D+(S<<20&4294967295|S>>>12),S=w+(D^x&(T^D))+A[9]+568446438&4294967295,w=T+(S<<5&4294967295|S>>>27),S=x+(T^D&(w^T))+A[14]+3275163606&4294967295,x=w+(S<<9&4294967295|S>>>23),S=D+(w^T&(x^w))+A[3]+4107603335&4294967295,D=x+(S<<14&4294967295|S>>>18),S=T+(x^w&(D^x))+A[8]+1163531501&4294967295,T=D+(S<<20&4294967295|S>>>12),S=w+(D^x&(T^D))+A[13]+2850285829&4294967295,w=T+(S<<5&4294967295|S>>>27),S=x+(T^D&(w^T))+A[2]+4243563512&4294967295,x=w+(S<<9&4294967295|S>>>23),S=D+(w^T&(x^w))+A[7]+1735328473&4294967295,D=x+(S<<14&4294967295|S>>>18),S=T+(x^w&(D^x))+A[12]+2368359562&4294967295,T=D+(S<<20&4294967295|S>>>12),S=w+(T^D^x)+A[5]+4294588738&4294967295,w=T+(S<<4&4294967295|S>>>28),S=x+(w^T^D)+A[8]+2272392833&4294967295,x=w+(S<<11&4294967295|S>>>21),S=D+(x^w^T)+A[11]+1839030562&4294967295,D=x+(S<<16&4294967295|S>>>16),S=T+(D^x^w)+A[14]+4259657740&4294967295,T=D+(S<<23&4294967295|S>>>9),S=w+(T^D^x)+A[1]+2763975236&4294967295,w=T+(S<<4&4294967295|S>>>28),S=x+(w^T^D)+A[4]+1272893353&4294967295,x=w+(S<<11&4294967295|S>>>21),S=D+(x^w^T)+A[7]+4139469664&4294967295,D=x+(S<<16&4294967295|S>>>16),S=T+(D^x^w)+A[10]+3200236656&4294967295,T=D+(S<<23&4294967295|S>>>9),S=w+(T^D^x)+A[13]+681279174&4294967295,w=T+(S<<4&4294967295|S>>>28),S=x+(w^T^D)+A[0]+3936430074&4294967295,x=w+(S<<11&4294967295|S>>>21),S=D+(x^w^T)+A[3]+3572445317&4294967295,D=x+(S<<16&4294967295|S>>>16),S=T+(D^x^w)+A[6]+76029189&4294967295,T=D+(S<<23&4294967295|S>>>9),S=w+(T^D^x)+A[9]+3654602809&4294967295,w=T+(S<<4&4294967295|S>>>28),S=x+(w^T^D)+A[12]+3873151461&4294967295,x=w+(S<<11&4294967295|S>>>21),S=D+(x^w^T)+A[15]+530742520&4294967295,D=x+(S<<16&4294967295|S>>>16),S=T+(D^x^w)+A[2]+3299628645&4294967295,T=D+(S<<23&4294967295|S>>>9),S=w+(D^(T|~x))+A[0]+4096336452&4294967295,w=T+(S<<6&4294967295|S>>>26),S=x+(T^(w|~D))+A[7]+1126891415&4294967295,x=w+(S<<10&4294967295|S>>>22),S=D+(w^(x|~T))+A[14]+2878612391&4294967295,D=x+(S<<15&4294967295|S>>>17),S=T+(x^(D|~w))+A[5]+4237533241&4294967295,T=D+(S<<21&4294967295|S>>>11),S=w+(D^(T|~x))+A[12]+1700485571&4294967295,w=T+(S<<6&4294967295|S>>>26),S=x+(T^(w|~D))+A[3]+2399980690&4294967295,x=w+(S<<10&4294967295|S>>>22),S=D+(w^(x|~T))+A[10]+4293915773&4294967295,D=x+(S<<15&4294967295|S>>>17),S=T+(x^(D|~w))+A[1]+2240044497&4294967295,T=D+(S<<21&4294967295|S>>>11),S=w+(D^(T|~x))+A[8]+1873313359&4294967295,w=T+(S<<6&4294967295|S>>>26),S=x+(T^(w|~D))+A[15]+4264355552&4294967295,x=w+(S<<10&4294967295|S>>>22),S=D+(w^(x|~T))+A[6]+2734768916&4294967295,D=x+(S<<15&4294967295|S>>>17),S=T+(x^(D|~w))+A[13]+1309151649&4294967295,T=D+(S<<21&4294967295|S>>>11),S=w+(D^(T|~x))+A[4]+4149444226&4294967295,w=T+(S<<6&4294967295|S>>>26),S=x+(T^(w|~D))+A[11]+3174756917&4294967295,x=w+(S<<10&4294967295|S>>>22),S=D+(w^(x|~T))+A[2]+718787259&4294967295,D=x+(S<<15&4294967295|S>>>17),S=T+(x^(D|~w))+A[9]+3951481745&4294967295,b.g[0]=b.g[0]+w&4294967295,b.g[1]=b.g[1]+(D+(S<<21&4294967295|S>>>11))&4294967295,b.g[2]=b.g[2]+D&4294967295,b.g[3]=b.g[3]+x&4294967295}s.prototype.u=function(b,w){w===void 0&&(w=b.length);for(var T=w-this.blockSize,A=this.B,D=this.h,x=0;x<w;){if(D==0)for(;x<=T;)i(this,b,x),x+=this.blockSize;if(typeof b=="string"){for(;x<w;)if(A[D++]=b.charCodeAt(x++),D==this.blockSize){i(this,A),D=0;break}}else for(;x<w;)if(A[D++]=b[x++],D==this.blockSize){i(this,A),D=0;break}}this.h=D,this.o+=w},s.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var w=1;w<b.length-8;++w)b[w]=0;var T=8*this.o;for(w=b.length-8;w<b.length;++w)b[w]=T&255,T/=256;for(this.u(b),b=Array(16),w=T=0;4>w;++w)for(var A=0;32>A;A+=8)b[T++]=this.g[w]>>>A&255;return b};function r(b,w){var T=a;return Object.prototype.hasOwnProperty.call(T,b)?T[b]:T[b]=w(b)}function o(b,w){this.h=w;for(var T=[],A=!0,D=b.length-1;0<=D;D--){var x=b[D]|0;A&&x==w||(T[D]=x,A=!1)}this.g=T}var a={};function c(b){return-128<=b&&128>b?r(b,function(w){return new o([w|0],0>w?-1:0)}):new o([b|0],0>b?-1:0)}function u(b){if(isNaN(b)||!isFinite(b))return h;if(0>b)return k(u(-b));for(var w=[],T=1,A=0;b>=T;A++)w[A]=b/T|0,T*=4294967296;return new o(w,0)}function d(b,w){if(b.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(b.charAt(0)=="-")return k(d(b.substring(1),w));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=u(Math.pow(w,8)),A=h,D=0;D<b.length;D+=8){var x=Math.min(8,b.length-D),S=parseInt(b.substring(D,D+x),w);8>x?(x=u(Math.pow(w,x)),A=A.j(x).add(u(S))):(A=A.j(T),A=A.add(u(S)))}return A}var h=c(0),p=c(1),y=c(16777216);t=o.prototype,t.m=function(){if(I(this))return-k(this).m();for(var b=0,w=1,T=0;T<this.g.length;T++){var A=this.i(T);b+=(0<=A?A:4294967296+A)*w,w*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(_(this))return"0";if(I(this))return"-"+k(this).toString(b);for(var w=u(Math.pow(b,6)),T=this,A="";;){var D=C(T,w).g;T=N(T,D.j(w));var x=((0<T.g.length?T.g[0]:T.h)>>>0).toString(b);if(T=D,_(T))return x+A;for(;6>x.length;)x="0"+x;A=x+A}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function _(b){if(b.h!=0)return!1;for(var w=0;w<b.g.length;w++)if(b.g[w]!=0)return!1;return!0}function I(b){return b.h==-1}t.l=function(b){return b=N(this,b),I(b)?-1:_(b)?0:1};function k(b){for(var w=b.g.length,T=[],A=0;A<w;A++)T[A]=~b.g[A];return new o(T,~b.h).add(p)}t.abs=function(){return I(this)?k(this):this},t.add=function(b){for(var w=Math.max(this.g.length,b.g.length),T=[],A=0,D=0;D<=w;D++){var x=A+(this.i(D)&65535)+(b.i(D)&65535),S=(x>>>16)+(this.i(D)>>>16)+(b.i(D)>>>16);A=S>>>16,x&=65535,S&=65535,T[D]=S<<16|x}return new o(T,T[T.length-1]&-2147483648?-1:0)};function N(b,w){return b.add(k(w))}t.j=function(b){if(_(this)||_(b))return h;if(I(this))return I(b)?k(this).j(k(b)):k(k(this).j(b));if(I(b))return k(this.j(k(b)));if(0>this.l(y)&&0>b.l(y))return u(this.m()*b.m());for(var w=this.g.length+b.g.length,T=[],A=0;A<2*w;A++)T[A]=0;for(A=0;A<this.g.length;A++)for(var D=0;D<b.g.length;D++){var x=this.i(A)>>>16,S=this.i(A)&65535,ve=b.i(D)>>>16,Se=b.i(D)&65535;T[2*A+2*D]+=S*Se,L(T,2*A+2*D),T[2*A+2*D+1]+=x*Se,L(T,2*A+2*D+1),T[2*A+2*D+1]+=S*ve,L(T,2*A+2*D+1),T[2*A+2*D+2]+=x*ve,L(T,2*A+2*D+2)}for(A=0;A<w;A++)T[A]=T[2*A+1]<<16|T[2*A];for(A=w;A<2*w;A++)T[A]=0;return new o(T,0)};function L(b,w){for(;(b[w]&65535)!=b[w];)b[w+1]+=b[w]>>>16,b[w]&=65535,w++}function R(b,w){this.g=b,this.h=w}function C(b,w){if(_(w))throw Error("division by zero");if(_(b))return new R(h,h);if(I(b))return w=C(k(b),w),new R(k(w.g),k(w.h));if(I(w))return w=C(b,k(w)),new R(k(w.g),w.h);if(30<b.g.length){if(I(b)||I(w))throw Error("slowDivide_ only works with positive integers.");for(var T=p,A=w;0>=A.l(b);)T=P(T),A=P(A);var D=O(T,1),x=O(A,1);for(A=O(A,2),T=O(T,2);!_(A);){var S=x.add(A);0>=S.l(b)&&(D=D.add(T),x=S),A=O(A,1),T=O(T,1)}return w=N(b,D.j(w)),new R(D,w)}for(D=h;0<=b.l(w);){for(T=Math.max(1,Math.floor(b.m()/w.m())),A=Math.ceil(Math.log(T)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),x=u(T),S=x.j(w);I(S)||0<S.l(b);)T-=A,x=u(T),S=x.j(w);_(x)&&(x=p),D=D.add(x),b=N(b,S)}return new R(D,b)}t.A=function(b){return C(this,b).h},t.and=function(b){for(var w=Math.max(this.g.length,b.g.length),T=[],A=0;A<w;A++)T[A]=this.i(A)&b.i(A);return new o(T,this.h&b.h)},t.or=function(b){for(var w=Math.max(this.g.length,b.g.length),T=[],A=0;A<w;A++)T[A]=this.i(A)|b.i(A);return new o(T,this.h|b.h)},t.xor=function(b){for(var w=Math.max(this.g.length,b.g.length),T=[],A=0;A<w;A++)T[A]=this.i(A)^b.i(A);return new o(T,this.h^b.h)};function P(b){for(var w=b.g.length+1,T=[],A=0;A<w;A++)T[A]=b.i(A)<<1|b.i(A-1)>>>31;return new o(T,b.h)}function O(b,w){var T=w>>5;w%=32;for(var A=b.g.length-T,D=[],x=0;x<A;x++)D[x]=0<w?b.i(x+T)>>>w|b.i(x+T+1)<<32-w:b.i(x+T);return new o(D,b.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,j_=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,$s=o}).apply(typeof Lm<"u"?Lm:typeof self<"u"?self:typeof window<"u"?window:{});var ka=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var B_,Xr,z_,ja,ld,H_,W_,q_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,g){return l==Array.prototype||l==Object.prototype||(l[f]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof ka=="object"&&ka];for(var f=0;f<l.length;++f){var g=l[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function i(l,f){if(f)e:{var g=s;l=l.split(".");for(var E=0;E<l.length-1;E++){var U=l[E];if(!(U in g))break e;g=g[U]}l=l[l.length-1],E=g[l],f=f(E),f!=E&&f!=null&&e(g,l,{configurable:!0,writable:!0,value:f})}}function r(l,f){l instanceof String&&(l+="");var g=0,E=!1,U={next:function(){if(!E&&g<l.length){var q=g++;return{value:f(q,l[q]),done:!1}}return E=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}i("Array.prototype.values",function(l){return l||function(){return r(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function u(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function d(l,f,g){return l.call.apply(l.bind,arguments)}function h(l,f,g){if(!l)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,E),l.apply(f,U)}}return function(){return l.apply(f,arguments)}}function p(l,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function y(l,f){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function _(l,f){function g(){}g.prototype=f.prototype,l.aa=f.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(E,U,q){for(var ie=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)ie[Xe-2]=arguments[Xe];return f.prototype[U].apply(E,ie)}}function I(l){const f=l.length;if(0<f){const g=Array(f);for(let E=0;E<f;E++)g[E]=l[E];return g}return[]}function k(l,f){for(let g=1;g<arguments.length;g++){const E=arguments[g];if(c(E)){const U=l.length||0,q=E.length||0;l.length=U+q;for(let ie=0;ie<q;ie++)l[U+ie]=E[ie]}else l.push(E)}}class N{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function L(l){return/^[\s\xa0]*$/.test(l)}function R(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function C(l){return C[" "](l),l}C[" "]=function(){};var P=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function O(l,f,g){for(const E in l)f.call(g,l[E],E,l)}function b(l,f){for(const g in l)f.call(void 0,l[g],g,l)}function w(l){const f={};for(const g in l)f[g]=l[g];return f}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(l,f){let g,E;for(let U=1;U<arguments.length;U++){E=arguments[U];for(g in E)l[g]=E[g];for(let q=0;q<T.length;q++)g=T[q],Object.prototype.hasOwnProperty.call(E,g)&&(l[g]=E[g])}}function D(l){var f=1;l=l.split(":");const g=[];for(;0<f&&l.length;)g.push(l.shift()),f--;return l.length&&g.push(l.join(":")),g}function x(l){a.setTimeout(()=>{throw l},0)}function S(){var l=Le;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class ve{constructor(){this.h=this.g=null}add(f,g){const E=Se.get();E.set(f,g),this.h?this.h.next=E:this.g=E,this.h=E}}var Se=new N(()=>new re,l=>l.reset());class re{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,le=!1,Le=new ve,St=()=>{const l=a.Promise.resolve(void 0);fe=()=>{l.then(Et)}};var Et=()=>{for(var l;l=S();){try{l.h.call(l.g)}catch(g){x(g)}var f=Se;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}le=!1};function He(){this.s=this.s,this.C=this.C}He.prototype.s=!1,He.prototype.ma=function(){this.s||(this.s=!0,this.N())},He.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function je(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}je.prototype.h=function(){this.defaultPrevented=!0};var Me=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return l})();function ce(l,f){if(je.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(P){e:{try{C(f.nodeName);var U=!0;break e}catch{}U=!1}U||(f=null)}}else g=="mouseover"?f=l.fromElement:g=="mouseout"&&(f=l.toElement);this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:W[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&ce.aa.h.call(this)}}_(ce,je);var W={2:"touch",3:"pen",4:"mouse"};ce.prototype.h=function(){ce.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),B=0;function K(l,f,g,E,U){this.listener=l,this.proxy=null,this.src=f,this.type=g,this.capture=!!E,this.ha=U,this.key=++B,this.da=this.fa=!1}function ue(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Te(l){this.src=l,this.g={},this.h=0}Te.prototype.add=function(l,f,g,E,U){var q=l.toString();l=this.g[q],l||(l=this.g[q]=[],this.h++);var ie=M(l,f,E,U);return-1<ie?(f=l[ie],g||(f.fa=!1)):(f=new K(f,this.src,q,!!E,U),f.fa=g,l.push(f)),f};function $e(l,f){var g=f.type;if(g in l.g){var E=l.g[g],U=Array.prototype.indexOf.call(E,f,void 0),q;(q=0<=U)&&Array.prototype.splice.call(E,U,1),q&&(ue(f),l.g[g].length==0&&(delete l.g[g],l.h--))}}function M(l,f,g,E){for(var U=0;U<l.length;++U){var q=l[U];if(!q.da&&q.listener==f&&q.capture==!!g&&q.ha==E)return U}return-1}var V="closure_lm_"+(1e6*Math.random()|0),j={};function Z(l,f,g,E,U){if(Array.isArray(f)){for(var q=0;q<f.length;q++)Z(l,f[q],g,E,U);return null}return g=me(g),l&&l[F]?l.K(f,g,u(E)?!!E.capture:!1,U):Q(l,f,g,!1,E,U)}function Q(l,f,g,E,U,q){if(!f)throw Error("Invalid event type");var ie=u(U)?!!U.capture:!!U,Xe=ge(l);if(Xe||(l[V]=Xe=new Te(l)),g=Xe.add(f,g,E,ie,q),g.proxy)return g;if(E=ee(),g.proxy=E,E.src=l,E.listener=g,l.addEventListener)Me||(U=ie),U===void 0&&(U=!1),l.addEventListener(f.toString(),E,U);else if(l.attachEvent)l.attachEvent(se(f.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ee(){function l(g){return f.call(l.src,l.listener,g)}const f=ne;return l}function J(l,f,g,E,U){if(Array.isArray(f))for(var q=0;q<f.length;q++)J(l,f[q],g,E,U);else E=u(E)?!!E.capture:!!E,g=me(g),l&&l[F]?(l=l.i,f=String(f).toString(),f in l.g&&(q=l.g[f],g=M(q,g,E,U),-1<g&&(ue(q[g]),Array.prototype.splice.call(q,g,1),q.length==0&&(delete l.g[f],l.h--)))):l&&(l=ge(l))&&(f=l.g[f.toString()],l=-1,f&&(l=M(f,g,E,U)),(g=-1<l?f[l]:null)&&H(g))}function H(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[F])$e(f.i,l);else{var g=l.type,E=l.proxy;f.removeEventListener?f.removeEventListener(g,E,l.capture):f.detachEvent?f.detachEvent(se(g),E):f.addListener&&f.removeListener&&f.removeListener(E),(g=ge(f))?($e(g,l),g.h==0&&(g.src=null,f[V]=null)):ue(l)}}}function se(l){return l in j?j[l]:j[l]="on"+l}function ne(l,f){if(l.da)l=!0;else{f=new ce(f,this);var g=l.listener,E=l.ha||l.src;l.fa&&H(l),l=g.call(E,f)}return l}function ge(l){return l=l[V],l instanceof Te?l:null}var ae="__closure_events_fn_"+(1e9*Math.random()>>>0);function me(l){return typeof l=="function"?l:(l[ae]||(l[ae]=function(f){return l.handleEvent(f)}),l[ae])}function pe(){He.call(this),this.i=new Te(this),this.M=this,this.F=null}_(pe,He),pe.prototype[F]=!0,pe.prototype.removeEventListener=function(l,f,g,E){J(this,l,f,g,E)};function Ie(l,f){var g,E=l.F;if(E)for(g=[];E;E=E.F)g.push(E);if(l=l.M,E=f.type||f,typeof f=="string")f=new je(f,l);else if(f instanceof je)f.target=f.target||l;else{var U=f;f=new je(E,l),A(f,U)}if(U=!0,g)for(var q=g.length-1;0<=q;q--){var ie=f.g=g[q];U=We(ie,E,!0,f)&&U}if(ie=f.g=l,U=We(ie,E,!0,f)&&U,U=We(ie,E,!1,f)&&U,g)for(q=0;q<g.length;q++)ie=f.g=g[q],U=We(ie,E,!1,f)&&U}pe.prototype.N=function(){if(pe.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var g=l.g[f],E=0;E<g.length;E++)ue(g[E]);delete l.g[f],l.h--}}this.F=null},pe.prototype.K=function(l,f,g,E){return this.i.add(String(l),f,!1,g,E)},pe.prototype.L=function(l,f,g,E){return this.i.add(String(l),f,!0,g,E)};function We(l,f,g,E){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var U=!0,q=0;q<f.length;++q){var ie=f[q];if(ie&&!ie.da&&ie.capture==g){var Xe=ie.listener,Pt=ie.ha||ie.src;ie.fa&&$e(l.i,ie),U=Xe.call(Pt,E)!==!1&&U}}return U&&!E.defaultPrevented}function Be(l,f,g){if(typeof l=="function")g&&(l=p(l,g));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function Ct(l){l.g=Be(()=>{l.g=null,l.i&&(l.i=!1,Ct(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class kt extends He{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Ct(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rt(l){He.call(this),this.h=l,this.g={}}_(Rt,He);var Lt=[];function gs(l){O(l.g,function(f,g){this.g.hasOwnProperty(g)&&H(f)},l),l.g={}}Rt.prototype.N=function(){Rt.aa.N.call(this),gs(this)},Rt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mi=a.JSON.stringify,qt=a.JSON.parse,un=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Di(){}Di.prototype.h=null;function xr(l){return l.h||(l.h=l.i())}function uf(){}var Mr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ac(){je.call(this,"d")}_(Ac,je);function Sc(){je.call(this,"c")}_(Sc,je);var ei={},df=null;function ea(){return df=df||new pe}ei.La="serverreachability";function hf(l){je.call(this,ei.La,l)}_(hf,je);function Dr(l){const f=ea();Ie(f,new hf(f))}ei.STAT_EVENT="statevent";function ff(l,f){je.call(this,ei.STAT_EVENT,l),this.stat=f}_(ff,je);function Kt(l){const f=ea();Ie(f,new ff(f,l))}ei.Ma="timingevent";function pf(l,f){je.call(this,ei.Ma,l),this.size=f}_(pf,je);function Nr(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function Or(){this.g=!0}Or.prototype.xa=function(){this.g=!1};function tb(l,f,g,E,U,q){l.info(function(){if(l.g)if(q)for(var ie="",Xe=q.split("&"),Pt=0;Pt<Xe.length;Pt++){var ze=Xe[Pt].split("=");if(1<ze.length){var Ft=ze[0];ze=ze[1];var $t=Ft.split("_");ie=2<=$t.length&&$t[1]=="type"?ie+(Ft+"="+ze+"&"):ie+(Ft+"=redacted&")}}else ie=null;else ie=q;return"XMLHTTP REQ ("+E+") [attempt "+U+"]: "+f+`
`+g+`
`+ie})}function nb(l,f,g,E,U,q,ie){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+U+"]: "+f+`
`+g+`
`+q+" "+ie})}function Ni(l,f,g,E){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+ib(l,g)+(E?" "+E:"")})}function sb(l,f){l.info(function(){return"TIMEOUT: "+f})}Or.prototype.info=function(){};function ib(l,f){if(!l.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var E=g[l];if(!(2>E.length)){var U=E[1];if(Array.isArray(U)&&!(1>U.length)){var q=U[0];if(q!="noop"&&q!="stop"&&q!="close")for(var ie=1;ie<U.length;ie++)U[ie]=""}}}}return Mi(g)}catch{return f}}var ta={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},mf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Cc;function na(){}_(na,Di),na.prototype.g=function(){return new XMLHttpRequest},na.prototype.i=function(){return{}},Cc=new na;function ys(l,f,g,E){this.j=l,this.i=f,this.l=g,this.R=E||1,this.U=new Rt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gf}function gf(){this.i=null,this.g="",this.h=!1}var yf={},Rc={};function Pc(l,f,g){l.L=1,l.v=oa(Hn(f)),l.m=g,l.P=!0,vf(l,null)}function vf(l,f){l.F=Date.now(),sa(l),l.A=Hn(l.v);var g=l.A,E=l.R;Array.isArray(E)||(E=[String(E)]),Mf(g.i,"t",E),l.C=0,g=l.j.J,l.h=new gf,l.g=Yf(l.j,g?f:null,!l.m),0<l.O&&(l.M=new kt(p(l.Y,l,l.g),l.O)),f=l.U,g=l.g,E=l.ca;var U="readystatechange";Array.isArray(U)||(U&&(Lt[0]=U.toString()),U=Lt);for(var q=0;q<U.length;q++){var ie=Z(g,U[q],E||f.handleEvent,!1,f.h||f);if(!ie)break;f.g[ie.key]=ie}f=l.H?w(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),Dr(),tb(l.i,l.u,l.A,l.l,l.R,l.m)}ys.prototype.ca=function(l){l=l.target;const f=this.M;f&&Wn(l)==3?f.j():this.Y(l)},ys.prototype.Y=function(l){try{if(l==this.g)e:{const $t=Wn(this.g);var f=this.g.Ba();const Li=this.g.Z();if(!(3>$t)&&($t!=3||this.g&&(this.h.h||this.g.oa()||$f(this.g)))){this.J||$t!=4||f==7||(f==8||0>=Li?Dr(3):Dr(2)),xc(this);var g=this.g.Z();this.X=g;t:if(_f(this)){var E=$f(this.g);l="";var U=E.length,q=Wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ti(this),Vr(this);var ie="";break t}this.h.i=new a.TextDecoder}for(f=0;f<U;f++)this.h.h=!0,l+=this.h.i.decode(E[f],{stream:!(q&&f==U-1)});E.length=0,this.h.g+=l,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=g==200,nb(this.i,this.u,this.A,this.l,this.R,$t,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Xe,Pt=this.g;if((Xe=Pt.g?Pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(Xe)){var ze=Xe;break t}}ze=null}if(g=ze)Ni(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mc(this,g);else{this.o=!1,this.s=3,Kt(12),ti(this),Vr(this);break e}}if(this.P){g=!0;let wn;for(;!this.J&&this.C<ie.length;)if(wn=rb(this,ie),wn==Rc){$t==4&&(this.s=4,Kt(14),g=!1),Ni(this.i,this.l,null,"[Incomplete Response]");break}else if(wn==yf){this.s=4,Kt(15),Ni(this.i,this.l,ie,"[Invalid Chunk]"),g=!1;break}else Ni(this.i,this.l,wn,null),Mc(this,wn);if(_f(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$t!=4||ie.length!=0||this.h.h||(this.s=1,Kt(16),g=!1),this.o=this.o&&g,!g)Ni(this.i,this.l,ie,"[Invalid Chunked Response]"),ti(this),Vr(this);else if(0<ie.length&&!this.W){this.W=!0;var Ft=this.j;Ft.g==this&&Ft.ba&&!Ft.M&&(Ft.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),Fc(Ft),Ft.M=!0,Kt(11))}}else Ni(this.i,this.l,ie,null),Mc(this,ie);$t==4&&ti(this),this.o&&!this.J&&($t==4?qf(this.j,this):(this.o=!1,sa(this)))}else Tb(this.g),g==400&&0<ie.indexOf("Unknown SID")?(this.s=3,Kt(12)):(this.s=0,Kt(13)),ti(this),Vr(this)}}}catch{}finally{}};function _f(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function rb(l,f){var g=l.C,E=f.indexOf(`
`,g);return E==-1?Rc:(g=Number(f.substring(g,E)),isNaN(g)?yf:(E+=1,E+g>f.length?Rc:(f=f.slice(E,E+g),l.C=E+g,f)))}ys.prototype.cancel=function(){this.J=!0,ti(this)};function sa(l){l.S=Date.now()+l.I,wf(l,l.I)}function wf(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Nr(p(l.ba,l),f)}function xc(l){l.B&&(a.clearTimeout(l.B),l.B=null)}ys.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(sb(this.i,this.A),this.L!=2&&(Dr(),Kt(17)),ti(this),this.s=2,Vr(this)):wf(this,this.S-l)};function Vr(l){l.j.G==0||l.J||qf(l.j,l)}function ti(l){xc(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,gs(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function Mc(l,f){try{var g=l.j;if(g.G!=0&&(g.g==l||Dc(g.h,l))){if(!l.K&&Dc(g.h,l)&&g.G==3){try{var E=g.Da.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var U=E;if(U[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)ha(g),ua(g);else break e;Lc(g),Kt(18)}}else g.za=U[1],0<g.za-g.T&&37500>U[2]&&g.F&&g.v==0&&!g.C&&(g.C=Nr(p(g.Za,g),6e3));if(1>=If(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else si(g,11)}else if((l.K||g.g==l)&&ha(g),!L(f))for(U=g.Da.g.parse(f),f=0;f<U.length;f++){let ze=U[f];if(g.T=ze[0],ze=ze[1],g.G==2)if(ze[0]=="c"){g.K=ze[1],g.ia=ze[2];const Ft=ze[3];Ft!=null&&(g.la=Ft,g.j.info("VER="+g.la));const $t=ze[4];$t!=null&&(g.Aa=$t,g.j.info("SVER="+g.Aa));const Li=ze[5];Li!=null&&typeof Li=="number"&&0<Li&&(E=1.5*Li,g.L=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const wn=l.g;if(wn){const pa=wn.g?wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pa){var q=E.h;q.g||pa.indexOf("spdy")==-1&&pa.indexOf("quic")==-1&&pa.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Nc(q,q.h),q.h=null))}if(E.D){const $c=wn.g?wn.g.getResponseHeader("X-HTTP-Session-Id"):null;$c&&(E.ya=$c,it(E.I,E.D,$c))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),E=g;var ie=l;if(E.qa=Qf(E,E.J?E.ia:null,E.W),ie.K){Ef(E.h,ie);var Xe=ie,Pt=E.L;Pt&&(Xe.I=Pt),Xe.B&&(xc(Xe),sa(Xe)),E.g=ie}else Hf(E);0<g.i.length&&da(g)}else ze[0]!="stop"&&ze[0]!="close"||si(g,7);else g.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?si(g,7):Vc(g):ze[0]!="noop"&&g.l&&g.l.ta(ze),g.v=0)}}Dr(4)}catch{}}var ob=class{constructor(l,f){this.g=l,this.map=f}};function bf(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Tf(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function If(l){return l.h?1:l.g?l.g.size:0}function Dc(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function Nc(l,f){l.g?l.g.add(f):l.h=f}function Ef(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}bf.prototype.cancel=function(){if(this.i=kf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function kf(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const g of l.g.values())f=f.concat(g.D);return f}return I(l.i)}function ab(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var f=[],g=l.length,E=0;E<g;E++)f.push(l[E]);return f}f=[],g=0;for(E in l)f[g++]=l[E];return f}function lb(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var f=[];l=l.length;for(var g=0;g<l;g++)f.push(g);return f}f=[],g=0;for(const E in l)f[g++]=E;return f}}}function Af(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var g=lb(l),E=ab(l),U=E.length,q=0;q<U;q++)f.call(void 0,E[q],g&&g[q],l)}var Sf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cb(l,f){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var E=l[g].indexOf("="),U=null;if(0<=E){var q=l[g].substring(0,E);U=l[g].substring(E+1)}else q=l[g];f(q,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function ni(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ni){this.h=l.h,ia(this,l.j),this.o=l.o,this.g=l.g,ra(this,l.s),this.l=l.l;var f=l.i,g=new $r;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Cf(this,g),this.m=l.m}else l&&(f=String(l).match(Sf))?(this.h=!1,ia(this,f[1]||"",!0),this.o=Lr(f[2]||""),this.g=Lr(f[3]||"",!0),ra(this,f[4]),this.l=Lr(f[5]||"",!0),Cf(this,f[6]||"",!0),this.m=Lr(f[7]||"")):(this.h=!1,this.i=new $r(null,this.h))}ni.prototype.toString=function(){var l=[],f=this.j;f&&l.push(Fr(f,Rf,!0),":");var g=this.g;return(g||f=="file")&&(l.push("//"),(f=this.o)&&l.push(Fr(f,Rf,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(Fr(g,g.charAt(0)=="/"?hb:db,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Fr(g,pb)),l.join("")};function Hn(l){return new ni(l)}function ia(l,f,g){l.j=g?Lr(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function ra(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Cf(l,f,g){f instanceof $r?(l.i=f,mb(l.i,l.h)):(g||(f=Fr(f,fb)),l.i=new $r(f,l.h))}function it(l,f,g){l.i.set(f,g)}function oa(l){return it(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Lr(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Fr(l,f,g){return typeof l=="string"?(l=encodeURI(l).replace(f,ub),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function ub(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Rf=/[#\/\?@]/g,db=/[#\?:]/g,hb=/[#\?]/g,fb=/[#\?@]/g,pb=/#/g;function $r(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function vs(l){l.g||(l.g=new Map,l.h=0,l.i&&cb(l.i,function(f,g){l.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=$r.prototype,t.add=function(l,f){vs(this),this.i=null,l=Oi(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(f),this.h+=1,this};function Pf(l,f){vs(l),f=Oi(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function xf(l,f){return vs(l),f=Oi(l,f),l.g.has(f)}t.forEach=function(l,f){vs(this),this.g.forEach(function(g,E){g.forEach(function(U){l.call(f,U,E,this)},this)},this)},t.na=function(){vs(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let E=0;E<f.length;E++){const U=l[E];for(let q=0;q<U.length;q++)g.push(f[E])}return g},t.V=function(l){vs(this);let f=[];if(typeof l=="string")xf(this,l)&&(f=f.concat(this.g.get(Oi(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)f=f.concat(l[g])}return f},t.set=function(l,f){return vs(this),this.i=null,l=Oi(this,l),xf(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Mf(l,f,g){Pf(l,f),0<g.length&&(l.i=null,l.g.set(Oi(l,f),I(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var E=f[g];const q=encodeURIComponent(String(E)),ie=this.V(E);for(E=0;E<ie.length;E++){var U=q;ie[E]!==""&&(U+="="+encodeURIComponent(String(ie[E]))),l.push(U)}}return this.i=l.join("&")};function Oi(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function mb(l,f){f&&!l.j&&(vs(l),l.i=null,l.g.forEach(function(g,E){var U=E.toLowerCase();E!=U&&(Pf(this,E),Mf(this,U,g))},l)),l.j=f}function gb(l,f){const g=new Or;if(a.Image){const E=new Image;E.onload=y(_s,g,"TestLoadImage: loaded",!0,f,E),E.onerror=y(_s,g,"TestLoadImage: error",!1,f,E),E.onabort=y(_s,g,"TestLoadImage: abort",!1,f,E),E.ontimeout=y(_s,g,"TestLoadImage: timeout",!1,f,E),a.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else f(!1)}function yb(l,f){const g=new Or,E=new AbortController,U=setTimeout(()=>{E.abort(),_s(g,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:E.signal}).then(q=>{clearTimeout(U),q.ok?_s(g,"TestPingServer: ok",!0,f):_s(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(U),_s(g,"TestPingServer: error",!1,f)})}function _s(l,f,g,E,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),E(g)}catch{}}function vb(){this.g=new un}function _b(l,f,g){const E=g||"";try{Af(l,function(U,q){let ie=U;u(U)&&(ie=Mi(U)),f.push(E+q+"="+encodeURIComponent(ie))})}catch(U){throw f.push(E+"type="+encodeURIComponent("_badmap")),U}}function aa(l){this.l=l.Ub||null,this.j=l.eb||!1}_(aa,Di),aa.prototype.g=function(){return new la(this.l,this.j)},aa.prototype.i=(function(l){return function(){return l}})({});function la(l,f){pe.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(la,pe),t=la.prototype,t.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,jr(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ur(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,jr(this)),this.g&&(this.readyState=3,jr(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Df(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Df(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Ur(this):jr(this),this.readyState==3&&Df(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Ur(this))},t.Qa=function(l){this.g&&(this.response=l,Ur(this))},t.ga=function(){this.g&&Ur(this)};function Ur(l){l.readyState=4,l.l=null,l.j=null,l.v=null,jr(l)}t.setRequestHeader=function(l,f){this.u.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=f.next();return l.join(`\r
`)};function jr(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(la.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Nf(l){let f="";return O(l,function(g,E){f+=E,f+=":",f+=g,f+=`\r
`}),f}function Oc(l,f,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=Nf(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):it(l,f,g))}function dt(l){pe.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(dt,pe);var wb=/^https?$/i,bb=["POST","PUT"];t=dt.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,f,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Cc.g(),this.v=this.o?xr(this.o):xr(Cc),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(q){Of(this,q);return}if(l=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var U in E)g.set(U,E[U]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const q of E.keys())g.set(q,E.get(q));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(q=>q.toLowerCase()=="content-type"),U=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(bb,f,void 0))||E||U||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ie]of g)this.g.setRequestHeader(q,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ff(this),this.u=!0,this.g.send(l),this.u=!1}catch(q){Of(this,q)}};function Of(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Vf(l),ca(l)}function Vf(l){l.A||(l.A=!0,Ie(l,"complete"),Ie(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Ie(this,"complete"),Ie(this,"abort"),ca(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ca(this,!0)),dt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Lf(this):this.bb())},t.bb=function(){Lf(this)};function Lf(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Wn(l)!=4||l.Z()!=2)){if(l.u&&Wn(l)==4)Be(l.Ea,0,l);else if(Ie(l,"readystatechange"),Wn(l)==4){l.h=!1;try{const ie=l.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var E;if(E=ie===0){var U=String(l.D).match(Sf)[1]||null;!U&&a.self&&a.self.location&&(U=a.self.location.protocol.slice(0,-1)),E=!wb.test(U?U.toLowerCase():"")}g=E}if(g)Ie(l,"complete"),Ie(l,"success");else{l.m=6;try{var q=2<Wn(l)?l.g.statusText:""}catch{q=""}l.l=q+" ["+l.Z()+"]",Vf(l)}}finally{ca(l)}}}}function ca(l,f){if(l.g){Ff(l);const g=l.g,E=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||Ie(l,"ready");try{g.onreadystatechange=E}catch{}}}function Ff(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Wn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Wn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),qt(f)}};function $f(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Tb(l){const f={};l=(l.g&&2<=Wn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(L(l[E]))continue;var g=D(l[E]);const U=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const q=f[U]||[];f[U]=q,q.push(g)}b(f,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Br(l,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||f}function Uf(l){this.Aa=0,this.i=[],this.j=new Or,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Br("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Br("baseRetryDelayMs",5e3,l),this.cb=Br("retryDelaySeedMs",1e4,l),this.Wa=Br("forwardChannelMaxRetries",2,l),this.wa=Br("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new bf(l&&l.concurrentRequestLimit),this.Da=new vb,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Uf.prototype,t.la=8,t.G=1,t.connect=function(l,f,g,E){Kt(0),this.W=l,this.H=f||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.I=Qf(this,null,this.W),da(this)};function Vc(l){if(jf(l),l.G==3){var f=l.U++,g=Hn(l.I);if(it(g,"SID",l.K),it(g,"RID",f),it(g,"TYPE","terminate"),zr(l,g),f=new ys(l,l.j,f),f.L=2,f.v=oa(Hn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=Yf(f.j,null),f.g.ea(f.v)),f.F=Date.now(),sa(f)}Gf(l)}function ua(l){l.g&&(Fc(l),l.g.cancel(),l.g=null)}function jf(l){ua(l),l.u&&(a.clearTimeout(l.u),l.u=null),ha(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function da(l){if(!Tf(l.h)&&!l.s){l.s=!0;var f=l.Ga;fe||St(),le||(fe(),le=!0),Le.add(f,l),l.B=0}}function Ib(l,f){return If(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Nr(p(l.Ga,l,f),Kf(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const U=new ys(this,this.j,l);let q=this.o;if(this.S&&(q?(q=w(q),A(q,this.S)):q=this.S),this.m!==null||this.O||(U.H=q,q=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(f+=E,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=zf(this,U,f),g=Hn(this.I),it(g,"RID",l),it(g,"CVER",22),this.D&&it(g,"X-HTTP-Session-Id",this.D),zr(this,g),q&&(this.O?f="headers="+encodeURIComponent(String(Nf(q)))+"&"+f:this.m&&Oc(g,this.m,q)),Nc(this.h,U),this.Ua&&it(g,"TYPE","init"),this.P?(it(g,"$req",f),it(g,"SID","null"),U.T=!0,Pc(U,g,null)):Pc(U,g,f),this.G=2}}else this.G==3&&(l?Bf(this,l):this.i.length==0||Tf(this.h)||Bf(this))};function Bf(l,f){var g;f?g=f.l:g=l.U++;const E=Hn(l.I);it(E,"SID",l.K),it(E,"RID",g),it(E,"AID",l.T),zr(l,E),l.m&&l.o&&Oc(E,l.m,l.o),g=new ys(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),f&&(l.i=f.D.concat(l.i)),f=zf(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Nc(l.h,g),Pc(g,E,f)}function zr(l,f){l.H&&O(l.H,function(g,E){it(f,E,g)}),l.l&&Af({},function(g,E){it(f,E,g)})}function zf(l,f,g){g=Math.min(l.i.length,g);var E=l.l?p(l.l.Na,l.l,l):null;e:{var U=l.i;let q=-1;for(;;){const ie=["count="+g];q==-1?0<g?(q=U[0].g,ie.push("ofs="+q)):q=0:ie.push("ofs="+q);let Xe=!0;for(let Pt=0;Pt<g;Pt++){let ze=U[Pt].g;const Ft=U[Pt].map;if(ze-=q,0>ze)q=Math.max(0,U[Pt].g-100),Xe=!1;else try{_b(Ft,ie,"req"+ze+"_")}catch{E&&E(Ft)}}if(Xe){E=ie.join("&");break e}}}return l=l.i.splice(0,g),f.D=l,E}function Hf(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;fe||St(),le||(fe(),le=!0),Le.add(f,l),l.v=0}}function Lc(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Nr(p(l.Fa,l),Kf(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Wf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Nr(p(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Kt(10),ua(this),Wf(this))};function Fc(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Wf(l){l.g=new ys(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Hn(l.qa);it(f,"RID","rpc"),it(f,"SID",l.K),it(f,"AID",l.T),it(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&it(f,"TO",l.ja),it(f,"TYPE","xmlhttp"),zr(l,f),l.m&&l.o&&Oc(f,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=oa(Hn(f)),g.m=null,g.P=!0,vf(g,l)}t.Za=function(){this.C!=null&&(this.C=null,ua(this),Lc(this),Kt(19))};function ha(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function qf(l,f){var g=null;if(l.g==f){ha(l),Fc(l),l.g=null;var E=2}else if(Dc(l.h,f))g=f.D,Ef(l.h,f),E=1;else return;if(l.G!=0){if(f.o)if(E==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var U=l.B;E=ea(),Ie(E,new pf(E,g)),da(l)}else Hf(l);else if(U=f.s,U==3||U==0&&0<f.X||!(E==1&&Ib(l,f)||E==2&&Lc(l)))switch(g&&0<g.length&&(f=l.h,f.i=f.i.concat(g)),U){case 1:si(l,5);break;case 4:si(l,10);break;case 3:si(l,6);break;default:si(l,2)}}}function Kf(l,f){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*f}function si(l,f){if(l.j.info("Error code "+f),f==2){var g=p(l.fb,l),E=l.Xa;const U=!E;E=new ni(E||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ia(E,"https"),oa(E),U?gb(E.toString(),g):yb(E.toString(),g)}else Kt(2);l.G=0,l.l&&l.l.sa(f),Gf(l),jf(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function Gf(l){if(l.G=0,l.ka=[],l.l){const f=kf(l.h);(f.length!=0||l.i.length!=0)&&(k(l.ka,f),k(l.ka,l.i),l.h.i.length=0,I(l.i),l.i.length=0),l.l.ra()}}function Qf(l,f,g){var E=g instanceof ni?Hn(g):new ni(g);if(E.g!="")f&&(E.g=f+"."+E.g),ra(E,E.s);else{var U=a.location;E=U.protocol,f=f?f+"."+U.hostname:U.hostname,U=+U.port;var q=new ni(null);E&&ia(q,E),f&&(q.g=f),U&&ra(q,U),g&&(q.l=g),E=q}return g=l.D,f=l.ya,g&&f&&it(E,g,f),it(E,"VER",l.la),zr(l,E),E}function Yf(l,f,g){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new dt(new aa({eb:g})):new dt(l.pa),f.Ha(l.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jf(){}t=Jf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function fa(){}fa.prototype.g=function(l,f){return new sn(l,f)};function sn(l,f){pe.call(this),this.g=new Uf(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!L(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!L(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new Vi(this)}_(sn,pe),sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){Vc(this.g)},sn.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=Mi(l),l=g);f.i.push(new ob(f.Ya++,l)),f.G==3&&da(f)},sn.prototype.N=function(){this.g.l=null,delete this.j,Vc(this.g),delete this.g,sn.aa.N.call(this)};function Xf(l){Ac.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const g in f){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}_(Xf,Ac);function Zf(){Sc.call(this),this.status=1}_(Zf,Sc);function Vi(l){this.g=l}_(Vi,Jf),Vi.prototype.ua=function(){Ie(this.g,"a")},Vi.prototype.ta=function(l){Ie(this.g,new Xf(l))},Vi.prototype.sa=function(l){Ie(this.g,new Zf)},Vi.prototype.ra=function(){Ie(this.g,"b")},fa.prototype.createWebChannel=fa.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,q_=function(){return new fa},W_=function(){return ea()},H_=ei,ld={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ta.NO_ERROR=0,ta.TIMEOUT=8,ta.HTTP_ERROR=6,ja=ta,mf.COMPLETE="complete",z_=mf,uf.EventType=Mr,Mr.OPEN="a",Mr.CLOSE="b",Mr.ERROR="c",Mr.MESSAGE="d",pe.prototype.listen=pe.prototype.K,Xr=uf,dt.prototype.listenOnce=dt.prototype.L,dt.prototype.getLastError=dt.prototype.Ka,dt.prototype.getLastErrorCode=dt.prototype.Ba,dt.prototype.getStatus=dt.prototype.Z,dt.prototype.getResponseJson=dt.prototype.Oa,dt.prototype.getResponseText=dt.prototype.oa,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Ha,B_=dt}).apply(typeof ka<"u"?ka:typeof self<"u"?self:typeof window<"u"?window:{});const Fm="@firebase/firestore",$m="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bt.UNAUTHENTICATED=new Bt(null),Bt.GOOGLE_CREDENTIALS=new Bt("google-credentials-uid"),Bt.FIRST_PARTY=new Bt("first-party-uid"),Bt.MOCK_USER=new Bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sr="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai=new ph("@firebase/firestore");function Wi(){return Ai.logLevel}function he(t,...e){if(Ai.logLevel<=De.DEBUG){const n=e.map(yh);Ai.debug(`Firestore (${Sr}): ${t}`,...n)}}function cs(t,...e){if(Ai.logLevel<=De.ERROR){const n=e.map(yh);Ai.error(`Firestore (${Sr}): ${t}`,...n)}}function mr(t,...e){if(Ai.logLevel<=De.WARN){const n=e.map(yh);Ai.warn(`Firestore (${Sr}): ${t}`,...n)}}function yh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,K_(t,s,n)}function K_(t,e,n){let s=`FIRESTORE (${Sr}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw cs(s),new Error(s)}function Ye(t,e,n,s){let i="Unexpected state";typeof n=="string"?i=n:s=n,t||K_(e,i,s)}function Pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends ms{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Bt.UNAUTHENTICATED)))}shutdown(){}}class dM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class hM{constructor(e){this.t=e,this.currentUser=Bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ye(this.o===void 0,42304);let s=this.i;const i=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let r=new ss;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new ss,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const c=r;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},a=c=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((c=>a(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new ss)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ye(typeof s.accessToken=="string",31837,{l:s}),new G_(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string",2055,{h:e}),new Bt(e)}}class fM{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Bt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class pM{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new fM(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Bt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Um{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mM{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ye(this.o===void 0,3512);const s=r=>{r.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.m;return this.m=r.token,he("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable((()=>s(r)))};const i=r=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((r=>i(r))),setTimeout((()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?i(r):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Um(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Um(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=gM(40);for(let r=0;r<i.length;++r)s.length<20&&i[r]<n&&(s+=e.charAt(i[r]%62))}return s}}function Ne(t,e){return t<e?-1:t>e?1:0}function cd(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const i=t.charAt(s),r=e.charAt(s);if(i!==r)return fu(i)===fu(r)?Ne(i,r):fu(i)?1:-1}return Ne(t.length,e.length)}const yM=55296,vM=57343;function fu(t){const e=t.charCodeAt(0);return e>=yM&&e<=vM}function gr(t,e,n){return t.length===e.length&&t.every(((s,i)=>n(s,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="__name__";class Mn{constructor(e,n,s){n===void 0?n=0:n>e.length&&ke(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&ke(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Mn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Mn?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let i=0;i<s;i++){const r=Mn.compareSegments(e.get(i),n.get(i));if(r!==0)return r}return Ne(e.length,n.length)}static compareSegments(e,n){const s=Mn.isNumericId(e),i=Mn.isNumericId(n);return s&&!i?-1:!s&&i?1:s&&i?Mn.extractNumericId(e).compare(Mn.extractNumericId(n)):cd(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $s.fromString(e.substring(4,e.length-2))}}class st extends Mn{construct(e,n,s){return new st(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new de(G.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((i=>i.length>0)))}return new st(n)}static emptyPath(){return new st([])}}const _M=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends Mn{construct(e,n,s){return new Nt(e,n,s)}static isValidIdentifier(e){return _M.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jm}static keyField(){return new Nt([jm])}static fromServerFormat(e){const n=[];let s="",i=0;const r=()=>{if(s.length===0)throw new de(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new de(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new de(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(s+=a,i++):(r(),i++)}if(r(),o)throw new de(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(n)}static emptyPath(){return new Nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(st.fromString(e))}static fromName(e){return new _e(st.fromString(e).popFirst(5))}static empty(){return new _e(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return st.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new st(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(t,e,n){if(!n)throw new de(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function wM(t,e,n,s){if(e===!0&&s===!0)throw new de(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Bm(t){if(!_e.isDocumentKey(t))throw new de(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function zm(t){if(_e.isDocumentKey(t))throw new de(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Y_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ec(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ke(12329,{type:typeof t})}function tn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new de(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ec(t);throw new de(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function bM(t,e){if(e<=0)throw new de(G.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ho(t,e){if(!Y_(t))throw new de(G.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const i=e[s].typeString,r="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(i&&typeof o!==i){n=`JSON field '${s}' must be a ${i}.`;break}if(r!==void 0&&o!==r.value){n=`Expected '${s}' field to equal '${r.value}'`;break}}if(n)throw new de(G.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm=-62135596800,Wm=1e6;class ot{static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Wm);return new ot(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Hm)throw new de(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Wm}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ho(e,ot._jsonSchema))return new ot(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Hm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ot._jsonSchemaVersion="firestore/timestamp/1.0",ot._jsonSchema={type:yt("string",ot._jsonSchemaVersion),seconds:yt("number"),nanoseconds:yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new ot(0,0))}static max(){return new Re(new ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=-1;function TM(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,i=Re.fromTimestamp(s===1e9?new ot(n+1,0):new ot(n,s));return new zs(i,_e.empty(),e)}function IM(t){return new zs(t.readTime,t.key,Ao)}class zs{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new zs(Re.min(),_e.empty(),Ao)}static max(){return new zs(Re.max(),_e.empty(),Ao)}}function EM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=_e.comparator(t.documentKey,e.documentKey),n!==0?n:Ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cr(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==kM)throw t;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Y(((s,i)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(s,i)},this.catchCallback=r=>{this.wrapFailure(n,r).next(s,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Y?n:Y.resolve(n)}catch(n){return Y.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Y.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Y.reject(n)}static resolve(e){return new Y(((n,s)=>{n(e)}))}static reject(e){return new Y(((n,s)=>{s(e)}))}static waitFor(e){return new Y(((n,s)=>{let i=0,r=0,o=!1;e.forEach((a=>{++i,a.next((()=>{++r,o&&r===i&&n()}),(c=>s(c)))})),o=!0,r===i&&n()}))}static or(e){let n=Y.resolve(!1);for(const s of e)n=n.next((i=>i?Y.resolve(i):s()));return n}static forEach(e,n){const s=[];return e.forEach(((i,r)=>{s.push(n.call(this,i,r))})),this.waitFor(s)}static mapArray(e,n){return new Y(((s,i)=>{const r=e.length,o=new Array(r);let a=0;for(let c=0;c<r;c++){const u=c;n(e[u]).next((d=>{o[u]=d,++a,a===r&&s(o)}),(d=>i(d)))}}))}static doWhile(e,n){return new Y(((s,i)=>{const r=()=>{e()===!0?n().next((()=>{r()}),i):s()};r()}))}}function SM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Rr(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}tc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=-1;function nc(t){return t==null}function wl(t){return t===0&&1/t==-1/0}function CM(t){return typeof t=="number"&&Number.isInteger(t)&&!wl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="";function RM(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=qm(e)),e=PM(t.get(n),e);return qm(e)}function PM(t,e){let n=e;const s=t.length;for(let i=0;i<s;i++){const r=t.charAt(i);switch(r){case"\0":n+="";break;case J_:n+="";break;default:n+=r}}return n}function qm(t){return t+J_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Js(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function X_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n){this.comparator=e,this.root=n||xt.EMPTY}insert(e,n){return new ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xt.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Aa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Aa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Aa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Aa(this.root,e,this.comparator,!0)}}class Aa{constructor(e,n,s,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?s(e.key,n):1,n&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xt{constructor(e,n,s,i,r){this.key=e,this.value=n,this.color=s??xt.RED,this.left=i??xt.EMPTY,this.right=r??xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,i,r){return new xt(e??this.key,n??this.value,s??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let i=this;const r=s(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,n,s),null):r===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return xt.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}xt.EMPTY=null,xt.RED=!0,xt.BLACK=!1;xt.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,n,s,i,r){return this}insert(e,n,s){return new xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Gm(this.data.getIterator())}getIteratorFrom(e){return new Gm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof bt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new bt(this.comparator);return n.data=e,n}}class Gm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new on([])}unionWith(e){let n=new bt(Nt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new on(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return gr(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new Z_("Invalid base64 string: "+r):r}})(e);return new Vt(n)}static fromUint8Array(e){const n=(function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r})(e);return new Vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const xM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hs(t){if(Ye(!!t,39018),typeof t=="string"){let e=0;const n=xM.exec(t);if(Ye(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ft(t.seconds),nanos:ft(t.nanos)}}function ft(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ws(t){return typeof t=="string"?Vt.fromBase64String(t):Vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="server_timestamp",tw="__type__",nw="__previous_value__",sw="__local_write_time__";function wh(t){return(t?.mapValue?.fields||{})[tw]?.stringValue===ew}function sc(t){const e=t.mapValue.fields[nw];return wh(e)?sc(e):e}function So(t){const e=Hs(t.mapValue.fields[sw].timestampValue);return new ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e,n,s,i,r,o,a,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const bl="(default)";class Co{constructor(e,n){this.projectId=e,this.database=n||bl}static empty(){return new Co("","")}get isDefaultDatabase(){return this.database===bl}isEqual(e){return e instanceof Co&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw="__type__",DM="__max__",Sa={mapValue:{}},rw="__vector__",Tl="value";function qs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wh(t)?4:OM(t)?9007199254740991:NM(t)?10:11:ke(28295,{value:t})}function Bn(t,e){if(t===e)return!0;const n=qs(t);if(n!==qs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return So(t).isEqual(So(e));case 3:return(function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=Hs(i.timestampValue),a=Hs(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,r){return Ws(i.bytesValue).isEqual(Ws(r.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,r){return ft(i.geoPointValue.latitude)===ft(r.geoPointValue.latitude)&&ft(i.geoPointValue.longitude)===ft(r.geoPointValue.longitude)})(t,e);case 2:return(function(i,r){if("integerValue"in i&&"integerValue"in r)return ft(i.integerValue)===ft(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=ft(i.doubleValue),a=ft(r.doubleValue);return o===a?wl(o)===wl(a):isNaN(o)&&isNaN(a)}return!1})(t,e);case 9:return gr(t.arrayValue.values||[],e.arrayValue.values||[],Bn);case 10:case 11:return(function(i,r){const o=i.mapValue.fields||{},a=r.mapValue.fields||{};if(Km(o)!==Km(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Bn(o[c],a[c])))return!1;return!0})(t,e);default:return ke(52216,{left:t})}}function Ro(t,e){return(t.values||[]).find((n=>Bn(n,e)))!==void 0}function yr(t,e){if(t===e)return 0;const n=qs(t),s=qs(e);if(n!==s)return Ne(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return(function(r,o){const a=ft(r.integerValue||r.doubleValue),c=ft(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(t,e);case 3:return Qm(t.timestampValue,e.timestampValue);case 4:return Qm(So(t),So(e));case 5:return cd(t.stringValue,e.stringValue);case 6:return(function(r,o){const a=Ws(r),c=Ws(o);return a.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(r,o){const a=r.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const d=Ne(a[u],c[u]);if(d!==0)return d}return Ne(a.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(r,o){const a=Ne(ft(r.latitude),ft(o.latitude));return a!==0?a:Ne(ft(r.longitude),ft(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Ym(t.arrayValue,e.arrayValue);case 10:return(function(r,o){const a=r.fields||{},c=o.fields||{},u=a[Tl]?.arrayValue,d=c[Tl]?.arrayValue,h=Ne(u?.values?.length||0,d?.values?.length||0);return h!==0?h:Ym(u,d)})(t.mapValue,e.mapValue);case 11:return(function(r,o){if(r===Sa.mapValue&&o===Sa.mapValue)return 0;if(r===Sa.mapValue)return 1;if(o===Sa.mapValue)return-1;const a=r.fields||{},c=Object.keys(a),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){const p=cd(c[h],d[h]);if(p!==0)return p;const y=yr(a[c[h]],u[d[h]]);if(y!==0)return y}return Ne(c.length,d.length)})(t.mapValue,e.mapValue);default:throw ke(23264,{he:n})}}function Qm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ne(t,e);const n=Hs(t),s=Hs(e),i=Ne(n.seconds,s.seconds);return i!==0?i:Ne(n.nanos,s.nanos)}function Ym(t,e){const n=t.values||[],s=e.values||[];for(let i=0;i<n.length&&i<s.length;++i){const r=yr(n[i],s[i]);if(r)return r}return Ne(n.length,s.length)}function vr(t){return ud(t)}function ud(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const s=Hs(n);return`time(${s.seconds},${s.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Ws(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return _e.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let s="[",i=!0;for(const r of n.values||[])i?i=!1:s+=",",s+=ud(r);return s+"]"})(t.arrayValue):"mapValue"in t?(function(n){const s=Object.keys(n.fields||{}).sort();let i="{",r=!0;for(const o of s)r?r=!1:i+=",",i+=`${o}:${ud(n.fields[o])}`;return i+"}"})(t.mapValue):ke(61005,{value:t})}function Ba(t){switch(qs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=sc(t);return e?16+Ba(e):16;case 5:return 2*t.stringValue.length;case 6:return Ws(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((i,r)=>i+Ba(r)),0)})(t.arrayValue);case 10:case 11:return(function(s){let i=0;return Js(s.fields,((r,o)=>{i+=r.length+Ba(o)})),i})(t.mapValue);default:throw ke(13486,{value:t})}}function Jm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function dd(t){return!!t&&"integerValue"in t}function bh(t){return!!t&&"arrayValue"in t}function Xm(t){return!!t&&"nullValue"in t}function Zm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function za(t){return!!t&&"mapValue"in t}function NM(t){return(t?.mapValue?.fields||{})[iw]?.stringValue===rw}function ho(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Js(t.mapValue.fields,((n,s)=>e.mapValue.fields[n]=ho(s))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ho(t.arrayValue.values[n]);return e}return{...t}}function OM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===DM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.value=e}static empty(){return new Zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!za(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ho(n)}setAll(e){let n=Nt.emptyPath(),s={},i=[];e.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,s,i),s={},i=[],n=a.popLast()}o?s[a.lastSegment()]=ho(o):i.push(a.lastSegment())}));const r=this.getFieldsMap(n);this.applyChanges(r,s,i)}delete(e){const n=this.field(e.popLast());za(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=n.mapValue.fields[e.get(s)];za(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,s){Js(n,((i,r)=>e[i]=r));for(const i of s)delete e[i]}clone(){return new Zt(ho(this.value))}}function ow(t){const e=[];return Js(t.fields,((n,s)=>{const i=new Nt([n]);if(za(s)){const r=ow(s.mapValue).fields;if(r.length===0)e.push(i);else for(const o of r)e.push(i.child(o))}else e.push(i)})),new on(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,n,s,i,r,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=i,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ht(e,0,Re.min(),Re.min(),Re.min(),Zt.empty(),0)}static newFoundDocument(e,n,s,i){return new Ht(e,1,n,Re.min(),s,i,0)}static newNoDocument(e,n){return new Ht(e,2,n,Re.min(),Re.min(),Zt.empty(),0)}static newUnknownDocument(e,n){return new Ht(e,3,n,Re.min(),Re.min(),Zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,n){this.position=e,this.inclusive=n}}function eg(t,e,n){let s=0;for(let i=0;i<t.position.length;i++){const r=e[i],o=t.position[i];if(r.field.isKeyField()?s=_e.comparator(_e.fromName(o.referenceValue),n.key):s=yr(o,n.data.field(r.field)),r.dir==="desc"&&(s*=-1),s!==0)break}return s}function tg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n="asc"){this.field=e,this.dir=n}}function VM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{}class gt extends aw{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new FM(e,n,s):n==="array-contains"?new jM(e,s):n==="in"?new BM(e,s):n==="not-in"?new zM(e,s):n==="array-contains-any"?new HM(e,s):new gt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new $M(e,s):new UM(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(yr(n,this.value)):n!==null&&qs(this.value)===qs(n)&&this.matchesComparison(yr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class An extends aw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new An(e,n)}matches(e){return lw(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function lw(t){return t.op==="and"}function cw(t){return LM(t)&&lw(t)}function LM(t){for(const e of t.filters)if(e instanceof An)return!1;return!0}function hd(t){if(t instanceof gt)return t.field.canonicalString()+t.op.toString()+vr(t.value);if(cw(t))return t.filters.map((e=>hd(e))).join(",");{const e=t.filters.map((n=>hd(n))).join(",");return`${t.op}(${e})`}}function uw(t,e){return t instanceof gt?(function(s,i){return i instanceof gt&&s.op===i.op&&s.field.isEqual(i.field)&&Bn(s.value,i.value)})(t,e):t instanceof An?(function(s,i){return i instanceof An&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce(((r,o,a)=>r&&uw(o,i.filters[a])),!0):!1})(t,e):void ke(19439)}function dw(t){return t instanceof gt?(function(n){return`${n.field.canonicalString()} ${n.op} ${vr(n.value)}`})(t):t instanceof An?(function(n){return n.op.toString()+" {"+n.getFilters().map(dw).join(" ,")+"}"})(t):"Filter"}class FM extends gt{constructor(e,n,s){super(e,n,s),this.key=_e.fromName(s.referenceValue)}matches(e){const n=_e.comparator(e.key,this.key);return this.matchesComparison(n)}}class $M extends gt{constructor(e,n){super(e,"in",n),this.keys=hw("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class UM extends gt{constructor(e,n){super(e,"not-in",n),this.keys=hw("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function hw(t,e){return(e.arrayValue?.values||[]).map((n=>_e.fromName(n.referenceValue)))}class jM extends gt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return bh(n)&&Ro(n.arrayValue,this.value)}}class BM extends gt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ro(this.value.arrayValue,n)}}class zM extends gt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ro(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ro(this.value.arrayValue,n)}}class HM extends gt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!bh(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Ro(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e,n=null,s=[],i=[],r=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=r,this.startAt=o,this.endAt=a,this.Te=null}}function ng(t,e=null,n=[],s=[],i=null,r=null,o=null){return new WM(t,e,n,s,i,r,o)}function Th(t){const e=Pe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>hd(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(r){return r.field.canonicalString()+r.dir})(s))).join(","),nc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>vr(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>vr(s))).join(",")),e.Te=n}return e.Te}function Ih(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!VM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!uw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!tg(t.startAt,e.startAt)&&tg(t.endAt,e.endAt)}function fd(t){return _e.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,n=null,s=[],i=[],r=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function qM(t,e,n,s,i,r,o,a){return new Wo(t,e,n,s,i,r,o,a)}function ic(t){return new Wo(t)}function sg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function fw(t){return t.collectionGroup!==null}function fo(t){const e=Pe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),n.add(r.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new bt(Nt.comparator);return o.filters.forEach((c=>{c.getFlattenedFilters().forEach((u=>{u.isInequality()&&(a=a.add(u.field))}))})),a})(e).forEach((r=>{n.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new El(r,s))})),n.has(Nt.keyField().canonicalString())||e.Ie.push(new El(Nt.keyField(),s))}return e.Ie}function On(t){const e=Pe(t);return e.Ee||(e.Ee=KM(e,fo(t))),e.Ee}function KM(t,e){if(t.limitType==="F")return ng(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const r=i.dir==="desc"?"asc":"desc";return new El(i.field,r)}));const n=t.endAt?new Il(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Il(t.startAt.position,t.startAt.inclusive):null;return ng(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function pd(t,e){const n=t.filters.concat([e]);return new Wo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function kl(t,e,n){return new Wo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rc(t,e){return Ih(On(t),On(e))&&t.limitType===e.limitType}function pw(t){return`${Th(On(t))}|lt:${t.limitType}`}function qi(t){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((i=>dw(i))).join(", ")}]`),nc(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((i=>vr(i))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((i=>vr(i))).join(",")),`Target(${s})`})(On(t))}; limitType=${t.limitType})`}function oc(t,e){return e.isFoundDocument()&&(function(s,i){const r=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(r):_e.isDocumentKey(s.path)?s.path.isEqual(r):s.path.isImmediateParentOf(r)})(t,e)&&(function(s,i){for(const r of fo(s))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0})(t,e)&&(function(s,i){for(const r of s.filters)if(!r.matches(i))return!1;return!0})(t,e)&&(function(s,i){return!(s.startAt&&!(function(o,a,c){const u=eg(o,a,c);return o.inclusive?u<=0:u<0})(s.startAt,fo(s),i)||s.endAt&&!(function(o,a,c){const u=eg(o,a,c);return o.inclusive?u>=0:u>0})(s.endAt,fo(s),i))})(t,e)}function GM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mw(t){return(e,n)=>{let s=!1;for(const i of fo(t)){const r=QM(i,e,n);if(r!==0)return r;s=s||i.field.isKeyField()}return 0}}function QM(t,e,n){const s=t.field.isKeyField()?_e.comparator(e.key,n.key):(function(r,o,a){const c=o.data.field(r),u=a.data.field(r);return c!==null&&u!==null?yr(c,u):ke(42886)})(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return ke(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[i,r]of s)if(this.equalsFn(i,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Js(this.inner,((n,s)=>{for(const[i,r]of s)e(i,r)}))}isEmpty(){return X_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=new ut(_e.comparator);function us(){return YM}const gw=new ut(_e.comparator);function Zr(...t){let e=gw;for(const n of t)e=e.insert(n.key,n);return e}function yw(t){let e=gw;return t.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function mi(){return po()}function vw(){return po()}function po(){return new Ri((t=>t.toString()),((t,e)=>t.isEqual(e)))}const JM=new ut(_e.comparator),XM=new bt(_e.comparator);function Oe(...t){let e=XM;for(const n of t)e=e.add(n);return e}const ZM=new bt(Ne);function eD(){return ZM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wl(e)?"-0":e}}function _w(t){return{integerValue:""+t}}function tD(t,e){return CM(e)?_w(e):Eh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(){this._=void 0}}function nD(t,e,n){return t instanceof Po?(function(i,r){const o={fields:{[tw]:{stringValue:ew},[sw]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&wh(r)&&(r=sc(r)),r&&(o.fields[nw]=r),{mapValue:o}})(n,e):t instanceof xo?bw(t,e):t instanceof Mo?Tw(t,e):(function(i,r){const o=ww(i,r),a=ig(o)+ig(i.Ae);return dd(o)&&dd(i.Ae)?_w(a):Eh(i.serializer,a)})(t,e)}function sD(t,e,n){return t instanceof xo?bw(t,e):t instanceof Mo?Tw(t,e):n}function ww(t,e){return t instanceof Al?(function(s){return dd(s)||(function(r){return!!r&&"doubleValue"in r})(s)})(e)?e:{integerValue:0}:null}class Po extends ac{}class xo extends ac{constructor(e){super(),this.elements=e}}function bw(t,e){const n=Iw(e);for(const s of t.elements)n.some((i=>Bn(i,s)))||n.push(s);return{arrayValue:{values:n}}}class Mo extends ac{constructor(e){super(),this.elements=e}}function Tw(t,e){let n=Iw(e);for(const s of t.elements)n=n.filter((i=>!Bn(i,s)));return{arrayValue:{values:n}}}class Al extends ac{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function ig(t){return ft(t.integerValue||t.doubleValue)}function Iw(t){return bh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,n){this.field=e,this.transform=n}}function rD(t,e){return t.field.isEqual(e.field)&&(function(s,i){return s instanceof xo&&i instanceof xo||s instanceof Mo&&i instanceof Mo?gr(s.elements,i.elements,Bn):s instanceof Al&&i instanceof Al?Bn(s.Ae,i.Ae):s instanceof Po&&i instanceof Po})(t.transform,e.transform)}class oD{constructor(e,n){this.version=e,this.transformResults=n}}class gn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gn}static exists(e){return new gn(void 0,e)}static updateTime(e){return new gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ha(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class lc{}function Ew(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new kh(t.key,gn.none()):new qo(t.key,t.data,gn.none());{const n=t.data,s=Zt.empty();let i=new bt(Nt.comparator);for(let r of e.fields)if(!i.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?s.delete(r):s.set(r,o),i=i.add(r)}return new Xs(t.key,s,new on(i.toArray()),gn.none())}}function aD(t,e,n){t instanceof qo?(function(i,r,o){const a=i.value.clone(),c=og(i.fieldTransforms,r,o.transformResults);a.setAll(c),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Xs?(function(i,r,o){if(!Ha(i.precondition,r))return void r.convertToUnknownDocument(o.version);const a=og(i.fieldTransforms,r,o.transformResults),c=r.data;c.setAll(kw(i)),c.setAll(a),r.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):(function(i,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function mo(t,e,n,s){return t instanceof qo?(function(r,o,a,c){if(!Ha(r.precondition,o))return a;const u=r.value.clone(),d=ag(r.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,s):t instanceof Xs?(function(r,o,a,c){if(!Ha(r.precondition,o))return a;const u=ag(r.fieldTransforms,c,o),d=o.data;return d.setAll(kw(r)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map((h=>h.field)))})(t,e,n,s):(function(r,o,a){return Ha(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(t,e,n)}function lD(t,e){let n=null;for(const s of t.fieldTransforms){const i=e.data.field(s.field),r=ww(s.transform,i||null);r!=null&&(n===null&&(n=Zt.empty()),n.set(s.field,r))}return n||null}function rg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&gr(s,i,((r,o)=>rD(r,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class qo extends lc{constructor(e,n,s,i=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xs extends lc{constructor(e,n,s,i,r=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function kw(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function og(t,e,n){const s=new Map;Ye(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const r=t[i],o=r.transform,a=e.data.field(r.field);s.set(r.field,sD(o,a,n[i]))}return s}function ag(t,e,n){const s=new Map;for(const i of t){const r=i.transform,o=n.data.field(i.field);s.set(i.field,nD(r,o,e))}return s}class kh extends lc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cD extends lc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e,n,s,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(e.key)&&aD(r,e,s[i])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=mo(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=mo(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=vw();return this.mutations.forEach((i=>{const r=e.get(i.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=n.has(i.key)?null:a;const c=Ew(o,a);c!==null&&s.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Re.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Oe())}isEqual(e){return this.batchId===e.batchId&&gr(this.mutations,e.mutations,((n,s)=>rg(n,s)))&&gr(this.baseMutations,e.baseMutations,((n,s)=>rg(n,s)))}}class Ah{constructor(e,n,s,i){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(e,n,s){Ye(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let i=(function(){return JM})();const r=e.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,s[o].version);return new Ah(e,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,Fe;function fD(t){switch(t){case G.OK:return ke(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return ke(15467,{code:t})}}function Aw(t){if(t===void 0)return cs("GRPC error has no .code"),G.UNKNOWN;switch(t){case mt.OK:return G.OK;case mt.CANCELLED:return G.CANCELLED;case mt.UNKNOWN:return G.UNKNOWN;case mt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case mt.INTERNAL:return G.INTERNAL;case mt.UNAVAILABLE:return G.UNAVAILABLE;case mt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case mt.NOT_FOUND:return G.NOT_FOUND;case mt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case mt.ABORTED:return G.ABORTED;case mt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case mt.DATA_LOSS:return G.DATA_LOSS;default:return ke(39323,{code:t})}}(Fe=mt||(mt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD=new $s([4294967295,4294967295],0);function lg(t){const e=pD().encode(t),n=new j_;return n.update(e),new Uint8Array(n.digest())}function cg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new $s([n,s],0),new $s([i,r],0)]}class Sh{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new eo(`Invalid padding: ${n}`);if(s<0)throw new eo(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new eo(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new eo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=$s.fromNumber(this.ge)}ye(e,n,s){let i=e.add(n.multiply($s.fromNumber(s)));return i.compare(mD)===1&&(i=new $s([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=lg(e),[s,i]=cg(n);for(let r=0;r<this.hashCount;r++){const o=this.ye(s,i,r);if(!this.we(o))return!1}return!0}static create(e,n,s){const i=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),o=new Sh(r,i,n);return s.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const n=lg(e),[s,i]=cg(n);for(let r=0;r<this.hashCount;r++){const o=this.ye(s,i,r);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class eo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,n,s,i,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const i=new Map;return i.set(e,Ko.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new cc(Re.min(),i,new ut(Ne),us(),Oe())}}class Ko{constructor(e,n,s,i,r){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Ko(s,n,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n,s,i){this.be=e,this.removedTargetIds=n,this.key=s,this.De=i}}class Sw{constructor(e,n){this.targetId=e,this.Ce=n}}class Cw{constructor(e,n,s=Vt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=i}}class ug{constructor(){this.ve=0,this.Fe=dg(),this.Me=Vt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Oe(),n=Oe(),s=Oe();return this.Fe.forEach(((i,r)=>{switch(r){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:ke(38017,{changeType:r})}})),new Ko(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=dg()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ye(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class gD{constructor(e){this.Ge=e,this.ze=new Map,this.je=us(),this.Je=Ca(),this.He=Ca(),this.Ye=new ut(Ne)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:ke(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,s=e.Ce.count,i=this.ot(n);if(i){const r=i.target;if(fd(r))if(s===0){const o=new _e(r.path);this.et(n,o,Ht.newNoDocument(o,Re.min()))}else Ye(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:r=0}=n;let o,a;try{o=Ws(s).toUint8Array()}catch(c){if(c instanceof Z_)return mr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Sh(o,i,r)}catch(c){return mr(c instanceof eo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let i=0;return s.forEach((r=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;e.mightContain(a)||(this.et(n,r,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((r,o)=>{const a=this.ot(o);if(a){if(r.current&&fd(a.target)){const c=new _e(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Ht.newNoDocument(c,e))}r.Be&&(n.set(o,r.ke()),r.qe())}}));let s=Oe();this.He.forEach(((r,o)=>{let a=!0;o.forEachWhile((c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(s=s.add(r))})),this.je.forEach(((r,o)=>o.setReadTime(e)));const i=new cc(e,n,this.Ye,this.je,s);return this.je=us(),this.Je=Ca(),this.He=Ca(),this.Ye=new ut(Ne),i}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new ug,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new bt(Ne),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new bt(Ne),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ug),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ca(){return new ut(_e.comparator)}function dg(){return new ut(_e.comparator)}const yD={asc:"ASCENDING",desc:"DESCENDING"},vD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_D={and:"AND",or:"OR"};class wD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function md(t,e){return t.useProto3Json||nc(e)?e:{value:e}}function Sl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Rw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function bD(t,e){return Sl(t,e.toTimestamp())}function Vn(t){return Ye(!!t,49232),Re.fromTimestamp((function(n){const s=Hs(n);return new ot(s.seconds,s.nanos)})(t))}function Ch(t,e){return gd(t,e).canonicalString()}function gd(t,e){const n=(function(i){return new st(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function Pw(t){const e=st.fromString(t);return Ye(Ow(e),10190,{key:e.toString()}),e}function yd(t,e){return Ch(t.databaseId,e.path)}function pu(t,e){const n=Pw(e);if(n.get(1)!==t.databaseId.projectId)throw new de(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new de(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new _e(Mw(n))}function xw(t,e){return Ch(t.databaseId,e)}function TD(t){const e=Pw(t);return e.length===4?st.emptyPath():Mw(e)}function vd(t){return new st(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Mw(t){return Ye(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function hg(t,e,n){return{name:yd(t,e),fields:n.value.mapValue.fields}}function ID(t,e){let n;if("targetChange"in e){e.targetChange;const s=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ke(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],r=(function(u,d){return u.useProto3Json?(Ye(d===void 0||typeof d=="string",58123),Vt.fromBase64String(d||"")):(Ye(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Vt.fromUint8Array(d||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(u){const d=u.code===void 0?G.UNKNOWN:Aw(u.code);return new de(d,u.message||"")})(o);n=new Cw(s,i,r,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=pu(t,s.document.name),r=Vn(s.document.updateTime),o=s.document.createTime?Vn(s.document.createTime):Re.min(),a=new Zt({mapValue:{fields:s.document.fields}}),c=Ht.newFoundDocument(i,r,o,a),u=s.targetIds||[],d=s.removedTargetIds||[];n=new Wa(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=pu(t,s.document),r=s.readTime?Vn(s.readTime):Re.min(),o=Ht.newNoDocument(i,r),a=s.removedTargetIds||[];n=new Wa([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=pu(t,s.document),r=s.removedTargetIds||[];n=new Wa([],r,i,null)}else{if(!("filter"in e))return ke(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:r}=s,o=new hD(i,r),a=s.targetId;n=new Sw(a,o)}}return n}function ED(t,e){let n;if(e instanceof qo)n={update:hg(t,e.key,e.value)};else if(e instanceof kh)n={delete:yd(t,e.key)};else if(e instanceof Xs)n={update:hg(t,e.key,e.data),updateMask:DD(e.fieldMask)};else{if(!(e instanceof cD))return ke(16599,{Vt:e.type});n={verify:yd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(r,o){const a=o.transform;if(a instanceof Po)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof xo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Mo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Al)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ke(20930,{transform:o.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(i,r){return r.updateTime!==void 0?{updateTime:bD(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:ke(27497)})(t,e.precondition)),n}function kD(t,e){return t&&t.length>0?(Ye(e!==void 0,14353),t.map((n=>(function(i,r){let o=i.updateTime?Vn(i.updateTime):Vn(r);return o.isEqual(Re.min())&&(o=Vn(r)),new oD(o,i.transformResults||[])})(n,e)))):[]}function AD(t,e){return{documents:[xw(t,e.path)]}}function SD(t,e){const n={structuredQuery:{}},s=e.path;let i;e.collectionGroup!==null?(i=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=xw(t,i);const r=(function(u){if(u.length!==0)return Nw(An.create(u,"and"))})(e.filters);r&&(n.structuredQuery.where=r);const o=(function(u){if(u.length!==0)return u.map((d=>(function(p){return{field:Ki(p.field),direction:PD(p.dir)}})(d)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=md(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:i}}function CD(t){let e=TD(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){Ye(s===1,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let r=[];n.where&&(r=(function(h){const p=Dw(h);return p instanceof An&&cw(p)?p.getFilters():[p]})(n.where));let o=[];n.orderBy&&(o=(function(h){return h.map((p=>(function(_){return new El(Gi(_.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(p)))})(n.orderBy));let a=null;n.limit&&(a=(function(h){let p;return p=typeof h=="object"?h.value:h,nc(p)?null:p})(n.limit));let c=null;n.startAt&&(c=(function(h){const p=!!h.before,y=h.values||[];return new Il(y,p)})(n.startAt));let u=null;return n.endAt&&(u=(function(h){const p=!h.before,y=h.values||[];return new Il(y,p)})(n.endAt)),qM(e,i,o,r,a,"F",c,u)}function RD(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Dw(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Gi(n.unaryFilter.field);return gt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=Gi(n.unaryFilter.field);return gt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Gi(n.unaryFilter.field);return gt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Gi(n.unaryFilter.field);return gt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}})(t):t.fieldFilter!==void 0?(function(n){return gt.create(Gi(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return An.create(n.compositeFilter.filters.map((s=>Dw(s))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ke(1026)}})(n.compositeFilter.op))})(t):ke(30097,{filter:t})}function PD(t){return yD[t]}function xD(t){return vD[t]}function MD(t){return _D[t]}function Ki(t){return{fieldPath:t.canonicalString()}}function Gi(t){return Nt.fromServerFormat(t.fieldPath)}function Nw(t){return t instanceof gt?(function(n){if(n.op==="=="){if(Zm(n.value))return{unaryFilter:{field:Ki(n.field),op:"IS_NAN"}};if(Xm(n.value))return{unaryFilter:{field:Ki(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Zm(n.value))return{unaryFilter:{field:Ki(n.field),op:"IS_NOT_NAN"}};if(Xm(n.value))return{unaryFilter:{field:Ki(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ki(n.field),op:xD(n.op),value:n.value}}})(t):t instanceof An?(function(n){const s=n.getFilters().map((i=>Nw(i)));return s.length===1?s[0]:{compositeFilter:{op:MD(n.op),filters:s}}})(t):ke(54877,{filter:t})}function DD(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Ow(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n,s,i,r=Re.min(),o=Re.min(),a=Vt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Ns(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e){this.yt=e}}function OD(t){const e=CD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?kl(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(){this.Cn=new LD}addToCollectionParentIndex(e,n){return this.Cn.add(n),Y.resolve()}getCollectionParents(e,n){return Y.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Y.resolve()}deleteFieldIndex(e,n){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,n){return Y.resolve()}getDocumentsMatchingTarget(e,n){return Y.resolve(null)}getIndexType(e,n){return Y.resolve(0)}getFieldIndexes(e,n){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,n){return Y.resolve(zs.min())}getMinOffsetFromCollectionGroup(e,n){return Y.resolve(zs.min())}updateCollectionGroup(e,n,s){return Y.resolve()}updateIndexEntries(e,n){return Y.resolve()}}class LD{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n]||new bt(st.comparator),r=!i.has(s);return this.index[n]=i.add(s),r}has(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(e){return(this.index[e]||new bt(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Vw=41943040;class Jt{static withCacheSize(e){return new Jt(e,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(Vw,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new _r(0)}static cr(){return new _r(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="LruGarbageCollector",FD=1048576;function mg([t,e],[n,s]){const i=Ne(t,n);return i===0?Ne(e,s):i}class $D{constructor(e){this.Ir=e,this.buffer=new bt(mg),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();mg(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class UD{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(pg,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Rr(n)?he(pg,"Ignoring IndexedDB error during garbage collection: ",n):await Cr(n)}await this.Vr(3e5)}))}}class jD{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return Y.resolve(tc.ce);const s=new $D(n);return this.mr.forEachTarget(e,(i=>s.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>s.Ar(i))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(fg)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fg):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,i,r,o,a,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((h=>(h>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i)))).next((h=>(s=h,a=Date.now(),this.removeTargets(e,s,n)))).next((h=>(r=h,c=Date.now(),this.removeOrphanedDocuments(e,s)))).next((h=>(u=Date.now(),Wi()<=De.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${r} targets in `+(c-a)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:h}))))}}function BD(t,e){return new jD(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(){this.changes=new Ri((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?Y.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e,n,s,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(s=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(s!==null&&mo(s.mutation,i,on.empty(),ot.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Oe()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Oe()){const i=mi();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,s).next((r=>{let o=Zr();return r.forEach(((a,c)=>{o=o.insert(a,c.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const s=mi();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Oe())))}populateOverlays(e,n,s){const i=[];return s.forEach((r=>{n.has(r)||i.push(r)})),this.documentOverlayCache.getOverlays(e,i).next((r=>{r.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(e,n,s,i){let r=us();const o=po(),a=(function(){return po()})();return n.forEach(((c,u)=>{const d=s.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Xs)?r=r.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),mo(d.mutation,u,d.mutation.getFieldMask(),ot.now())):o.set(u.key,on.empty())})),this.recalculateAndSaveOverlays(e,r).next((c=>(c.forEach(((u,d)=>o.set(u,d))),n.forEach(((u,d)=>a.set(u,new HD(d,o.get(u)??null)))),a)))}recalculateAndSaveOverlays(e,n){const s=po();let i=new ut(((o,a)=>o-a)),r=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const a of o)a.keys().forEach((c=>{const u=n.get(c);if(u===null)return;let d=s.get(c)||on.empty();d=a.applyToLocalView(u,d),s.set(c,d);const h=(i.get(a.batchId)||Oe()).add(c);i=i.insert(a.batchId,h)}))})).next((()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,d=c.value,h=vw();d.forEach((p=>{if(!r.has(p)){const y=Ew(n.get(p),s.get(p));y!==null&&h.set(p,y),r=r.add(p)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return Y.waitFor(o)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,i){return(function(o){return _e.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):fw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,i):this.getDocumentsMatchingCollectionQuery(e,n,s,i)}getNextDocuments(e,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,i).next((r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,i-r.size):Y.resolve(mi());let a=Ao,c=r;return o.next((u=>Y.forEach(u,((d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),r.get(d)?Y.resolve():this.remoteDocumentCache.getEntry(e,d).next((p=>{c=c.insert(d,p)}))))).next((()=>this.populateOverlays(e,u,r))).next((()=>this.computeViews(e,c,u,Oe()))).next((d=>({batchId:a,changes:yw(d)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new _e(n)).next((s=>{let i=Zr();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,i){const r=n.collectionGroup;let o=Zr();return this.indexManager.getCollectionParents(e,r).next((a=>Y.forEach(a,(c=>{const u=(function(h,p){return new Wo(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(n,c.child(r));return this.getDocumentsMatchingCollectionQuery(e,u,s,i).next((d=>{d.forEach(((h,p)=>{o=o.insert(h,p)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,s,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,r,i)))).next((o=>{r.forEach(((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Ht.newInvalidDocument(d)))}));let a=Zr();return o.forEach(((c,u)=>{const d=r.get(c);d!==void 0&&mo(d.mutation,u,on.empty(),ot.now()),oc(n,u)&&(a=a.insert(c,u))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Y.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Vn(i.createTime)}})(n)),Y.resolve()}getNamedQuery(e,n){return Y.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:OD(i.bundledQuery),readTime:Vn(i.readTime)}})(n)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(){this.overlays=new ut(_e.comparator),this.qr=new Map}getOverlay(e,n){return Y.resolve(this.overlays.get(n))}getOverlays(e,n){const s=mi();return Y.forEach(n,(i=>this.getOverlay(e,i).next((r=>{r!==null&&s.set(i,r)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((i,r)=>{this.St(e,n,r)})),Y.resolve()}removeOverlaysForBatchId(e,n,s){const i=this.qr.get(s);return i!==void 0&&(i.forEach((r=>this.overlays=this.overlays.remove(r))),this.qr.delete(s)),Y.resolve()}getOverlaysForCollection(e,n,s){const i=mi(),r=n.length+1,o=new _e(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===r&&c.largestBatchId>s&&i.set(c.getKey(),c)}return Y.resolve(i)}getOverlaysForCollectionGroup(e,n,s,i){let r=new ut(((u,d)=>u-d));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let d=r.get(u.largestBatchId);d===null&&(d=mi(),r=r.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=mi(),c=r.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((u,d)=>a.set(u,d))),!(a.size()>=i)););return Y.resolve(a)}St(e,n,s){const i=this.overlays.get(s.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(s.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new dD(n,s));let r=this.qr.get(n);r===void 0&&(r=Oe(),this.qr.set(n,r)),this.qr.set(n,r.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(){this.Qr=new bt(At.$r),this.Ur=new bt(At.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new At(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new At(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new _e(new st([])),s=new At(n,e),i=new At(n,e+1),r=[];return this.Ur.forEachInRange([s,i],(o=>{this.Gr(o),r.push(o.key)})),r}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new _e(new st([])),s=new At(n,e),i=new At(n,e+1);let r=Oe();return this.Ur.forEachInRange([s,i],(o=>{r=r.add(o.key)})),r}containsKey(e){const n=new At(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class At{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return _e.comparator(e.key,n.key)||Ne(e.Yr,n.Yr)}static Kr(e,n){return Ne(e.Yr,n.Yr)||_e.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new bt(At.$r)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,i){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new uD(r,n,s,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new At(a.key,r)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Y.resolve(o)}lookupMutationBatch(e,n){return Y.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,i=this.ei(s),r=i<0?0:i;return Y.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?_h:this.tr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new At(n,0),i=new At(n,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([s,i],(o=>{const a=this.Xr(o.Yr);r.push(a)})),Y.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new bt(Ne);return n.forEach((i=>{const r=new At(i,0),o=new At(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,o],(a=>{s=s.add(a.Yr)}))})),Y.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,i=s.length+1;let r=s;_e.isDocumentKey(r)||(r=r.child(""));const o=new At(new _e(r),0);let a=new bt(Ne);return this.Zr.forEachWhile((c=>{const u=c.key.path;return!!s.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Yr)),!0)}),o),Y.resolve(this.ti(a))}ti(e){const n=[];return e.forEach((s=>{const i=this.Xr(s);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Ye(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Y.forEach(n.mutations,(i=>{const r=new At(i.key,n.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new At(n,0),i=this.Zr.firstAfterOrEqual(s);return Y.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e){this.ri=e,this.docs=(function(){return new ut(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,i=this.docs.get(s),r=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return Y.resolve(s?s.document.mutableCopy():Ht.newInvalidDocument(n))}getEntries(e,n){let s=us();return n.forEach((i=>{const r=this.docs.get(i);s=s.insert(i,r?r.document.mutableCopy():Ht.newInvalidDocument(i))})),Y.resolve(s)}getDocumentsMatchingQuery(e,n,s,i){let r=us();const o=n.path,a=new _e(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||EM(IM(d),s)<=0||(i.has(d.key)||oc(n,d))&&(r=r.insert(d.key,d.mutableCopy()))}return Y.resolve(r)}getAllFromCollectionGroup(e,n,s,i){ke(9500)}ii(e,n){return Y.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new JD(this)}getSize(e){return Y.resolve(this.size)}}class JD extends zD{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(s)})),Y.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e){this.persistence=e,this.si=new Ri((n=>Th(n)),Ih),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new Rh,this.targetCount=0,this.ai=_r.ur()}forEachTarget(e,n){return this.si.forEach(((s,i)=>n(i))),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),Y.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new _r(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Y.resolve()}updateTargetData(e,n){return this.Pr(n),Y.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,n,s){let i=0;const r=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.si.delete(o),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)})),Y.waitFor(r).next((()=>i))}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return Y.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),Y.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const i=this.persistence.referenceDelegate,r=[];return i&&n.forEach((o=>{r.push(i.markPotentiallyOrphaned(e,o))})),Y.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Y.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return Y.resolve(s)}containsKey(e,n){return Y.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,n){this.ui={},this.overlays={},this.ci=new tc(0),this.li=!1,this.li=!0,this.hi=new GD,this.referenceDelegate=e(this),this.Pi=new XD(this),this.indexManager=new VD,this.remoteDocumentCache=(function(i){return new YD(i)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new ND(n),this.Ii=new qD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new KD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new QD(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){he("MemoryPersistence","Starting transaction:",e);const i=new ZD(this.ci.next());return this.referenceDelegate.Ei(),s(i).next((r=>this.referenceDelegate.di(i).next((()=>r)))).toPromise().then((r=>(i.raiseOnCommittedEvent(),r)))}Ai(e,n){return Y.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class ZD extends AM{constructor(e){super(),this.currentSequenceNumber=e}}class Ph{constructor(e){this.persistence=e,this.Ri=new Rh,this.Vi=null}static mi(e){return new Ph(e)}get fi(){if(this.Vi)return this.Vi;throw ke(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),Y.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),Y.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Y.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((r=>this.fi.add(r.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.fi,(s=>{const i=_e.fromPath(s);return this.gi(e,i).next((r=>{r||n.removeEntry(i,Re.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Y.or([()=>Y.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Cl{constructor(e,n){this.persistence=e,this.pi=new Ri((s=>RM(s.path)),((s,i)=>s.isEqual(i))),this.garbageCollector=BD(this,n)}static mi(e,n){return new Cl(e,n)}Ei(){}di(e){return Y.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((i=>s+i))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return Y.forEach(this.pi,((s,i)=>this.br(e,s,i).next((r=>r?Y.resolve():n(i)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.ii(e,(o=>this.br(e,o,n).next((a=>{a||(s++,r.removeEntry(o,Re.min()))})))).next((()=>r.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Y.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),Y.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),Y.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Y.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ba(e.data.value)),n}br(e,n,s){return Y.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return Y.resolve(i!==void 0&&i>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n,s,i){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=i}static As(e,n){let s=Oe(),i=Oe();for(const r of n.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new xh(e,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return qP()?8:SM(Wt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,i){const r={result:null};return this.ys(e,n).next((o=>{r.result=o})).next((()=>{if(!r.result)return this.ws(e,n,i,s).next((o=>{r.result=o}))})).next((()=>{if(r.result)return;const o=new eN;return this.Ss(e,n,o).next((a=>{if(r.result=a,this.Vs)return this.bs(e,n,o,a.size)}))})).next((()=>r.result))}bs(e,n,s,i){return s.documentReadCount<this.fs?(Wi()<=De.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",qi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Y.resolve()):(Wi()<=De.DEBUG&&he("QueryEngine","Query:",qi(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.gs*i?(Wi()<=De.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",qi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,On(n))):Y.resolve())}ys(e,n){if(sg(n))return Y.resolve(null);let s=On(n);return this.indexManager.getIndexType(e,s).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=kl(n,null,"F"),s=On(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((r=>{const o=Oe(...r);return this.ps.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,s).next((c=>{const u=this.Ds(n,a);return this.Cs(n,u,o,c.readTime)?this.ys(e,kl(n,null,"F")):this.vs(e,u,n,c)}))))})))))}ws(e,n,s,i){return sg(n)||i.isEqual(Re.min())?Y.resolve(null):this.ps.getDocuments(e,s).next((r=>{const o=this.Ds(n,r);return this.Cs(n,o,s,i)?Y.resolve(null):(Wi()<=De.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qi(n)),this.vs(e,o,n,TM(i,Ao)).next((a=>a)))}))}Ds(e,n){let s=new bt(mw(e));return n.forEach(((i,r)=>{oc(e,r)&&(s=s.add(r))})),s}Cs(e,n,s,i){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ss(e,n,s){return Wi()<=De.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",qi(n)),this.ps.getDocumentsMatchingQuery(e,n,zs.min(),s)}vs(e,n,s,i){return this.ps.getDocumentsMatchingQuery(e,s,i).next((r=>(n.forEach((o=>{r=r.insert(o.key,o)})),r)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh="LocalStore",nN=3e8;class sN{constructor(e,n,s,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new ut(Ne),this.xs=new Ri((r=>Th(r)),Ih),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function iN(t,e,n,s){return new sN(t,e,n,s)}async function Fw(t,e){const n=Pe(t);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next((r=>(i=r,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((r=>{const o=[],a=[];let c=Oe();for(const u of i){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of r){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(s,c).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:a})))}))}))}function rN(t,e){const n=Pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const i=e.batch.keys(),r=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,c,u,d){const h=u.batch,p=h.keys();let y=Y.resolve();return p.forEach((_=>{y=y.next((()=>d.getEntry(c,_))).next((I=>{const k=u.docVersions.get(_);Ye(k!==null,48541),I.version.compareTo(k)<0&&(h.applyToRemoteDocument(I,u),I.isValidDocument()&&(I.setReadTime(u.commitVersion),d.addEntry(I)))}))})),y.next((()=>a.mutationQueue.removeMutationBatch(c,h)))})(n,s,e,r).next((()=>r.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(a){let c=Oe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(s,i)))}))}function $w(t){const e=Pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function oN(t,e){const n=Pe(t),s=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(r=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach(((d,h)=>{const p=i.get(h);if(!p)return;a.push(n.Pi.removeMatchingKeys(r,d.removedDocuments,h).next((()=>n.Pi.addMatchingKeys(r,d.addedDocuments,h))));let y=p.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(h)!==null?y=y.withResumeToken(Vt.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,s)),i=i.insert(h,y),(function(I,k,N){return I.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=nN?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(p,y,d)&&a.push(n.Pi.updateTargetData(r,y))}));let c=us(),u=Oe();if(e.documentUpdates.forEach((d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,d))})),a.push(aN(r,o,e.documentUpdates).next((d=>{c=d.ks,u=d.qs}))),!s.isEqual(Re.min())){const d=n.Pi.getLastRemoteSnapshotVersion(r).next((h=>n.Pi.setTargetsMetadata(r,r.currentSequenceNumber,s)));a.push(d)}return Y.waitFor(a).next((()=>o.apply(r))).next((()=>n.localDocuments.getLocalViewOfDocuments(r,c,u))).next((()=>c))})).then((r=>(n.Ms=i,r)))}function aN(t,e,n){let s=Oe(),i=Oe();return n.forEach((r=>s=s.add(r))),e.getEntries(t,s).next((r=>{let o=us();return n.forEach(((a,c)=>{const u=r.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Re.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):he(Mh,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)})),{ks:o,qs:i}}))}function lN(t,e){const n=Pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=_h),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function cN(t,e){const n=Pe(t);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let i;return n.Pi.getTargetData(s,e).next((r=>r?(i=r,Y.resolve(i)):n.Pi.allocateTargetId(s).next((o=>(i=new Ns(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,i).next((()=>i)))))))})).then((s=>{const i=n.Ms.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function _d(t,e,n){const s=Pe(t),i=s.Ms.get(e),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,(o=>s.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Rr(o))throw o;he(Mh,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(i.target)}function gg(t,e,n){const s=Pe(t);let i=Re.min(),r=Oe();return s.persistence.runTransaction("Execute query","readwrite",(o=>(function(c,u,d){const h=Pe(c),p=h.xs.get(d);return p!==void 0?Y.resolve(h.Ms.get(p)):h.Pi.getTargetData(u,d)})(s,o,On(e)).next((a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,a.targetId).next((c=>{r=c}))})).next((()=>s.Fs.getDocumentsMatchingQuery(o,e,n?i:Re.min(),n?r:Oe()))).next((a=>(uN(s,GM(e),a),{documents:a,Qs:r})))))}function uN(t,e,n){let s=t.Os.get(e)||Re.min();n.forEach(((i,r)=>{r.readTime.compareTo(s)>0&&(s=r.readTime)})),t.Os.set(e,s)}class yg{constructor(){this.activeTargetIds=eD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dN{constructor(){this.Mo=new yg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new yg,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg="ConnectivityMonitor";class _g{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(vg,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(vg,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ra=null;function wd(){return Ra===null?Ra=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ra++,"0x"+Ra.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu="RestConnection",fN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${i}`,this.Wo=this.databaseId.database===bl?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Go(e,n,s,i,r){const o=wd(),a=this.zo(e,n.toUriEncodedString());he(mu,`Sending RPC '${e}' ${o}:`,a,s);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,r);const{host:u}=new URL(a),d=kr(u);return this.Jo(e,a,c,s,d).then((h=>(he(mu,`Received RPC '${e}' ${o}: `,h),h)),(h=>{throw mr(mu,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",s),h}))}Ho(e,n,s,i,r,o){return this.Go(e,n,s,i,r)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Sr})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,r)=>e[r]=i)),s&&s.headers.forEach(((i,r)=>e[r]=i))}zo(e,n){const s=fN[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="WebChannelConnection";class gN extends pN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,i,r){const o=wd();return new Promise(((a,c)=>{const u=new B_;u.setWithCredentials(!0),u.listenOnce(z_.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case ja.NO_ERROR:const h=u.getResponseJson();he(Ut,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case ja.TIMEOUT:he(Ut,`RPC '${e}' ${o} timed out`),c(new de(G.DEADLINE_EXCEEDED,"Request time out"));break;case ja.HTTP_ERROR:const p=u.getStatus();if(he(Ut,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const _=y?.error;if(_&&_.status&&_.message){const I=(function(N){const L=N.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(L)>=0?L:G.UNKNOWN})(_.status);c(new de(I,_.message))}else c(new de(G.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new de(G.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{he(Ut,`RPC '${e}' ${o} completed.`)}}));const d=JSON.stringify(i);he(Ut,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",d,s,15)}))}T_(e,n,s){const i=wd(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=q_(),a=W_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const d=r.join("");he(Ut,`Creating RPC '${e}' stream ${i}: ${d}`,c);const h=o.createWebChannel(d,c);this.I_(h);let p=!1,y=!1;const _=new mN({Yo:k=>{y?he(Ut,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(p||(he(Ut,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),he(Ut,`RPC '${e}' stream ${i} sending:`,k),h.send(k))},Zo:()=>h.close()}),I=(k,N,L)=>{k.listen(N,(R=>{try{L(R)}catch(C){setTimeout((()=>{throw C}),0)}}))};return I(h,Xr.EventType.OPEN,(()=>{y||(he(Ut,`RPC '${e}' stream ${i} transport opened.`),_.o_())})),I(h,Xr.EventType.CLOSE,(()=>{y||(y=!0,he(Ut,`RPC '${e}' stream ${i} transport closed`),_.a_(),this.E_(h))})),I(h,Xr.EventType.ERROR,(k=>{y||(y=!0,mr(Ut,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),_.a_(new de(G.UNAVAILABLE,"The operation could not be completed")))})),I(h,Xr.EventType.MESSAGE,(k=>{if(!y){const N=k.data[0];Ye(!!N,16349);const L=N,R=L?.error||L[0]?.error;if(R){he(Ut,`RPC '${e}' stream ${i} received error:`,R);const C=R.status;let P=(function(w){const T=mt[w];if(T!==void 0)return Aw(T)})(C),O=R.message;P===void 0&&(P=G.INTERNAL,O="Unknown error status: "+C+" with message "+R.message),y=!0,_.a_(new de(P,O)),h.close()}else he(Ut,`RPC '${e}' stream ${i} received:`,N),_.u_(N)}})),I(a,H_.STAT_EVENT,(k=>{k.stat===ld.PROXY?he(Ut,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===ld.NOPROXY&&he(Ut,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{_.__()}),0),_}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function gu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(t){return new wD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,n,s=1e3,i=1.5,r=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=i,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-s);i>0&&he("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg="PersistentStream";class jw{constructor(e,n,s,i,r,o,a,c){this.Mi=e,this.S_=s,this.b_=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Uw(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(cs(n.toString()),cs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,i])=>{this.D_===n&&this.G_(s,i)}),(s=>{e((()=>{const i=new de(G.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(i)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{s((()=>this.z_(i)))})),this.stream.onMessage((i=>{s((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(wg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(he(wg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class yN extends jw{constructor(e,n,s,i,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=ID(this.serializer,e),s=(function(r){if(!("targetChange"in r))return Re.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?Re.min():o.readTime?Vn(o.readTime):Re.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=vd(this.serializer),n.addTarget=(function(r,o){let a;const c=o.target;if(a=fd(c)?{documents:AD(r,c)}:{query:SD(r,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Rw(r,o.resumeToken);const u=md(r,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Re.min())>0){a.readTime=Sl(r,o.snapshotVersion.toTimestamp());const u=md(r,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);const s=RD(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=vd(this.serializer),n.removeTarget=e,this.q_(n)}}class vN extends jw{constructor(e,n,s,i,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=kD(e.writeResults,e.commitTime),s=Vn(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=vd(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>ED(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{}class wN extends _N{constructor(e,n,s,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new de(G.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,o])=>this.connection.Go(e,gd(n,s),i,r,o))).catch((r=>{throw r.name==="FirebaseError"?(r.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new de(G.UNKNOWN,r.toString())}))}Ho(e,n,s,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(e,gd(n,s),i,o,a,r))).catch((o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(G.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class bN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(cs(n),this.aa=!1):he("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si="RemoteStore";class TN{constructor(e,n,s,i,r){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo((o=>{s.enqueueAndForget((async()=>{Pi(this)&&(he(Si,"Restarting streams for network reachability change."),await(async function(c){const u=Pe(c);u.Ea.add(4),await Go(u),u.Ra.set("Unknown"),u.Ea.delete(4),await dc(u)})(this))}))})),this.Ra=new bN(s,i)}}async function dc(t){if(Pi(t))for(const e of t.da)await e(!0)}async function Go(t){for(const e of t.da)await e(!1)}function Bw(t,e){const n=Pe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Vh(n)?Oh(n):Pr(n).O_()&&Nh(n,e))}function Dh(t,e){const n=Pe(t),s=Pr(n);n.Ia.delete(e),s.O_()&&zw(n,e),n.Ia.size===0&&(s.O_()?s.L_():Pi(n)&&n.Ra.set("Unknown"))}function Nh(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Pr(t).Y_(e)}function zw(t,e){t.Va.Ue(e),Pr(t).Z_(e)}function Oh(t){t.Va=new gD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Pr(t).start(),t.Ra.ua()}function Vh(t){return Pi(t)&&!Pr(t).x_()&&t.Ia.size>0}function Pi(t){return Pe(t).Ea.size===0}function Hw(t){t.Va=void 0}async function IN(t){t.Ra.set("Online")}async function EN(t){t.Ia.forEach(((e,n)=>{Nh(t,e)}))}async function kN(t,e){Hw(t),Vh(t)?(t.Ra.ha(e),Oh(t)):t.Ra.set("Unknown")}async function AN(t,e,n){if(t.Ra.set("Online"),e instanceof Cw&&e.state===2&&e.cause)try{await(async function(i,r){const o=r.cause;for(const a of r.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})(t,e)}catch(s){he(Si,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Rl(t,s)}else if(e instanceof Wa?t.Va.Ze(e):e instanceof Sw?t.Va.st(e):t.Va.tt(e),!n.isEqual(Re.min()))try{const s=await $w(t.localStore);n.compareTo(s)>=0&&await(function(r,o){const a=r.Va.Tt(o);return a.targetChanges.forEach(((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=r.Ia.get(u);d&&r.Ia.set(u,d.withResumeToken(c.resumeToken,o))}})),a.targetMismatches.forEach(((c,u)=>{const d=r.Ia.get(c);if(!d)return;r.Ia.set(c,d.withResumeToken(Vt.EMPTY_BYTE_STRING,d.snapshotVersion)),zw(r,c);const h=new Ns(d.target,c,u,d.sequenceNumber);Nh(r,h)})),r.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(s){he(Si,"Failed to raise snapshot:",s),await Rl(t,s)}}async function Rl(t,e,n){if(!Rr(e))throw e;t.Ea.add(1),await Go(t),t.Ra.set("Offline"),n||(n=()=>$w(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{he(Si,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await dc(t)}))}function Ww(t,e){return e().catch((n=>Rl(t,n,e)))}async function hc(t){const e=Pe(t),n=Ks(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:_h;for(;SN(e);)try{const i=await lN(e.localStore,s);if(i===null){e.Ta.length===0&&n.L_();break}s=i.batchId,CN(e,i)}catch(i){await Rl(e,i)}qw(e)&&Kw(e)}function SN(t){return Pi(t)&&t.Ta.length<10}function CN(t,e){t.Ta.push(e);const n=Ks(t);n.O_()&&n.X_&&n.ea(e.mutations)}function qw(t){return Pi(t)&&!Ks(t).x_()&&t.Ta.length>0}function Kw(t){Ks(t).start()}async function RN(t){Ks(t).ra()}async function PN(t){const e=Ks(t);for(const n of t.Ta)e.ea(n.mutations)}async function xN(t,e,n){const s=t.Ta.shift(),i=Ah.from(s,e,n);await Ww(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await hc(t)}async function MN(t,e){e&&Ks(t).X_&&await(async function(s,i){if((function(o){return fD(o)&&o!==G.ABORTED})(i.code)){const r=s.Ta.shift();Ks(s).B_(),await Ww(s,(()=>s.remoteSyncer.rejectFailedWrite(r.batchId,i))),await hc(s)}})(t,e),qw(t)&&Kw(t)}async function bg(t,e){const n=Pe(t);n.asyncQueue.verifyOperationInProgress(),he(Si,"RemoteStore received new credentials");const s=Pi(n);n.Ea.add(3),await Go(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await dc(n)}async function DN(t,e){const n=Pe(t);e?(n.Ea.delete(2),await dc(n)):e||(n.Ea.add(2),await Go(n),n.Ra.set("Unknown"))}function Pr(t){return t.ma||(t.ma=(function(n,s,i){const r=Pe(n);return r.sa(),new yN(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)})(t.datastore,t.asyncQueue,{Xo:IN.bind(null,t),t_:EN.bind(null,t),r_:kN.bind(null,t),H_:AN.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Vh(t)?Oh(t):t.Ra.set("Unknown")):(await t.ma.stop(),Hw(t))}))),t.ma}function Ks(t){return t.fa||(t.fa=(function(n,s,i){const r=Pe(n);return r.sa(),new vN(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:RN.bind(null,t),r_:MN.bind(null,t),ta:PN.bind(null,t),na:xN.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await hc(t)):(await t.fa.stop(),t.Ta.length>0&&(he(Si,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n,s,i,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=r,this.deferred=new ss,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,i,r){const o=Date.now()+s,a=new Lh(e,n,o,i,r);return a.start(s),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fh(t,e){if(cs("AsyncQueue",`${e}: ${t}`),Rr(t))return new de(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{static emptySet(e){return new rr(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||_e.comparator(n.key,s.key):(n,s)=>_e.comparator(n.key,s.key),this.keyedMap=Zr(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof rr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new rr;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(){this.ga=new ut(_e.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ke(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class wr{constructor(e,n,s,i,r,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,i,r){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new wr(e,n,rr.emptySet(n),o,s,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class ON{constructor(){this.queries=Ig(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const i=Pe(n),r=i.queries;i.queries=Ig(),r.forEach(((o,a)=>{for(const c of a.Sa)c.onError(s)}))})(this,new de(G.ABORTED,"Firestore shutting down"))}}function Ig(){return new Ri((t=>pw(t)),rc)}async function $h(t,e){const n=Pe(t);let s=3;const i=e.query;let r=n.queries.get(i);r?!r.ba()&&e.Da()&&(s=2):(r=new NN,s=e.Da()?0:1);try{switch(s){case 0:r.wa=await n.onListen(i,!0);break;case 1:r.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Fh(o,`Initialization of query '${qi(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,r),r.Sa.push(e),e.va(n.onlineState),r.wa&&e.Fa(r.wa)&&jh(n)}async function Uh(t,e){const n=Pe(t),s=e.query;let i=3;const r=n.queries.get(s);if(r){const o=r.Sa.indexOf(e);o>=0&&(r.Sa.splice(o,1),r.Sa.length===0?i=e.Da()?0:1:!r.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function VN(t,e){const n=Pe(t);let s=!1;for(const i of e){const r=i.query,o=n.queries.get(r);if(o){for(const a of o.Sa)a.Fa(i)&&(s=!0);o.wa=i}}s&&jh(n)}function LN(t,e,n){const s=Pe(t),i=s.queries.get(e);if(i)for(const r of i.Sa)r.onError(n);s.queries.delete(e)}function jh(t){t.Ca.forEach((e=>{e.next()}))}var bd,Eg;(Eg=bd||(bd={})).Ma="default",Eg.Cache="cache";class Bh{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new wr(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=wr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==bd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e){this.key=e}}class Qw{constructor(e){this.key=e}}class FN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Oe(),this.mutatedKeys=Oe(),this.eu=mw(e),this.tu=new rr(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new Tg,i=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((d,h)=>{const p=i.get(d),y=oc(this.query,h)?h:null,_=!!p&&this.mutatedKeys.has(p.key),I=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let k=!1;p&&y?p.data.isEqual(y.data)?_!==I&&(s.track({type:3,doc:y}),k=!0):this.su(p,y)||(s.track({type:2,doc:y}),k=!0,(c&&this.eu(y,c)>0||u&&this.eu(y,u)<0)&&(a=!0)):!p&&y?(s.track({type:0,doc:y}),k=!0):p&&!y&&(s.track({type:1,doc:p}),k=!0,(c||u)&&(a=!0)),k&&(y?(o=o.add(y),r=I?r.add(d):r.delete(d)):(o=o.delete(d),r=r.delete(d)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),r=r.delete(d.key),s.track({type:1,doc:d})}return{tu:o,iu:s,Cs:a,mutatedKeys:r}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,i){const r=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((d,h)=>(function(y,_){const I=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{Rt:k})}};return I(y)-I(_)})(d.type,h.type)||this.eu(d.doc,h.doc))),this.ou(s),i=i??!1;const a=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new wr(this.query,e.tu,r,o,e.mutatedKeys,c===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Tg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Oe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new Qw(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new Gw(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Oe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return wr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const zh="SyncEngine";class $N{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class UN{constructor(e){this.key=e,this.hu=!1}}class jN{constructor(e,n,s,i,r,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ri((a=>pw(a)),rc),this.Iu=new Map,this.Eu=new Set,this.du=new ut(_e.comparator),this.Au=new Map,this.Ru=new Rh,this.Vu={},this.mu=new Map,this.fu=_r.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function BN(t,e,n=!0){const s=t0(t);let i;const r=s.Tu.get(e);return r?(s.sharedClientState.addLocalQueryTarget(r.targetId),i=r.view.lu()):i=await Yw(s,e,n,!0),i}async function zN(t,e){const n=t0(t);await Yw(n,e,!0,!1)}async function Yw(t,e,n,s){const i=await cN(t.localStore,On(e)),r=i.targetId,o=t.sharedClientState.addLocalQueryTarget(r,n);let a;return s&&(a=await HN(t,e,r,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Bw(t.remoteStore,i),a}async function HN(t,e,n,s,i){t.pu=(h,p,y)=>(async function(I,k,N,L){let R=k.view.ru(N);R.Cs&&(R=await gg(I.localStore,k.query,!1).then((({documents:b})=>k.view.ru(b,R))));const C=L&&L.targetChanges.get(k.targetId),P=L&&L.targetMismatches.get(k.targetId)!=null,O=k.view.applyChanges(R,I.isPrimaryClient,C,P);return Ag(I,k.targetId,O.au),O.snapshot})(t,h,p,y);const r=await gg(t.localStore,e,!0),o=new FN(e,r.Qs),a=o.ru(r.documents),c=Ko.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,c);Ag(t,n,u.au);const d=new $N(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function WN(t,e,n){const s=Pe(t),i=s.Tu.get(e),r=s.Iu.get(i.targetId);if(r.length>1)return s.Iu.set(i.targetId,r.filter((o=>!rc(o,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await _d(s.localStore,i.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(i.targetId),n&&Dh(s.remoteStore,i.targetId),Td(s,i.targetId)})).catch(Cr)):(Td(s,i.targetId),await _d(s.localStore,i.targetId,!0))}async function qN(t,e){const n=Pe(t),s=n.Tu.get(e),i=n.Iu.get(s.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Dh(n.remoteStore,s.targetId))}async function KN(t,e,n){const s=eO(t);try{const i=await(function(o,a){const c=Pe(o),u=ot.now(),d=a.reduce(((y,_)=>y.add(_.key)),Oe());let h,p;return c.persistence.runTransaction("Locally write mutations","readwrite",(y=>{let _=us(),I=Oe();return c.Ns.getEntries(y,d).next((k=>{_=k,_.forEach(((N,L)=>{L.isValidDocument()||(I=I.add(N))}))})).next((()=>c.localDocuments.getOverlayedDocuments(y,_))).next((k=>{h=k;const N=[];for(const L of a){const R=lD(L,h.get(L.key).overlayedDocument);R!=null&&N.push(new Xs(L.key,R,ow(R.value.mapValue),gn.exists(!0)))}return c.mutationQueue.addMutationBatch(y,u,N,a)})).next((k=>{p=k;const N=k.applyToLocalDocumentSet(h,I);return c.documentOverlayCache.saveOverlays(y,k.batchId,N)}))})).then((()=>({batchId:p.batchId,changes:yw(h)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new ut(Ne)),u=u.insert(a,c),o.Vu[o.currentUser.toKey()]=u})(s,i.batchId,n),await Qo(s,i.changes),await hc(s.remoteStore)}catch(i){const r=Fh(i,"Failed to persist write");n.reject(r)}}async function Jw(t,e){const n=Pe(t);try{const s=await oN(n.localStore,e);e.targetChanges.forEach(((i,r)=>{const o=n.Au.get(r);o&&(Ye(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Ye(o.hu,14607):i.removedDocuments.size>0&&(Ye(o.hu,42227),o.hu=!1))})),await Qo(n,s,e)}catch(s){await Cr(s)}}function kg(t,e,n){const s=Pe(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.Tu.forEach(((r,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)})),(function(o,a){const c=Pe(o);c.onlineState=a;let u=!1;c.queries.forEach(((d,h)=>{for(const p of h.Sa)p.va(a)&&(u=!0)})),u&&jh(c)})(s.eventManager,e),i.length&&s.Pu.H_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function GN(t,e,n){const s=Pe(t);s.sharedClientState.updateQueryState(e,"rejected",n);const i=s.Au.get(e),r=i&&i.key;if(r){let o=new ut(_e.comparator);o=o.insert(r,Ht.newNoDocument(r,Re.min()));const a=Oe().add(r),c=new cc(Re.min(),new Map,new ut(Ne),o,a);await Jw(s,c),s.du=s.du.remove(r),s.Au.delete(e),Hh(s)}else await _d(s.localStore,e,!1).then((()=>Td(s,e,n))).catch(Cr)}async function QN(t,e){const n=Pe(t),s=e.batch.batchId;try{const i=await rN(n.localStore,e);Zw(n,s,null),Xw(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Qo(n,i)}catch(i){await Cr(i)}}async function YN(t,e,n){const s=Pe(t);try{const i=await(function(o,a){const c=Pe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next((h=>(Ye(h!==null,37113),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h)))).next((()=>c.mutationQueue.performConsistencyCheck(u))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d))).next((()=>c.localDocuments.getDocuments(u,d)))}))})(s.localStore,e);Zw(s,e,n),Xw(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Qo(s,i)}catch(i){await Cr(i)}}function Xw(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function Zw(t,e,n){const s=Pe(t);let i=s.Vu[s.currentUser.toKey()];if(i){const r=i.get(e);r&&(n?r.reject(n):r.resolve(),i=i.remove(e)),s.Vu[s.currentUser.toKey()]=i}}function Td(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((s=>{t.Ru.containsKey(s)||e0(t,s)}))}function e0(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Dh(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Hh(t))}function Ag(t,e,n){for(const s of n)s instanceof Gw?(t.Ru.addReference(s.key,e),JN(t,s)):s instanceof Qw?(he(zh,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||e0(t,s.key)):ke(19791,{wu:s})}function JN(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(he(zh,"New document in limbo: "+n),t.Eu.add(s),Hh(t))}function Hh(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new _e(st.fromString(e)),s=t.fu.next();t.Au.set(s,new UN(n)),t.du=t.du.insert(n,s),Bw(t.remoteStore,new Ns(On(ic(n.path)),s,"TargetPurposeLimboResolution",tc.ce))}}async function Qo(t,e,n){const s=Pe(t),i=[],r=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach(((a,c)=>{o.push(s.pu(c,e,n).then((u=>{if((u||n)&&s.isPrimaryClient){const d=u?!u.fromCache:n?.targetChanges.get(c.targetId)?.current;s.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(u){i.push(u);const d=xh.As(c.targetId,u);r.push(d)}})))})),await Promise.all(o),s.Pu.H_(i),await(async function(c,u){const d=Pe(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(h=>Y.forEach(u,(p=>Y.forEach(p.Es,(y=>d.persistence.referenceDelegate.addReference(h,p.targetId,y))).next((()=>Y.forEach(p.ds,(y=>d.persistence.referenceDelegate.removeReference(h,p.targetId,y)))))))))}catch(h){if(!Rr(h))throw h;he(Mh,"Failed to update sequence numbers: "+h)}for(const h of u){const p=h.targetId;if(!h.fromCache){const y=d.Ms.get(p),_=y.snapshotVersion,I=y.withLastLimboFreeSnapshotVersion(_);d.Ms=d.Ms.insert(p,I)}}})(s.localStore,r))}async function XN(t,e){const n=Pe(t);if(!n.currentUser.isEqual(e)){he(zh,"User change. New user:",e.toKey());const s=await Fw(n.localStore,e);n.currentUser=e,(function(r,o){r.mu.forEach((a=>{a.forEach((c=>{c.reject(new de(G.CANCELLED,o))}))})),r.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Qo(n,s.Ls)}}function ZN(t,e){const n=Pe(t),s=n.Au.get(e);if(s&&s.hu)return Oe().add(s.key);{let i=Oe();const r=n.Iu.get(e);if(!r)return i;for(const o of r){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function t0(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Jw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GN.bind(null,e),e.Pu.H_=VN.bind(null,e.eventManager),e.Pu.yu=LN.bind(null,e.eventManager),e}function eO(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YN.bind(null,e),e}class Pl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=uc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return iN(this.persistence,new tN,e.initialUser,this.serializer)}Cu(e){return new Lw(Ph.mi,this.serializer)}Du(e){return new dN}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pl.provider={build:()=>new Pl};class tO extends Pl{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ye(this.persistence.referenceDelegate instanceof Cl,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new UD(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new Lw((s=>Cl.mi(s,n)),this.serializer)}}class Id{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>kg(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=XN.bind(null,this.syncEngine),await DN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ON})()}createDatastore(e){const n=uc(e.databaseInfo.databaseId),s=(function(r){return new gN(r)})(e.databaseInfo);return(function(r,o,a,c){return new wN(r,o,a,c)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,i,r,o,a){return new TN(s,i,r,o,a)})(this.localStore,this.datastore,e.asyncQueue,(n=>kg(this.syncEngine,n,0)),(function(){return _g.v()?new _g:new hN})())}createSyncEngine(e,n){return(function(i,r,o,a,c,u,d){const h=new jN(i,r,o,a,c,u);return d&&(h.gu=!0),h})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Pe(n);he(Si,"RemoteStore shutting down."),s.Ea.add(5),await Go(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Id.provider={build:()=>new Id};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):cs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="FirestoreClient";class nO{constructor(e,n,s,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=i,this.user=Bt.UNAUTHENTICATED,this.clientId=vh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(s,(async o=>{he(Gs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(s,(o=>(he(Gs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ss;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Fh(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function yu(t,e){t.asyncQueue.verifyOperationInProgress(),he(Gs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async i=>{s.isEqual(i)||(await Fw(e.localStore,i),s=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Sg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await sO(t);he(Gs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((s=>bg(e.remoteStore,s))),t.setAppCheckTokenChangeListener(((s,i)=>bg(e.remoteStore,i))),t._onlineComponents=e}async function sO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){he(Gs,"Using user provided OfflineComponentProvider");try{await yu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===G.FAILED_PRECONDITION||i.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;mr("Error using user provided cache. Falling back to memory cache: "+n),await yu(t,new Pl)}}else he(Gs,"Using default OfflineComponentProvider"),await yu(t,new tO(void 0));return t._offlineComponents}async function n0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(he(Gs,"Using user provided OnlineComponentProvider"),await Sg(t,t._uninitializedComponentsProvider._online)):(he(Gs,"Using default OnlineComponentProvider"),await Sg(t,new Id))),t._onlineComponents}function iO(t){return n0(t).then((e=>e.syncEngine))}async function xl(t){const e=await n0(t),n=e.eventManager;return n.onListen=BN.bind(null,e.syncEngine),n.onUnlisten=WN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=zN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=qN.bind(null,e.syncEngine),n}function rO(t,e,n={}){const s=new ss;return t.asyncQueue.enqueueAndForget((async()=>(function(r,o,a,c,u){const d=new Wh({next:p=>{d.Nu(),o.enqueueAndForget((()=>Uh(r,h)));const y=p.docs.has(a);!y&&p.fromCache?u.reject(new de(G.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&c&&c.source==="server"?u.reject(new de(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),h=new Bh(ic(a.path),d,{includeMetadataChanges:!0,qa:!0});return $h(r,h)})(await xl(t),t.asyncQueue,e,n,s))),s.promise}function oO(t,e,n={}){const s=new ss;return t.asyncQueue.enqueueAndForget((async()=>(function(r,o,a,c,u){const d=new Wh({next:p=>{d.Nu(),o.enqueueAndForget((()=>Uh(r,h))),p.fromCache&&c.source==="server"?u.reject(new de(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),h=new Bh(a,d,{includeMetadataChanges:!0,qa:!0});return $h(r,h)})(await xl(t),t.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="firestore.googleapis.com",Rg=!0;class Pg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=i0,this.ssl=Rg}else this.host=e.host,this.ssl=e.ssl??Rg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Vw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FD)throw new de(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=s0(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new de(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new de(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new de(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,i){return s.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fc{constructor(e,n,s,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new uM;switch(s.type){case"firstParty":return new pM(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new de(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=Cg.get(n);s&&(he("ComponentProvider","Removing Datastore"),Cg.delete(n),s.terminate())})(this),Promise.resolve()}}function aO(t,e,n,s={}){t=tn(t,fc);const i=kr(e),r=t._getSettings(),o={...r,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(D_(`https://${a}`),N_("Firestore",!0)),r.host!==i0&&r.host!==a&&mr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...r,host:a,ssl:i,emulatorOptions:s};if(!Ei(c,o)&&(t._setSettings(c),s.mockUserToken)){let u,d;if(typeof s.mockUserToken=="string")u=s.mockUserToken,d=Bt.MOCK_USER;else{u=LP(s.mockUserToken,t._app?.options.projectId);const h=s.mockUserToken.sub||s.mockUserToken.user_id;if(!h)throw new de(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Bt(h)}t._authCredentials=new dM(new G_(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Zs(this.firestore,e,this._query)}}class ht{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Us(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ht(this.firestore,e,this._key)}toJSON(){return{type:ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Ho(n,ht._jsonSchema))return new ht(e,s||null,new _e(st.fromString(n.referencePath)))}}ht._jsonSchemaVersion="firestore/documentReference/1.0",ht._jsonSchema={type:yt("string",ht._jsonSchemaVersion),referencePath:yt("string")};class Us extends Zs{constructor(e,n,s){super(e,n,ic(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ht(this.firestore,null,new _e(e))}withConverter(e){return new Us(this.firestore,e,this._path)}}function Dn(t,e,...n){if(t=It(t),Q_("collection","path",e),t instanceof fc){const s=st.fromString(e,...n);return zm(s),new Us(t,null,s)}{if(!(t instanceof ht||t instanceof Us))throw new de(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(st.fromString(e,...n));return zm(s),new Us(t.firestore,null,s)}}function Ln(t,e,...n){if(t=It(t),arguments.length===1&&(e=vh.newId()),Q_("doc","path",e),t instanceof fc){const s=st.fromString(e,...n);return Bm(s),new ht(t,null,new _e(s))}{if(!(t instanceof ht||t instanceof Us))throw new de(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(st.fromString(e,...n));return Bm(s),new ht(t.firestore,t instanceof Us?t.converter:null,new _e(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg="AsyncQueue";class Mg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Uw(this,"async_queue_retry"),this._c=()=>{const s=gu();s&&he(xg,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=gu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=gu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ss;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Rr(e))throw e;he(xg,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,cs("INTERNAL UNHANDLED ERROR: ",Dg(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Lh.createAndSchedule(this,e,n,s,(r=>this.hc(r)));return this.tc.push(i),i}uc(){this.nc&&ke(47125,{Pc:Dg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Dg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(t){return(function(n,s){if(typeof n!="object"||n===null)return!1;const i=n;for(const r of s)if(r in i&&typeof i[r]=="function")return!0;return!1})(t,["next","error","complete"])}class ds extends fc{constructor(e,n,s,i){super(e,n,s,i),this.type="firestore",this._queue=new Mg,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Mg(e),this._firestoreClient=void 0,await e}}}function lO(t,e){const n=typeof t=="object"?t:F_(),s=typeof t=="string"?t:bl,i=gh(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const r=OP("firestore");r&&aO(i,...r)}return i}function pc(t){if(t._terminated)throw new de(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||cO(t),t._firestoreClient}function cO(t){const e=t._freezeSettings(),n=(function(i,r,o,a){return new MM(i,r,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,s0(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new nO(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const r=i?._online.build();return{_offline:i?._offline.build(r),_online:r}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pn(Vt.fromBase64String(e))}catch(n){throw new de(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new pn(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:pn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ho(e,pn._jsonSchema))return pn.fromBase64String(e.bytes)}}pn._jsonSchemaVersion="firestore/bytes/1.0",pn._jsonSchema={type:yt("string",pn._jsonSchemaVersion),bytes:yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fn._jsonSchemaVersion}}static fromJSON(e){if(Ho(e,Fn._jsonSchema))return new Fn(e.latitude,e.longitude)}}Fn._jsonSchemaVersion="firestore/geoPoint/1.0",Fn._jsonSchema={type:yt("string",Fn._jsonSchemaVersion),latitude:yt("number"),longitude:yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,i){if(s.length!==i.length)return!1;for(let r=0;r<s.length;++r)if(s[r]!==i[r])return!1;return!0})(this._values,e._values)}toJSON(){return{type:$n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ho(e,$n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new $n(e.vectorValues);throw new de(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$n._jsonSchemaVersion="firestore/vectorValue/1.0",$n._jsonSchema={type:yt("string",$n._jsonSchemaVersion),vectorValues:yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO=/^__.*__$/;class dO{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Xs(e,this.data,this.fieldMask,n,this.fieldTransforms):new qo(e,this.data,n,this.fieldTransforms)}}class r0{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Xs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function o0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{Ac:t})}}class qh{constructor(e,n,s,i,r,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new qh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ml(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(o0(this.Ac)&&uO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class hO{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||uc(e)}Cc(e,n,s,i=!1){return new qh({Ac:e,methodName:n,Dc:s,path:Nt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yc(t){const e=t._freezeSettings(),n=uc(t._databaseId);return new hO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function a0(t,e,n,s,i,r={}){const o=t.Cc(r.merge||r.mergeFields?2:0,e,n,i);Gh("Data must be an object, but it was:",o,s);const a=l0(s,o);let c,u;if(r.merge)c=new on(o.fieldMask),u=o.fieldTransforms;else if(r.mergeFields){const d=[];for(const h of r.mergeFields){const p=Ed(e,h,n);if(!o.contains(p))throw new de(G.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);u0(d,p)||d.push(p)}c=new on(d),u=o.fieldTransforms.filter((h=>c.covers(h.field)))}else c=null,u=o.fieldTransforms;return new dO(new Zt(a),c,u)}class vc extends gc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vc}}class Kh extends gc{_toFieldTransform(e){return new iD(e.path,new Po)}isEqual(e){return e instanceof Kh}}function fO(t,e,n,s){const i=t.Cc(1,e,n);Gh("Data must be an object, but it was:",i,s);const r=[],o=Zt.empty();Js(s,((c,u)=>{const d=Qh(e,c,n);u=It(u);const h=i.yc(d);if(u instanceof vc)r.push(d);else{const p=Yo(u,h);p!=null&&(r.push(d),o.set(d,p))}}));const a=new on(r);return new r0(o,a,i.fieldTransforms)}function pO(t,e,n,s,i,r){const o=t.Cc(1,e,n),a=[Ed(e,s,n)],c=[i];if(r.length%2!=0)throw new de(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<r.length;p+=2)a.push(Ed(e,r[p])),c.push(r[p+1]);const u=[],d=Zt.empty();for(let p=a.length-1;p>=0;--p)if(!u0(u,a[p])){const y=a[p];let _=c[p];_=It(_);const I=o.yc(y);if(_ instanceof vc)u.push(y);else{const k=Yo(_,I);k!=null&&(u.push(y),d.set(y,k))}}const h=new on(u);return new r0(d,h,o.fieldTransforms)}function mO(t,e,n,s=!1){return Yo(n,t.Cc(s?4:3,e))}function Yo(t,e){if(c0(t=It(t)))return Gh("Unsupported field value:",e,t),l0(t,e);if(t instanceof gc)return(function(s,i){if(!o0(i.Ac))throw i.Sc(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${s._methodName}() is not currently supported inside arrays`);const r=s._toFieldTransform(i);r&&i.fieldTransforms.push(r)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,i){const r=[];let o=0;for(const a of s){let c=Yo(a,i.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),r.push(c),o++}return{arrayValue:{values:r}}})(t,e)}return(function(s,i){if((s=It(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return tD(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const r=ot.fromDate(s);return{timestampValue:Sl(i.serializer,r)}}if(s instanceof ot){const r=new ot(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Sl(i.serializer,r)}}if(s instanceof Fn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof pn)return{bytesValue:Rw(i.serializer,s._byteString)};if(s instanceof ht){const r=i.databaseId,o=s.firestore._databaseId;if(!o.isEqual(r))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Ch(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof $n)return(function(o,a){return{mapValue:{fields:{[iw]:{stringValue:rw},[Tl]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return Eh(a.serializer,u)}))}}}}}})(s,i);throw i.Sc(`Unsupported field value: ${ec(s)}`)})(t,e)}function l0(t,e){const n={};return X_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Js(t,((s,i)=>{const r=Yo(i,e.mc(s));r!=null&&(n[s]=r)})),{mapValue:{fields:n}}}function c0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ot||t instanceof Fn||t instanceof pn||t instanceof ht||t instanceof gc||t instanceof $n)}function Gh(t,e,n){if(!c0(n)||!Y_(n)){const s=ec(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function Ed(t,e,n){if((e=It(e))instanceof mc)return e._internalPath;if(typeof e=="string")return Qh(t,e);throw Ml("Field path arguments must be of type string or ",t,!1,void 0,n)}const gO=new RegExp("[~\\*/\\[\\]]");function Qh(t,e,n){if(e.search(gO)>=0)throw Ml(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new mc(...e.split("."))._internalPath}catch{throw Ml(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ml(t,e,n,s,i){const r=s&&!s.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(r||o)&&(c+=" (found",r&&(c+=` in field ${s}`),o&&(c+=` in document ${i}`),c+=")"),new de(G.INVALID_ARGUMENT,a+t+c)}function u0(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e,n,s,i,r){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Yh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class yO extends d0{data(){return super.data()}}function Yh(t,e){return typeof e=="string"?Qh(t,e):e instanceof mc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new de(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jh{}class f0 extends Jh{}function Cs(t,e,...n){let s=[];e instanceof Jh&&s.push(e),s=s.concat(n),(function(r){const o=r.filter((c=>c instanceof Xh)).length,a=r.filter((c=>c instanceof _c)).length;if(o>1||o>0&&a>0)throw new de(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const i of s)t=i._apply(t);return t}class _c extends f0{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new _c(e,n,s)}_apply(e){const n=this._parse(e);return p0(e._query,n),new Zs(e.firestore,e.converter,pd(e._query,n))}_parse(e){const n=yc(e.firestore);return(function(r,o,a,c,u,d,h){let p;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new de(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Vg(h,d);const _=[];for(const I of h)_.push(Og(c,r,I));p={arrayValue:{values:_}}}else p=Og(c,r,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Vg(h,d),p=mO(a,o,h,d==="in"||d==="not-in");return gt.create(u,d,p)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Rs(t,e,n){const s=e,i=Yh("where",t);return _c._create(i,s,n)}class Xh extends Jh{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Xh(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:An.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,r){let o=i;const a=r.getFlattenedFilters();for(const c of a)p0(o,c),o=pd(o,c)})(e._query,n),new Zs(e.firestore,e.converter,pd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Zh extends f0{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new Zh(e,n,s)}_apply(e){return new Zs(e.firestore,e.converter,kl(e._query,this._limit,this._limitType))}}function qa(t){return bM("limit",t),Zh._create("limit",t,"F")}function Og(t,e,n){if(typeof(n=It(n))=="string"){if(n==="")throw new de(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fw(e)&&n.indexOf("/")!==-1)throw new de(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(st.fromString(n));if(!_e.isDocumentKey(s))throw new de(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Jm(t,new _e(s))}if(n instanceof ht)return Jm(t,n._key);throw new de(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ec(n)}.`)}function Vg(t,e){if(!Array.isArray(t)||t.length===0)throw new de(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function p0(t,e){const n=(function(i,r){for(const o of i)for(const a of o.getFlattenedFilters())if(r.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new de(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class vO{convertValue(e,n="none"){switch(qs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ws(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Js(e,((i,r)=>{s[i]=this.convertValue(r,n)})),s}convertVectorValue(e){const n=e.fields?.[Tl].arrayValue?.values?.map((s=>ft(s.doubleValue)));return new $n(n)}convertGeoPoint(e){return new Fn(ft(e.latitude),ft(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=sc(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(So(e));default:return null}}convertTimestamp(e){const n=Hs(e);return new ot(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=st.fromString(e);Ye(Ow(s),9688,{name:e});const i=new Co(s.get(1),s.get(3)),r=new _e(s.popFirst(5));return i.isEqual(n)||cs(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class to{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wi extends d0{constructor(e,n,s,i,r,o){super(e,n,s,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ka(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Yh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=wi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}wi._jsonSchemaVersion="firestore/documentSnapshot/1.0",wi._jsonSchema={type:yt("string",wi._jsonSchemaVersion),bundleSource:yt("string","DocumentSnapshot"),bundleName:yt("string"),bundle:yt("string")};class Ka extends wi{data(e={}){return super.data(e)}}class bi{constructor(e,n,s,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new to(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Ka(this._firestore,this._userDataWriter,s.key,s,new to(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((a=>{const c=new Ka(i._firestore,i._userDataWriter,a.doc.key,a.doc,new to(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((a=>r||a.type!==3)).map((a=>{const c=new Ka(i._firestore,i._userDataWriter,a.doc.key,a.doc,new to(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:_O(a.type),doc:c,oldIndex:u,newIndex:d}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=bi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=vh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],i=[];return this.docs.forEach((r=>{r._document!==null&&(n.push(r._document),s.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),i.push(r.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _O(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(t){t=tn(t,ht);const e=tn(t.firestore,ds);return rO(pc(e),t._key).then((n=>v0(e,t,n)))}bi._jsonSchemaVersion="firestore/querySnapshot/1.0",bi._jsonSchema={type:yt("string",bi._jsonSchemaVersion),bundleSource:yt("string","QuerySnapshot"),bundleName:yt("string"),bundle:yt("string")};class ef extends vO{constructor(e){super(),this.firestore=e}convertBytes(e){return new pn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,n)}}function bO(t){t=tn(t,Zs);const e=tn(t.firestore,ds),n=pc(e),s=new ef(e);return h0(t._query),oO(n,t._query).then((i=>new bi(e,s,t,i)))}function g0(t,e,n){t=tn(t,ht);const s=tn(t.firestore,ds),i=m0(t.converter,e,n);return wc(s,[a0(yc(s),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,gn.none())])}function Do(t,e,n,...s){t=tn(t,ht);const i=tn(t.firestore,ds),r=yc(i);let o;return o=typeof(e=It(e))=="string"||e instanceof mc?pO(r,"updateDoc",t._key,e,n,s):fO(r,"updateDoc",t._key,e),wc(i,[o.toMutation(t._key,gn.exists(!0))])}function TO(t){return wc(tn(t.firestore,ds),[new kh(t._key,gn.none())])}function y0(t,e){const n=tn(t.firestore,ds),s=Ln(t),i=m0(t.converter,e);return wc(n,[a0(yc(t.firestore),"addDoc",s._key,i,t.converter!==null,{}).toMutation(s._key,gn.exists(!1))]).then((()=>s))}function fi(t,...e){t=It(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Ng(e[s])||(n=e[s++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Ng(e[s])){const c=e[s];e[s]=c.next?.bind(c),e[s+1]=c.error?.bind(c),e[s+2]=c.complete?.bind(c)}let r,o,a;if(t instanceof ht)o=tn(t.firestore,ds),a=ic(t._key.path),r={next:c=>{e[s]&&e[s](v0(o,t,c))},error:e[s+1],complete:e[s+2]};else{const c=tn(t,Zs);o=tn(c.firestore,ds),a=c._query;const u=new ef(o);r={next:d=>{e[s]&&e[s](new bi(o,u,c,d))},error:e[s+1],complete:e[s+2]},h0(t._query)}return(function(u,d,h,p){const y=new Wh(p),_=new Bh(d,y,h);return u.asyncQueue.enqueueAndForget((async()=>$h(await xl(u),_))),()=>{y.Nu(),u.asyncQueue.enqueueAndForget((async()=>Uh(await xl(u),_)))}})(pc(o),a,i,r)}function wc(t,e){return(function(s,i){const r=new ss;return s.asyncQueue.enqueueAndForget((async()=>KN(await iO(s),i,r))),r.promise})(pc(t),e)}function v0(t,e,n){const s=n.docs.get(e._key),i=new ef(t);return new wi(t,i,e._key,s,new to(n.hasPendingWrites,n.fromCache),e.converter)}function zn(){return new Kh("serverTimestamp")}(function(e,n=!0){(function(i){Sr=i})(Ar),pr(new ki("firestore",((s,{instanceIdentifier:i,options:r})=>{const o=s.getProvider("app").getImmediate(),a=new ds(new hM(s.getProvider("auth-internal")),new mM(o,s.getProvider("app-check-internal")),(function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new de(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Co(u.options.projectId,d)})(o,i),o);return r={useFetchStreams:n,...r},a._setSettings(r),a}),"PUBLIC").setMultipleInstances(!0)),Fs(Fm,$m,e),Fs(Fm,$m,"esm2020")})();function _0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IO=_0,w0=new Bo("auth","Firebase",_0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=new ph("@firebase/auth");function EO(t,...e){Dl.logLevel<=De.WARN&&Dl.warn(`Auth (${Ar}): ${t}`,...e)}function Ga(t,...e){Dl.logLevel<=De.ERROR&&Dl.error(`Auth (${Ar}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(t,...e){throw tf(t,...e)}function Un(t,...e){return tf(t,...e)}function b0(t,e,n){const s={...IO(),[e]:n};return new Bo("auth","Firebase",s).create(e,{appName:t.name})}function js(t){return b0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tf(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return w0.create(t,...e)}function Ce(t,e,...n){if(!t)throw tf(e,...n)}function Xn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ga(e),new Error(e)}function fs(t,e){t||Xn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(){return typeof self<"u"&&self.location?.href||""}function kO(){return Lg()==="http:"||Lg()==="https:"}function Lg(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kO()||zP()||"connection"in navigator)?navigator.onLine:!0}function SO(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n){this.shortDelay=e,this.longDelay=n,fs(n>e,"Short delay should be less than long delay!"),this.isMobile=UP()||HP()}get(){return AO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(t,e){fs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PO=new Jo(3e4,6e4);function bc(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function xi(t,e,n,s,i={}){return I0(t,i,async()=>{let r={},o={};s&&(e==="GET"?o=s:r={body:JSON.stringify(s)});const a=zo({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...r};return BP()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&kr(t.emulatorConfig.host)&&(u.credentials="include"),T0.fetch()(await k0(t,t.config.apiHost,n,a),u)})}async function I0(t,e,n){t._canInitEmulator=!1;const s={...CO,...e};try{const i=new xO(t),r=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw Pa(t,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pa(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Pa(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Pa(t,"user-disabled",o);const d=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw b0(t,d,u);hs(t,d)}}catch(i){if(i instanceof ms)throw i;hs(t,"network-request-failed",{message:String(i)})}}async function E0(t,e,n,s,i={}){const r=await xi(t,e,n,s,i);return"mfaPendingCredential"in r&&hs(t,"multi-factor-auth-required",{_serverResponse:r}),r}async function k0(t,e,n,s){const i=`${e}${n}?${s}`,r=t,o=r.config.emulator?nf(t.config,i):`${t.config.apiScheme}://${i}`;return RO.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(o).toString():o}class xO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Un(this.auth,"network-request-failed")),PO.get())})}}function Pa(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=Un(t,e,s);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MO(t,e){return xi(t,"POST","/v1/accounts:delete",e)}async function Nl(t,e){return xi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function DO(t,e=!1){const n=It(t),s=await n.getIdToken(e),i=sf(s);Ce(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const r=typeof i.firebase=="object"?i.firebase:void 0,o=r?.sign_in_provider;return{claims:i,token:s,authTime:go(vu(i.auth_time)),issuedAtTime:go(vu(i.iat)),expirationTime:go(vu(i.exp)),signInProvider:o||null,signInSecondFactor:r?.sign_in_second_factor||null}}function vu(t){return Number(t)*1e3}function sf(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Ga("JWT malformed, contained fewer than 3 sections"),null;try{const i=R_(n);return i?JSON.parse(i):(Ga("Failed to decode base64 JWT payload"),null)}catch(i){return Ga("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Fg(t){const e=sf(t);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function br(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ms&&NO(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function NO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=go(this.lastLoginAt),this.creationTime=go(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ol(t){const e=t.auth,n=await t.getIdToken(),s=await br(t,Nl(e,{idToken:n}));Ce(s?.users.length,e,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const r=i.providerUserInfo?.length?A0(i.providerUserInfo):[],o=LO(t.providerData,r),a=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!o?.length,u=a?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ad(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function VO(t){const e=It(t);await Ol(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LO(t,e){return[...t.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function A0(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FO(t,e){const n=await I0(t,{},async()=>{const s=zo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,o=await k0(t,i,"/v1/token",`key=${r}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:s};return t.emulatorConfig&&kr(t.emulatorConfig.host)&&(c.credentials="include"),T0.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function $O(t,e){return xi(t,"POST","/v2/accounts:revokeToken",bc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Fg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const n=Fg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:i,expiresIn:r}=await FO(e,n);this.updateTokensAndExpiration(s,i,Number(r))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:i,expirationTime:r}=n,o=new or;return s&&(Ce(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),i&&(Ce(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),r&&(Ce(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new or,this.toJSON())}_performRefresh(){return Xn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(t,e){Ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Tn{constructor({uid:e,auth:n,stsTokenManager:s,...i}){this.providerId="firebase",this.proactiveRefresh=new OO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ad(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await br(this,this.stsTokenManager.getToken(this.auth,e));return Ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return DO(this,e)}reload(){return VO(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Tn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Ol(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bn(this.auth.app))return Promise.reject(js(this.auth));const e=await this.getIdToken();return await br(this,MO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,i=n.email??void 0,r=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:p,isAnonymous:y,providerData:_,stsTokenManager:I}=n;Ce(h&&I,e,"internal-error");const k=or.fromJSON(this.name,I);Ce(typeof h=="string",e,"internal-error"),bs(s,e.name),bs(i,e.name),Ce(typeof p=="boolean",e,"internal-error"),Ce(typeof y=="boolean",e,"internal-error"),bs(r,e.name),bs(o,e.name),bs(a,e.name),bs(c,e.name),bs(u,e.name),bs(d,e.name);const N=new Tn({uid:h,auth:e,email:i,emailVerified:p,displayName:s,isAnonymous:y,photoURL:o,phoneNumber:r,tenantId:a,stsTokenManager:k,createdAt:u,lastLoginAt:d});return _&&Array.isArray(_)&&(N.providerData=_.map(L=>({...L}))),c&&(N._redirectEventId=c),N}static async _fromIdTokenResponse(e,n,s=!1){const i=new or;i.updateFromServerResponse(n);const r=new Tn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await Ol(r),r}static async _fromGetAccountInfoResponse(e,n,s){const i=n.users[0];Ce(i.localId!==void 0,"internal-error");const r=i.providerUserInfo!==void 0?A0(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!r?.length,a=new or;a.updateFromIdToken(s);const c=new Tn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new Ad(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!r?.length};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g=new Map;function Zn(t){fs(t instanceof Function,"Expected a class definition");let e=$g.get(t);return e?(fs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$g.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}S0.type="NONE";const Ug=S0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qa(t,e,n){return`firebase:${t}:${e}:${n}`}class ar{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:i,name:r}=this.auth;this.fullUserKey=Qa(this.userKey,i.apiKey,r),this.fullPersistenceKey=Qa("persistence",i.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Nl(this.auth,{idToken:e}).catch(()=>{});return n?Tn._fromGetAccountInfoResponse(this.auth,n,e):null}return Tn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new ar(Zn(Ug),e,s);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let r=i[0]||Zn(Ug);const o=Qa(s,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){let h;if(typeof d=="string"){const p=await Nl(e,{idToken:d}).catch(()=>{});if(!p)break;h=await Tn._fromGetAccountInfoResponse(e,p,d)}else h=Tn._fromJSON(e,d);u!==r&&(a=h),r=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!r._shouldAllowMigration||!c.length?new ar(r,e,s):(r=c[0],a&&await r._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==r)try{await u._remove(o)}catch{}})),new ar(r,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(x0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(C0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(D0(e))return"Blackberry";if(N0(e))return"Webos";if(R0(e))return"Safari";if((e.includes("chrome/")||P0(e))&&!e.includes("edge/"))return"Chrome";if(M0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function C0(t=Wt()){return/firefox\//i.test(t)}function R0(t=Wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function P0(t=Wt()){return/crios\//i.test(t)}function x0(t=Wt()){return/iemobile/i.test(t)}function M0(t=Wt()){return/android/i.test(t)}function D0(t=Wt()){return/blackberry/i.test(t)}function N0(t=Wt()){return/webos/i.test(t)}function rf(t=Wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function UO(t=Wt()){return rf(t)&&!!window.navigator?.standalone}function jO(){return WP()&&document.documentMode===10}function O0(t=Wt()){return rf(t)||M0(t)||N0(t)||D0(t)||/windows phone/i.test(t)||x0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(t,e=[]){let n;switch(t){case"Browser":n=jg(Wt());break;case"Worker":n=`${jg(Wt())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ar}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=r=>new Promise((o,a)=>{try{const c=e(r);o(c)}catch(c){a(c)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zO(t,e={}){return xi(t,"GET","/v2/passwordPolicy",bc(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=6;class WO{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??HO,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e,n,s,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bg(this),this.idTokenSubscription=new Bg(this),this.beforeStateQueue=new BO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=w0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Zn(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ar.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Nl(this,{idToken:e}),s=await Tn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(bn(this.app)){const r=this.app.settings.authIdToken;return r?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(r).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=this.redirectUser?._redirectEventId,o=s?._redirectEventId,a=await this.tryRedirectSignIn(e);(!r||r===o)&&a?.user&&(s=a.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(r){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(r))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ol(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bn(this.app))return Promise.reject(js(this));const n=e?It(e):null;return n&&Ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bn(this.app)?Promise.reject(js(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bn(this.app)?Promise.reject(js(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zO(this),n=new WO(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bo("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await $O(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Zn(e)||this._popupRedirectResolver;Ce(n,this,"argument-error"),this.redirectPersistenceManager=await ar.create(this,[Zn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,i){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=V0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&EO(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Tc(t){return It(t)}class Bg{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZP(n=>this.observer=n)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let of={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KO(t){of=t}function GO(t){return of.loadJS(t)}function QO(){return of.gapiScript}function YO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JO(t,e){const n=gh(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),r=n.getOptions();if(Ei(r,e??{}))return i;hs(i,"already-initialized")}return n.initialize({options:e})}function XO(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Zn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function ZO(t,e,n){const s=Tc(t);Ce(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!1,r=L0(e),{host:o,port:a}=e4(e),c=a===null?"":`:${a}`,u={url:`${r}//${o}${c}/`},d=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){Ce(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ce(Ei(u,s.config.emulator)&&Ei(d,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=d,s.settings.appVerificationDisabledForTesting=!0,kr(o)?(D_(`${r}//${o}${c}`),N_("Auth",!0)):t4()}function L0(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function e4(t){const e=L0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const r=i[1];return{host:r,port:zg(s.substr(r.length+1))}}else{const[r,o]=s.split(":");return{host:r,port:zg(o)}}}function zg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function t4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Xn("not implemented")}_getIdTokenResponse(e){return Xn("not implemented")}_linkToIdToken(e,n){return Xn("not implemented")}_getReauthenticationResolver(e){return Xn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lr(t,e){return E0(t,"POST","/v1/accounts:signInWithIdp",bc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4="http://localhost";class Ci extends F0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ci(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i,...r}=n;if(!s||!i)return null;const o=new Ci(s,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return lr(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,lr(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,lr(e,n)}buildRequest(){const e={requestUri:n4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=zo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo extends $0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends Xo{constructor(){super("facebook.com")}static credential(e){return Ci._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ps.credential(e.oauthAccessToken)}catch{return null}}}Ps.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ps.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs extends Xo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ci._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return xs.credential(n,s)}catch{return null}}}xs.GOOGLE_SIGN_IN_METHOD="google.com";xs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends Xo{constructor(){super("github.com")}static credential(e){return Ci._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ms.credential(e.oauthAccessToken)}catch{return null}}}Ms.GITHUB_SIGN_IN_METHOD="github.com";Ms.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds extends Xo{constructor(){super("twitter.com")}static credential(e,n){return Ci._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Ds.credential(n,s)}catch{return null}}}Ds.TWITTER_SIGN_IN_METHOD="twitter.com";Ds.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s4(t,e){return E0(t,"POST","/v1/accounts:signUp",bc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,i=!1){const r=await Tn._fromIdTokenResponse(e,s,i),o=Hg(s);return new Qs({user:r,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const i=Hg(s);return new Qs({user:e,providerId:i,_tokenResponse:s,operationType:n})}}function Hg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i4(t){if(bn(t.app))return Promise.reject(js(t));const e=Tc(t);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Qs({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await s4(e,{returnSecureToken:!0}),s=await Qs._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl extends ms{constructor(e,n,s,i){super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,Vl.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,i){return new Vl(e,n,s,i)}}function U0(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Vl._fromErrorAndOperation(t,r,e,s):r})}async function r4(t,e,n=!1){const s=await br(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Qs._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o4(t,e,n=!1){const{auth:s}=t;if(bn(s.app))return Promise.reject(js(s));const i="reauthenticate";try{const r=await br(t,U0(s,i,e,t),n);Ce(r.idToken,s,"internal-error");const o=sf(r.idToken);Ce(o,s,"internal-error");const{sub:a}=o;return Ce(t.uid===a,s,"user-mismatch"),Qs._forOperation(t,i,r)}catch(r){throw r?.code==="auth/user-not-found"&&hs(s,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a4(t,e,n=!1){if(bn(t.app))return Promise.reject(js(t));const s="signIn",i=await U0(t,s,e),r=await Qs._fromIdTokenResponse(t,s,i);return n||await t._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l4(t,e){return xi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c4(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=It(t),r={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await br(s,l4(s.auth,r));s.displayName=o.displayName||null,s.photoURL=o.photoUrl||null;const a=s.providerData.find(({providerId:c})=>c==="password");a&&(a.displayName=s.displayName,a.photoURL=s.photoURL),await s._updateTokensIfNecessary(o)}function u4(t,e,n,s){return It(t).onIdTokenChanged(e,n,s)}function d4(t,e,n){return It(t).beforeAuthStateChanged(e,n)}function j0(t,e,n,s){return It(t).onAuthStateChanged(e,n,s)}function h4(t){return It(t).signOut()}const Ll="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ll,"1"),this.storage.removeItem(Ll),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4=1e3,p4=10;class z0 extends B0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=O0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&e(n,i,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},r=this.storage.getItem(s);jO()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,p4):i()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},f4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}z0.type="LOCAL";const m4=z0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0 extends B0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}H0.type="SESSION";const W0=H0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const s=new Ic(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:i,data:r}=n.data,o=this.handlersMap[i];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,r)),c=await g4(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ic.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise((a,c)=>{const u=af("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:i,onMessage(h){const p=h;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(d),r=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(p.data.response);break;default:clearTimeout(d),clearTimeout(r),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(){return window}function v4(t){jn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(){return typeof jn().WorkerGlobalScope<"u"&&typeof jn().importScripts=="function"}async function _4(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function w4(){return navigator?.serviceWorker?.controller||null}function b4(){return q0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="firebaseLocalStorageDb",T4=1,Fl="firebaseLocalStorage",G0="fbase_key";class Zo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ec(t,e){return t.transaction([Fl],e?"readwrite":"readonly").objectStore(Fl)}function I4(){const t=indexedDB.deleteDatabase(K0);return new Zo(t).toPromise()}function Sd(){const t=indexedDB.open(K0,T4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Fl,{keyPath:G0})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Fl)?e(s):(s.close(),await I4(),e(await Sd()))})})}async function Wg(t,e,n){const s=Ec(t,!0).put({[G0]:e,value:n});return new Zo(s).toPromise()}async function E4(t,e){const n=Ec(t,!1).get(e),s=await new Zo(n).toPromise();return s===void 0?null:s.value}function qg(t,e){const n=Ec(t,!0).delete(e);return new Zo(n).toPromise()}const k4=800,A4=3;class Q0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>A4)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return q0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ic._getInstance(b4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await _4(),!this.activeServiceWorker)return;this.sender=new y4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||w4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sd();return await Wg(e,Ll,"1"),await qg(e,Ll),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Wg(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>E4(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>qg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const r=Ec(i,!1).getAll();return new Zo(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:r}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),k4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Q0.type="LOCAL";const S4=Q0;new Jo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C4(t,e){return e?Zn(e):(Ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf extends F0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return lr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return lr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return lr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function R4(t){return a4(t.auth,new lf(t),t.bypassAuthState)}function P4(t){const{auth:e,user:n}=t;return Ce(n,e,"internal-error"),o4(n,new lf(t),t.bypassAuthState)}async function x4(t){const{auth:e,user:n}=t;return Ce(n,e,"internal-error"),r4(n,new lf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e,n,s,i,r=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:i,tenantId:r,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return R4;case"linkViaPopup":case"linkViaRedirect":return x4;case"reauthViaPopup":case"reauthViaRedirect":return P4;default:hs(this.auth,"internal-error")}}resolve(e){fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4=new Jo(2e3,1e4);class Ji extends Y0{constructor(e,n,s,i,r){super(e,n,i,r),this.provider=s,this.authWindow=null,this.pollId=null,Ji.currentPopupAction&&Ji.currentPopupAction.cancel(),Ji.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){fs(this.filter.length===1,"Popup operations only handle one event");const e=af();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Un(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Un(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ji.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Un(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,M4.get())};e()}}Ji.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4="pendingRedirect",Ya=new Map;class N4 extends Y0{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Ya.get(this.auth._key());if(!e){try{const s=await O4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Ya.set(this.auth._key(),e)}return this.bypassAuthState||Ya.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function O4(t,e){const n=F4(e),s=L4(t);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function V4(t,e){Ya.set(t._key(),e)}function L4(t){return Zn(t._redirectPersistence)}function F4(t){return Qa(D4,t.config.apiKey,t.name)}async function $4(t,e,n=!1){if(bn(t.app))return Promise.reject(js(t));const s=Tc(t),i=C4(s,e),o=await new N4(s,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4=600*1e3;class j4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!B4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!J0(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Un(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=U4&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kg(e))}saveEventToCache(e){this.cachedEventUids.add(Kg(e)),this.lastProcessedEventTime=Date.now()}}function Kg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function J0({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function B4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return J0(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z4(t,e={}){return xi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,W4=/^https?/;async function q4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await z4(t);for(const n of e)try{if(K4(n))return}catch{}hs(t,"unauthorized-domain")}function K4(t){const e=kd(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!W4.test(n))return!1;if(H4.test(t))return s===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4=new Jo(3e4,6e4);function Gg(){const t=jn().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Q4(t){return new Promise((e,n)=>{function s(){Gg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Gg(),n(Un(t,"network-request-failed"))},timeout:G4.get()})}if(jn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(jn().gapi?.load)s();else{const i=YO("iframefcb");return jn()[i]=()=>{gapi.load?s():n(Un(t,"network-request-failed"))},GO(`${QO()}?onload=${i}`).catch(r=>n(r))}}).catch(e=>{throw Ja=null,e})}let Ja=null;function Y4(t){return Ja=Ja||Q4(t),Ja}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=new Jo(5e3,15e3),X4="__/auth/iframe",Z4="emulator/auth/iframe",eV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nV(t){const e=t.config;Ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?nf(e,Z4):`https://${t.config.authDomain}/${X4}`,s={apiKey:e.apiKey,appName:t.name,v:Ar},i=tV.get(t.config.apiHost);i&&(s.eid=i);const r=t._getFrameworks();return r.length&&(s.fw=r.join(",")),`${n}?${zo(s).slice(1)}`}async function sV(t){const e=await Y4(t),n=jn().gapi;return Ce(n,t,"internal-error"),e.open({where:document.body,url:nV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eV,dontclear:!0},s=>new Promise(async(i,r)=>{await s.restyle({setHideOnLeave:!1});const o=Un(t,"network-request-failed"),a=jn().setTimeout(()=>{r(o)},J4.get());function c(){jn().clearTimeout(a),i(s)}s.ping(c).then(c,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rV=500,oV=600,aV="_blank",lV="http://localhost";class Qg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cV(t,e,n,s=rV,i=oV){const r=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const c={...iV,width:s.toString(),height:i.toString(),top:r,left:o},u=Wt().toLowerCase();n&&(a=P0(u)?aV:n),C0(u)&&(e=e||lV,c.scrollbars="yes");const d=Object.entries(c).reduce((p,[y,_])=>`${p}${y}=${_},`,"");if(UO(u)&&a!=="_self")return uV(e||"",a),new Qg(null);const h=window.open(e||"",a,d);Ce(h,t,"popup-blocked");try{h.focus()}catch{}return new Qg(h)}function uV(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV="__/auth/handler",hV="emulator/auth/handler",fV=encodeURIComponent("fac");async function Yg(t,e,n,s,i,r){Ce(t.config.authDomain,t,"auth-domain-config-required"),Ce(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Ar,eventId:i};if(e instanceof $0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",XP(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof Xo){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const c=await t._getAppCheckToken(),u=c?`#${fV}=${encodeURIComponent(c)}`:"";return`${pV(t)}?${zo(a).slice(1)}${u}`}function pV({config:t}){return t.emulator?nf(t,hV):`https://${t.authDomain}/${dV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u="webStorageSupport";class mV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=W0,this._completeRedirectFn=$4,this._overrideRedirectResult=V4}async _openPopup(e,n,s,i){fs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const r=await Yg(e,n,s,kd(),i);return cV(e,r,af())}async _openRedirect(e,n,s,i){await this._originValidation(e);const r=await Yg(e,n,s,kd(),i);return v4(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:r}=this.eventManagers[n];return i?Promise.resolve(i):(fs(r,"If manager is not set, promise should be"),r)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await sV(e),s=new j4(e);return n.register("authEvent",i=>(Ce(i?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(_u,{type:_u},i=>{const r=i?.[0]?.[_u];r!==void 0&&n(!!r),hs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=q4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return O0()||R0()||rf()}}const gV=mV;var Jg="@firebase/auth",Xg="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _V(t){pr(new ki("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;Ce(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:V0(t)},u=new qO(s,i,r,c);return XO(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),pr(new ki("auth-internal",e=>{const n=Tc(e.getProvider("auth").getImmediate());return(s=>new yV(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fs(Jg,Xg,vV(t)),Fs(Jg,Xg,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV=300,bV=M_("authIdTokenMaxAge")||wV;let Zg=null;const TV=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>bV)return;const i=n?.token;Zg!==i&&(Zg=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function IV(t=F_()){const e=gh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=JO(t,{popupRedirectResolver:gV,persistence:[S4,m4,W0]}),s=M_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(s,location.origin);if(location.origin===r.origin){const o=TV(r.toString());d4(n,o,()=>o(n.currentUser)),u4(n,a=>o(a))}}const i=P_("auth");return i&&ZO(n,`http://${i}`),n}function EV(){return document.getElementsByTagName("head")?.[0]??document}KO({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=i=>{const r=Un("internal-error");r.customData=i,n(r)},s.type="text/javascript",s.charset="UTF-8",EV().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_V("Browser");var kV="firebase",AV="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fs(kV,AV,"app");const SV={apiKey:"AIzaSyA2rWTDIF2Y9xfT-BH5SsQ6sjTJ-LNNE-E",authDomain:"webintosh-chat.firebaseapp.com",projectId:"webintosh-chat",storageBucket:"webintosh-chat.firebasestorage.app",messagingSenderId:"921735878847",appId:"1:921735878847:web:faebe9d4a8b53ef0a44e0a",measurementId:"G-3C2N0XP48K"},X0=L_(SV),wt=lO(X0),kc=IV(X0),CV=[{id:"general",name:"general",description:"General discussion"},{id:"design",name:"design",description:"Design and UI/UX"},{id:"gaming",name:"gaming",description:"Gaming chat"},{id:"music",name:"music",description:"Music and audio"},{id:"random",name:"random",description:"Random topics"},{id:"tech",name:"tech",description:"Technology discussion"}],RV=["😊","😂","❤️","👍","😎","🤔","😭","🎉","🔥","💯"],Bi=t=>t?t.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"?",Z0=t=>{if(!t)return"";const e=t.toDate(),s=new Date().getTime()-e.getTime(),i=Math.floor(s/6e4);return i<1?"just now":i<60?`${i}m ago`:i<1440?`${Math.floor(i/60)}h ago`:e.toLocaleDateString()},ey=t=>t?Z0(t):"offline",ty=()=>{try{const t=window.AudioContext||window.webkitAudioContext;if(!t){console.warn("Web Audio API not supported");return}const e=new t;e.state==="suspended"&&e.resume();const n=e.createOscillator(),s=e.createGain();n.connect(s),s.connect(e.destination),n.frequency.setValueAtTime(600,e.currentTime),n.frequency.setValueAtTime(800,e.currentTime+.05),n.type="sine",s.gain.setValueAtTime(0,e.currentTime),s.gain.linearRampToValueAtTime(.2,e.currentTime+.01),s.gain.linearRampToValueAtTime(.15,e.currentTime+.05),s.gain.linearRampToValueAtTime(0,e.currentTime+.15),n.start(e.currentTime),n.stop(e.currentTime+.15),setTimeout(()=>{e.close()},200)}catch(t){console.error("Failed to play message sound:",t)}},PV=async t=>{const e=await i4(kc);return await c4(e.user,{displayName:t.trim()}),await g0(Ln(wt,"users",e.user.uid),{displayName:t.trim(),lastSeen:zn(),online:!0}),e.user},xV=async t=>{await Do(Ln(wt,"users",t),{online:!1,lastSeen:zn()}),await h4(kc)},ny=async(t,e,n,s="message")=>{const i={text:n.trim(),userId:t.uid,userName:t.displayName||"Anonymous",timestamp:zn(),channelId:e,type:s};console.log("Sending channel message:",i);try{const r=await y0(Dn(wt,"messages"),i);console.log("Message sent with ID:",r.id)}catch(r){throw console.error("Error sending message:",r),r}},sy=async(t,e,n,s="message")=>{await y0(Dn(wt,"messages"),{text:n.trim(),userId:t.uid,userName:t.displayName||"Anonymous",timestamp:zn(),conversationId:e,type:s}),await Do(Ln(wt,"directMessages",e),{lastMessage:n.trim(),lastMessageTime:zn()})},MV=async(t,e)=>{const n=[t.uid,e.uid].sort().join("_"),s=Ln(wt,"directMessages",n);return await g0(s,{participants:[t.uid,e.uid],participantNames:{[t.uid]:t.displayName,[e.uid]:e.displayName},createdAt:zn(),lastMessage:null,lastMessageTime:zn()},{merge:!0}),n},DV=async t=>{await Do(Ln(wt,"users",t),{lastSeen:zn(),online:!0})},zi=te([]),Qr=te([]),NV=3,cf=()=>{const t=c=>{const u={id:`notif-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,duration:5e3,sound:!0,type:"info",...c};return Qr.value.push(u),e(),u.sound&&i(u.type),u.duration&&u.duration>0&&setTimeout(()=>{n(u.id)},u.duration),u.id},e=()=>{for(;Qr.value.length>0&&zi.value.length<NV;){const c=Qr.value.shift();c&&zi.value.push(c)}},n=c=>{const u=zi.value.findIndex(d=>d.id===c);u!==-1&&(zi.value.splice(u,1),e())},s=()=>{zi.value=[],Qr.value=[]},i=c=>{let u="";switch(c){case"message":u="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZijYIG2m98OScTgwOUqzn4";break;case"error":u="data:audio/wav;base64,UklGRi4CAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQoCAADw/wAA8P8AAPD/AADw/wAA8P8AAPD/AADw/wAA8P8AAPD/AADw/wAA";break;default:u="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQg8AAIQ+AAACABAAZGF0YQoGAADa2trd3d3g4ODj4+Pm5ubo6Ojq6urr6+vs7Ozs7Ozr6+vq6uro6Ojm5ubj4+Pg4ODd3d3a2tra2tra2tra2tra2tra2tra2tra2tra";break}if(u){const d=new Audio(u);d.volume=.4,d.play().catch(()=>{})}},r=(c,u,d="info")=>t({title:c,message:u,type:d}),o=(c,u,d,h="yahooMessenger")=>{const p=d?`${c} in #${d}`:c;return t({title:p,message:u,type:"message",icon:"/icons/apps/yahooMessenger.png",duration:4e3,appId:h})},a=()=>(console.log("[Notifications] Testing notification system..."),t({title:"Test Notification",message:"This is a test. If you see this, notifications are working!",type:"info",duration:5e3}));return{notifications:_o(zi),notificationQueue:_o(Qr),showNotification:t,dismissNotification:n,clearAllNotifications:s,notify:r,notifyMessage:o,testNotification:a}},Ts=te(null),xa=new Set,iy=new Map;let Yr=null;const wu=te(!1);let ry=!1;const eb=()=>{const{notifyMessage:t}=cf(),e=o=>{console.log("[GlobalChat] App open state changed:",o),wu.value=o,o&&xa.clear()},n=()=>{ry||(ry=!0,console.log("[GlobalChat] Initializing global listeners"),j0(kc,o=>{console.log("[GlobalChat] Auth state changed:",o?.displayName||"null"),Ts.value=o,o?setTimeout(()=>{s(),i()},2e3):r()}))},s=()=>{console.log("[GlobalChat] Skipping channel listeners - notifications disabled for channels")},i=()=>{if(!Ts.value||Yr)return;console.log("[GlobalChat] Starting DM listeners for user:",Ts.value.displayName);const o=Date.now(),a=Cs(Dn(wt,"directMessages"),Rs("participants","array-contains",Ts.value.uid));Yr=fi(a,c=>{c.docs.forEach(u=>{const d=u.id,h=Cs(Dn(wt,"messages"),Rs("conversationId","==",d),qa(50));fi(h,p=>{Ts.value&&p.docChanges().forEach(y=>{if(y.type==="added"){const _={id:y.doc.id,...y.doc.data()};if(xa.has(_.id))return;xa.add(_.id);const I=_.timestamp?.toMillis()||0,k=I>o&&Date.now()-I<1e4;console.log("[GlobalChat] DM detected:",{from:_.userName,isAppOpen:wu.value,isFromSelf:_.userId===Ts.value.uid,isNewMessage:k,messageAge:I?`${(Date.now()-I)/1e3}s ago`:"no timestamp"}),!wu.value&&_.userId!==Ts.value.uid&&k&&(console.log("[GlobalChat] 🔔 Showing DM notification from:",_.userName,":",_.text),t(_.userName,_.text,void 0,"yahooMessenger"))}})})})})},r=()=>{iy.forEach(o=>o()),iy.clear(),Yr&&(Yr(),Yr=null),xa.clear()};return _n(()=>{r()}),{initializeGlobalListeners:n,setAppOpen:e,stopAllListeners:r,currentUser:_o(Ts)}},OV=async t=>{try{const e=Cs(Dn(wt,"messages"),Rs("channelId","==",t)),n=await bO(e),s=n.docs.map(i=>TO(Ln(wt,"messages",i.id)));return await Promise.all(s),console.log(`✅ Cleared ${n.size} messages from channel: ${t}`),n.size}catch(e){throw console.error("Error clearing channel:",e),e}},VV={class:"yahoo-messenger"},LV={key:0,class:"login-screen"},FV={class:"login-box"},$V=["disabled"],UV={key:1,class:"chat-interface"},jV={class:"sidebar"},BV={class:"user-info"},zV={class:"user-details"},HV={class:"username"},WV={class:"chat-mode-toggle"},qV={key:0,class:"channels-list"},KV=["onClick"],GV={class:"channel-name"},QV={key:0,class:"unread-badge"},YV={key:1,class:"direct-messages-list"},JV={class:"section-header"},XV=["onClick"],ZV={class:"dm-info"},e6={class:"dm-name"},t6={class:"online-users"},n6={class:"section-header"},s6={class:"user-name"},i6={class:"chat-area"},r6={class:"chat-header"},o6={class:"chat-title"},a6={class:"chat-description"},l6={class:"chat-title"},c6={key:2,class:"chat-title"},u6={key:0,class:"no-selection"},d6={key:1,class:"loading"},h6={key:2},f6={class:"message-content"},p6={class:"message-header"},m6={class:"message-author"},g6={class:"message-time"},y6={key:0,class:"message-input-container"},v6={class:"emoticons"},_6=["onClick"],w6={class:"input-row"},b6=["placeholder"],T6=["disabled"],I6={class:"user-list"},E6=["onClick"],k6=ct({__name:"index",setup(t){const e=te(null),n=te(""),s=te("channels"),i=te(null),r=te(null),o=te(""),a=te([]),c=te([]),u=te([]),d=te(!1),h=te(!1),p=te(),y=CV,_=te({}),I=te({}),{notifyMessage:k}=cf(),{setAppOpen:N}=eb(),L=new Set;let R=null,C=null,P=null,O=null;const b=xe(()=>c.value.filter(F=>F.uid!==e.value?.uid&&!u.value.some(B=>B.otherUserId===F.uid))),w=async()=>{if(n.value.trim())try{await PV(n.value),He()}catch(F){console.error("Login error:",F);let B="Failed to sign in. ";F.code==="permission-denied"?B+="Firebase permissions error. Please check Firestore rules.":F.code==="unavailable"?B+="Firebase is unavailable. Check your internet connection.":B+=F.message||"Please try again.",alert(B)}},T=async()=>{e.value&&(await xV(e.value.uid),je())},A=F=>{i.value=F,r.value=null,_.value[F.id]=0,I.value[F.id]=Date.now(),S(F.id)},D=F=>{r.value=F,i.value=null,ve(F.id)},x=async F=>{if(!e.value)return;const B=await MV(e.value,F),K={id:B,otherUser:F.displayName,otherUserId:F.uid,online:!0};u.value.push(K),r.value=K,i.value=null,h.value=!1,ve(B)},S=F=>{R&&R(),d.value=!0;const B=Cs(Dn(wt,"messages"),Rs("channelId","==",F),qa(100));R=fi(B,K=>{console.log(`Received ${K.docs.length} messages for channel ${F}`);const ue=K.docs.map(Te=>{const $e=Te.data();return console.log("Message data:",$e),{id:Te.id,...$e}});ue.sort((Te,$e)=>{const M=Te.timestamp?.toMillis()||0,V=$e.timestamp?.toMillis()||0;return M-V}),!d.value&&e.value&&ue.forEach(Te=>{if(!L.has(Te.id)&&Te.userId!==e.value.uid){if(i.value?.id!==F){_.value[F]||(_.value[F]=0);const $e=Te.timestamp?.toMillis()||Date.now(),M=I.value[F]||0;$e>M&&_.value[F]++}L.add(Te.id)}}),ue.forEach(Te=>L.add(Te.id)),a.value=ue,d.value=!1,Me()},K=>{console.error("Error loading channel messages:",K),d.value=!1,K.code==="permission-denied"?alert("Permission denied. Please check Firebase security rules."):K.code==="failed-precondition"&&alert("Firebase index required. Check console for index creation link.")})},ve=F=>{R&&R(),d.value=!0;const B=Cs(Dn(wt,"messages"),Rs("conversationId","==",F),qa(100));R=fi(B,K=>{const ue=K.docs.map(Te=>({id:Te.id,...Te.data()}));ue.sort((Te,$e)=>{const M=Te.timestamp?.toMillis()||0,V=$e.timestamp?.toMillis()||0;return M-V}),!d.value&&e.value&&ue.forEach(Te=>{!L.has(Te.id)&&Te.userId!==e.value.uid&&(k(Te.userName,Te.text,void 0,"yahooMessenger"),L.add(Te.id))}),ue.forEach(Te=>L.add(Te.id)),a.value=ue,d.value=!1,Me()},K=>{console.error("Error loading direct messages:",K),d.value=!1})},Se=async()=>{if(!o.value.trim()||!e.value)return;const F=o.value.trim();o.value="";try{i.value?(console.log("Sending to channel:",i.value.id),await ny(e.value,i.value.id,F)):r.value&&(console.log("Sending DM to:",r.value.id),await sy(e.value,r.value.id,F)),ty()}catch(B){console.error("Failed to send message:",B),alert("Failed to send message. Check console for details."),o.value=F}},re=async()=>{if(!e.value)return;const F="🐝 BUZZ! 🐝";i.value?await ny(e.value,i.value.id,F,"buzz"):r.value&&await sy(e.value,r.value.id,F,"buzz"),ty();const B=document.querySelector(".chat-area");B&&(B.classList.add("buzz-shake"),setTimeout(()=>{B.classList.remove("buzz-shake")},500))},fe=F=>{o.value+=F},le=F=>{if(!F)return"#ffd700";const B=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FECA57","#48C9B0","#FD79A8","#A29BFE","#6C5CE7","#00B894","#FDCB6E","#E17055","#74B9FF","#A8E6CF","#FFB6B9","#95E1D3"];let K=0;for(let Te=0;Te<F.length;Te++)K=F.charCodeAt(Te)+((K<<5)-K);const ue=Math.abs(K)%B.length;return B[ue]},Le=async()=>{if(i.value&&confirm(`Clear all messages in #${i.value.name}?`))try{const F=await OV(i.value.id);a.value=[],alert(`Cleared ${F} messages from #${i.value.name}`)}catch(F){console.error("Failed to clear channel:",F),alert("Failed to clear messages. Check console for details.")}},St=()=>{const F=Cs(Dn(wt,"users"),Rs("online","==",!0));C=fi(F,B=>{c.value=B.docs.map(K=>({uid:K.id,...K.data()})).filter(K=>K.uid!==e.value?.uid)})},Et=async()=>{if(!e.value)return;const F=Cs(Dn(wt,"directMessages"),Rs("participants","array-contains",e.value.uid));P=fi(F,async B=>{const K=[];for(const ue of B.docs){const Te=ue.data(),$e=Te.participants.find(Z=>Z!==e.value.uid),M=Te.participantNames[$e],j=(await wO(Ln(wt,"users",$e))).data();K.push({id:ue.id,otherUser:M,otherUserId:$e,lastMessage:Te.lastMessage,lastSeen:j?.lastSeen,online:j?.online||!1})}u.value=K})},He=()=>{e.value&&(O=A_(async()=>{e.value&&await DV(e.value.uid)},3e4))},je=()=>{R&&R(),C&&C(),P&&P(),O&&clearInterval(O)},Me=()=>{as(()=>{p.value&&(p.value.scrollTop=p.value.scrollHeight)})},ce=()=>{y.forEach(F=>{if(i.value?.id===F.id)return;const B=Cs(Dn(wt,"messages"),Rs("channelId","==",F.id),qa(50));fi(B,K=>{if(!e.value)return;const ue=K.docs.map(M=>({id:M.id,...M.data()})),Te=I.value[F.id]||0;let $e=0;ue.forEach(M=>{const V=M.timestamp?.toMillis()||0;M.userId!==e.value.uid&&V>Te&&$e++}),_.value[F.id]=$e})})},W=()=>{const{register:F}=rS();F("yahooMessenger.signOut",()=>{T()}),F("yahooMessenger.newMessage",()=>{h.value=!0}),F("yahooMessenger.joinChannel",()=>{y[0]&&A(y[0])}),F("yahooMessenger.switchChannel",B=>{const K=y.find(ue=>ue.id===B.channel);K&&A(K)}),F("yahooMessenger.showDirectMessages",()=>{s.value="direct"}),F("yahooMessenger.clearChat",()=>{Le()}),F("yahooMessenger.setStatus",B=>{console.log("Set status to:",B.status)}),F("yahooMessenger.sendBuzz",()=>{re()}),F("yahooMessenger.insertEmoticon",B=>{fe(B.emoticon)}),F("yahooMessenger.toggleSounds",()=>{console.log("Toggle sounds")}),F("yahooMessenger.toggleNotifications",()=>{console.log("Toggle notifications")}),F("yahooMessenger.toggleSidebar",()=>{console.log("Toggle sidebar")}),F("yahooMessenger.toggleOnlineUsers",()=>{console.log("Toggle online users")}),F("yahooMessenger.showAbout",()=>{console.log("Show about")})};return nn(()=>{W(),as(()=>{N(!0)}),j0(kc,F=>{e.value=F,F&&(St(),Et(),ce(),y[0]&&A(y[0]))})}),_n(()=>{N(!1),je(),e.value&&Do(Ln(wt,"users",e.value.uid),{online:!1,lastSeen:zn()}).catch(()=>{})}),an(()=>e.value,async(F,B)=>{B&&!F&&await Do(Ln(wt,"users",B.uid),{online:!1,lastSeen:zn()}).catch(()=>{})}),(F,B)=>($(),z("div",VV,[e.value?($(),z("div",UV,[v("div",jV,[v("div",BV,[v("div",{class:"user-avatar",style:nt({background:le(e.value.displayName||"")})},X(we(Bi)(e.value.displayName||"")),5),v("div",zV,[v("div",HV,X(e.value.displayName),1),B[11]||(B[11]=v("div",{class:"status-indicator online"},"Online",-1))]),v("button",{onClick:T,class:"logout-btn",title:"Sign Out"},B[12]||(B[12]=[v("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[v("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),v("polyline",{points:"16 17 21 12 16 7"}),v("line",{x1:"21",y1:"12",x2:"9",y2:"12"})],-1)]))]),v("div",WV,[v("button",{onClick:B[1]||(B[1]=K=>s.value="channels"),class:Ee({active:s.value==="channels"})}," Channels ",2),v("button",{onClick:B[2]||(B[2]=K=>s.value="direct"),class:Ee({active:s.value==="direct"})}," Direct Messages ",2)]),s.value==="channels"?($(),z("div",qV,[B[14]||(B[14]=v("div",{class:"section-header"},"CHANNELS",-1)),($(!0),z(ye,null,Ve(we(y),K=>($(),z("div",{key:K.id,onClick:ue=>A(K),class:Ee(["channel-item",{active:i.value?.id===K.id}])},[B[13]||(B[13]=v("span",{class:"channel-icon"},"#",-1)),v("span",GV,X(K.name),1),(_.value[K.id]??0)>0?($(),z("span",QV,X(_.value[K.id]),1)):Qe("",!0)],10,KV))),128))])):($(),z("div",YV,[v("div",JV,[B[15]||(B[15]=pi(" DIRECT MESSAGES ",-1)),v("button",{onClick:B[3]||(B[3]=K=>h.value=!0),class:"add-dm-btn"},"+")]),($(!0),z(ye,null,Ve(u.value,K=>($(),z("div",{key:K.id,onClick:ue=>D(K),class:Ee(["dm-item",{active:r.value?.id===K.id}])},[v("div",{class:"dm-avatar",style:nt({background:le(K.otherUser)})},X(we(Bi)(K.otherUser)),5),v("div",ZV,[v("div",e6,X(K.otherUser),1),v("div",{class:Ee(["dm-status",{online:K.online}])},X(K.online?"Online":we(ey)(K.lastSeen||null)),3)])],10,XV))),128))])),v("div",t6,[v("div",n6,"ONLINE NOW ("+X(c.value.length)+")",1),($(!0),z(ye,null,Ve(c.value,K=>($(),z("div",{key:K.uid,class:"online-user"},[v("div",{class:"user-avatar small",style:nt({background:le(K.displayName)})},X(we(Bi)(K.displayName)),5),v("span",s6,X(K.displayName),1)]))),128))])]),v("div",i6,[v("div",r6,[s.value==="channels"&&i.value?($(),z(ye,{key:0},[B[16]||(B[16]=v("span",{class:"channel-icon"},"#",-1)),v("span",o6,X(i.value.name),1),v("span",a6,X(i.value.description),1)],64)):s.value==="direct"&&r.value?($(),z(ye,{key:1},[v("div",{class:"dm-header-avatar",style:nt({background:le(r.value.otherUser)})},X(we(Bi)(r.value.otherUser)),5),v("span",l6,X(r.value.otherUser),1),v("span",{class:Ee(["chat-status",{online:r.value.online}])},X(r.value.online?"Online":"Last seen "+we(ey)(r.value.lastSeen||null)),3)],64)):($(),z("span",c6,"Select a conversation"))]),v("div",{ref_key:"messagesContainer",ref:p,class:"messages-container"},[!i.value&&!r.value?($(),z("div",u6,B[17]||(B[17]=[v("img",{src:km,alt:"Yahoo Messenger",class:"watermark"},null,-1),v("p",null,"Select a channel or start a direct message",-1)]))):d.value?($(),z("div",d6," Loading messages... ")):($(),z("div",h6,[($(!0),z(ye,null,Ve(a.value,K=>($(),z("div",{key:K.id,class:"message"},[v("div",{class:"message-avatar",style:nt({background:le(K.userName)})},X(we(Bi)(K.userName)),5),v("div",f6,[v("div",p6,[v("span",m6,X(K.userName),1),v("span",g6,X(we(Z0)(K.timestamp)),1)]),v("div",{class:Ee(["message-text",{buzz:K.type==="buzz"}])},X(K.text),3)])]))),128))]))],512),i.value||r.value?($(),z("div",y6,[v("div",v6,[($(!0),z(ye,null,Ve(we(RV),K=>($(),z("button",{key:K,onClick:ue=>fe(K),class:"emoji-btn"},X(K),9,_6))),128))]),v("div",w6,[v("button",{onClick:re,class:"buzz-btn",title:"Send BUZZ!"}," BUZZ! "),Xt(v("input",{"onUpdate:modelValue":B[4]||(B[4]=K=>o.value=K),onKeyup:ul(Se,["enter"]),placeholder:`Message ${s.value==="channels"?"#"+i.value?.name:r.value?.otherUser}`,class:"message-input"},null,40,b6),[[ns,o.value]]),v("button",{onClick:Se,disabled:!o.value.trim(),class:"send-btn"}," Send ",8,T6)])])):Qe("",!0)])])):($(),z("div",LV,[v("div",FV,[B[8]||(B[8]=v("img",{src:km,alt:"Yahoo Messenger",class:"logo"},null,-1)),B[9]||(B[9]=v("h2",null,"Yahoo! Messenger",-1)),B[10]||(B[10]=v("p",null,"Enter your name to join",-1)),Xt(v("input",{"onUpdate:modelValue":B[0]||(B[0]=K=>n.value=K),onKeyup:ul(w,["enter"]),placeholder:"Your name",class:"username-input"},null,544),[[ns,n.value]]),v("button",{onClick:w,disabled:!n.value.trim(),class:"login-btn"}," Sign In ",8,$V)])])),h.value?($(),z("div",{key:2,class:"modal-overlay",onClick:B[7]||(B[7]=K=>h.value=!1)},[v("div",{class:"modal",onClick:B[6]||(B[6]=Ke(()=>{},["stop"]))},[B[18]||(B[18]=v("h3",null,"Start Direct Message",-1)),B[19]||(B[19]=v("p",null,"Select a user to message:",-1)),v("div",I6,[($(!0),z(ye,null,Ve(b.value,K=>($(),z("div",{key:K.uid,onClick:ue=>x(K),class:"user-option"},[v("div",{class:"user-avatar",style:nt({background:le(K.displayName)})},X(we(Bi)(K.displayName)),5),v("span",null,X(K.displayName),1)],8,E6))),128))]),v("button",{onClick:B[5]||(B[5]=K=>h.value=!1),class:"cancel-btn"},"Cancel")])])):Qe("",!0)]))}}),A6=Object.assign(vt(k6,[["__scopeId","data-v-100bb27d"]]),{__name:"AppsYahooMessenger"}),S6={class:"noise-app"},C6={class:"app-header"},R6={class:"master-controls"},P6={class:"slider-group"},x6={class:"slider-value"},M6={class:"app-content"},D6={class:"sounds-section"},N6={class:"sounds-grid"},O6=["onClick"],V6={class:"sound-icon"},L6={class:"sound-name"},F6={class:"sound-controls"},$6={class:"control-row"},U6=["onUpdate:modelValue","onInput","disabled"],j6={class:"slider-value"},B6={class:"presets-section"},z6={class:"preset-buttons"},H6=ct({__name:"index",setup(t){const e=te([{id:"rain",name:"Rain",icon:"🌧️",active:!1,volume:50,audioFile:["/sounds/rain.mp3"]},{id:"waves",name:"Ocean Waves",icon:"🌊",active:!1,volume:50,audioFile:"/sounds/ocean-waves.mp3"},{id:"whale",name:"Whale",icon:"🐳",active:!1,volume:50,audioFile:"/sounds/whale.mp3"},{id:"campfire",name:"Campfire",icon:"🔥",active:!1,volume:50,audioFile:"/sounds/campfire.mp3"},{id:"thunder",name:"Thunderstorm",icon:"⛈️",active:!1,volume:50,audioFile:"/sounds/thunderstorm.mp3"},{id:"birds",name:"Birds",icon:"🐦",active:!1,volume:50,audioFile:"/sounds/birds.mp3"},{id:"forest",name:"Forest",icon:"🌲",active:!1,volume:50,audioFile:"/sounds/forest.mp3"},{id:"city",name:"City Traffic",icon:"🏙️",active:!1,volume:50,audioFile:"/sounds/city-traffic.mp3"},{id:"wind",name:"Wind",icon:"💨",active:!1,volume:50,audioFile:"/sounds/wind.mp3"},{id:"river",name:"River Stream",icon:"🏞️",active:!1,volume:50,audioFile:"/sounds/river.mp3"},{id:"cafe",name:"Cafe Ambience",icon:"☕",active:!1,volume:50,audioFile:"/sounds/cafe.mp3"},{id:"heartbeat",name:"Heartbeat",icon:"❤️",active:!1,volume:50,audioFile:"/sounds/heartbeat.mp3"},{id:"airplane",name:"Airplane Cabin",icon:"✈️",active:!1,volume:50,audioFile:"/sounds/cabin.mp3"},{id:"train",name:"Train Journey",icon:"🚂",active:!1,volume:50,audioFile:"/sounds/train.mp3"},{id:"library",name:"Library",icon:"📚",active:!1,volume:50,audioFile:"/sounds/library.mp3"}]),n=te(50);let s=null,i=null;const r=()=>{s||(s=new(window.AudioContext||window.webkitAudioContext),i=s.createGain(),i.connect(s.destination),i.gain.value=n.value/100)},o=k=>{if(!s)return null;const N=2*s.sampleRate,L=s.createBuffer(1,N,s.sampleRate),R=L.getChannelData(0);if(k==="white")for(let C=0;C<N;C++)R[C]=Math.random()*2-1;else if(k==="pink"){let C=0,P=0,O=0,b=0,w=0,T=0,A=0;for(let D=0;D<N;D++){const x=Math.random()*2-1;C=.99886*C+x*.0555179,P=.99332*P+x*.0750759,O=.969*O+x*.153852,b=.8665*b+x*.3104856,w=.55*w+x*.5329522,T=-.7616*T-x*.016898,R[D]=C+P+O+b+w+T+A+x*.5362,R[D]!==void 0&&(R[D]*=.11),A=x*.115926}}else if(k==="brown"){let C=0;for(let P=0;P<N;P++){const O=Math.random()*2-1;R[P]=(C+.02*O)/1.02,R[P]!==void 0&&(C=R[P],R[P]*=3.5)}}return L},a=async k=>{if(!(!s||!i)){if(k.gainNode=s.createGain(),k.gainNode.gain.value=k.volume/100,k.sources=[],k.audioContextNodes=[],k.audioFile){const N=Array.isArray(k.audioFile)?k.audioFile:[k.audioFile];for(const L of N)try{if((await fetch(L,{method:"HEAD"})).ok){const C=new Audio(L);C.loop=!0,C.crossOrigin="anonymous";const P=s.createMediaElementSource(C);P.connect(k.gainNode),C.play().catch(()=>{console.warn(`Failed to play ${L}`)}),k.sources.push(C),k.audioContextNodes.push(P)}}catch{console.warn(`Audio file not found: ${L}`)}if(k.sources&&k.sources.length>0){k.gainNode.connect(i);return}}k.gainNode.connect(i),c(k)}},c=k=>{if(!(!s||!i||!k.gainNode))switch(k.sources||(k.sources=[]),k.id){case"whitenoise":case"pinknoise":case"brownnoise":{const N=k.id.replace("noise",""),L=o(N);if(L){const R=s.createBufferSource();R.buffer=L,R.loop=!0,R.connect(k.gainNode),R.start(),k.sources.push(R)}break}default:{const N=o("pink");if(N){const L=s.createBufferSource();L.buffer=N,L.loop=!0;const R=s.createBiquadFilter();R.type="bandpass",R.frequency.value=600,R.Q.value=1,L.connect(R),R.connect(k.gainNode),L.start(),k.sources.push(L),k.filterNode=R}break}}},u=k=>{if(k.sources){for(const N of k.sources)N instanceof HTMLAudioElement?(N.pause(),N.currentTime=0):"stop"in N&&N.stop();k.sources=void 0}if(k.audioContextNodes){for(const N of k.audioContextNodes)N.disconnect();k.audioContextNodes=void 0}k.gainNode&&(k.gainNode.disconnect(),k.gainNode=void 0),k.filterNode&&(k.filterNode.disconnect(),k.filterNode=void 0)},d=k=>{r(),k.active=!k.active,k.active?a(k):u(k)},h=k=>{k.gainNode&&(k.gainNode.gain.value=k.volume/100)},p=()=>{i&&(i.gain.value=n.value/100)},y=()=>{e.value.forEach(k=>{k.active&&(k.active=!1,u(k))})},_=k=>{y(),setTimeout(()=>{switch(k){case"focus":I(["whitenoise","rain"],{whitenoise:30,rain:40});break;case"sleep":I(["rain","wind","pinknoise"],{rain:35,wind:25,pinknoise:20});break;case"nature":I(["forest","birds","river"],{forest:50,birds:30,river:40});break;case"city":I(["city","cafe","rain"],{city:60,cafe:40,rain:30});break;case"storm":I(["thunder","rain","wind"],{thunder:70,rain:60,wind:50});break}},100)},I=(k,N)=>{r(),k.forEach(L=>{const R=e.value.find(C=>C.id===L);R&&(R.volume=N[L]||50,R.active=!0,a(R))})};return _n(()=>{y(),s&&(s.close(),s=null)}),(k,N)=>($(),z("div",S6,[v("div",C6,[N[7]||(N[7]=v("h2",{class:"app-title"},"Noise Mixer",-1)),v("div",R6,[N[6]||(N[6]=v("label",{class:"control-label"},"Master Volume",-1)),v("div",P6,[Xt(v("input",{type:"range","onUpdate:modelValue":N[0]||(N[0]=L=>n.value=L),onInput:p,min:"0",max:"100",class:"slider"},null,544),[[ns,n.value]]),v("span",x6,X(n.value)+"%",1)])])]),v("div",M6,[v("div",D6,[v("div",N6,[($(!0),z(ye,null,Ve(e.value,L=>($(),z("div",{key:L.id,class:Ee(["sound-card",{active:L.active}])},[v("button",{onClick:R=>d(L),class:"sound-toggle"},[v("span",V6,X(L.icon),1),v("span",L6,X(L.name),1)],8,O6),v("div",F6,[v("div",$6,[N[8]||(N[8]=v("label",{class:"control-label"},"Volume",-1)),Xt(v("input",{type:"range","onUpdate:modelValue":R=>L.volume=R,onInput:R=>h(L),min:"0",max:"100",class:"slider",disabled:!L.active},null,40,U6),[[ns,L.volume]]),v("span",j6,X(L.volume)+"%",1)])])],2))),128))])]),v("div",B6,[N[15]||(N[15]=v("h3",{class:"section-title"},"Presets",-1)),v("div",z6,[v("button",{onClick:N[1]||(N[1]=L=>_("focus")),class:"preset-button"},N[9]||(N[9]=[v("span",{class:"preset-icon"},"🎯",-1),v("span",null,"Focus",-1)])),v("button",{onClick:N[2]||(N[2]=L=>_("sleep")),class:"preset-button"},N[10]||(N[10]=[v("span",{class:"preset-icon"},"😴",-1),v("span",null,"Sleep",-1)])),v("button",{onClick:N[3]||(N[3]=L=>_("nature")),class:"preset-button"},N[11]||(N[11]=[v("span",{class:"preset-icon"},"🌳",-1),v("span",null,"Nature",-1)])),v("button",{onClick:N[4]||(N[4]=L=>_("city")),class:"preset-button"},N[12]||(N[12]=[v("span",{class:"preset-icon"},"🏙️",-1),v("span",null,"City Life",-1)])),v("button",{onClick:N[5]||(N[5]=L=>_("storm")),class:"preset-button"},N[13]||(N[13]=[v("span",{class:"preset-icon"},"⛈️",-1),v("span",null,"Stormy Night",-1)])),v("button",{onClick:y,class:"preset-button stop-button"},N[14]||(N[14]=[v("span",{class:"preset-icon"},"⏹️",-1),v("span",null,"Stop All",-1)]))])])])]))}}),W6=Object.assign(vt(H6,[["__scopeId","data-v-3c12dd33"]]),{__name:"AppsWhiteNoise"}),q6={class:"os-window-controls"},K6=["disabled"],G6={class:"os-window-title"},Q6={class:"os-window-content"},Y6={key:1},J6=ct({name:"OsWindow",__name:"Window",props:{win:{}},setup(t){const e=t,n=rt();Gd("window",e.win);const s=xe(()=>({position:"absolute",left:e.win.rect.x+"px",top:e.win.rect.y-n.menuBarHeight+"px",width:e.win.rect.width+"px",height:e.win.rect.height+"px",zIndex:e.win.zIndex})),i=xe(()=>n.focusedId===e.win.id);function r(d){n.closeMenu(),n.startDrag(e.win.id,d.clientX,d.clientY)}function o(d,h){n.closeMenu(),n.startResize(e.win.id,d,h.clientX,h.clientY)}function a(){e.win.maximizable!==!1&&n.toggleMaximize(e.win.id)}function c(){e.win.maximizable!==!1&&n.toggleMaximize(e.win.id)}function u(){n.closeMenu(),n.bringToFront(e.win.id)}return(d,h)=>{const p=cC,y=wC,_=FC,I=hR,k=o2,N=q2,L=AP,R=A6,C=W6;return $(),z("div",{class:Ee(["os-window",{active:i.value,inactive:!i.value}]),style:nt(s.value),onMousedown:Ke(u,["stop"])},[v("div",{class:"os-window-header",onMousedown:Ke(r,["stop"]),onDblclick:Ke(a,["stop"])},[v("div",q6,[d.win.closable?($(),z("button",{key:0,class:"os-window-control close",onClick:h[0]||(h[0]=Ke(P=>we(n).closeWindow(d.win.id),["stop"])),"aria-label":"Close"})):Qe("",!0),d.win.minimizable!==!1?($(),z("button",{key:1,class:"os-window-control minimize",onClick:h[1]||(h[1]=Ke(P=>we(n).toggleMinimize(d.win.id),["stop"])),"aria-label":"Minimize"})):Qe("",!0),d.win.resizable!==!1?($(),z("button",{key:2,class:Ee(["os-window-control maximize",{disabled:d.win.maximizable===!1}]),onClick:Ke(c,["stop"]),"aria-label":"Maximize",disabled:d.win.maximizable===!1},null,10,K6)):Qe("",!0)]),v("div",G6,X(d.win.title),1)],32),v("div",{class:"resize-handle handle-n",onMousedown:h[2]||(h[2]=Ke(P=>o("n",P),["stop"]))},null,32),v("div",{class:"resize-handle handle-s",onMousedown:h[3]||(h[3]=Ke(P=>o("s",P),["stop"]))},null,32),v("div",{class:"resize-handle handle-e",onMousedown:h[4]||(h[4]=Ke(P=>o("e",P),["stop"]))},null,32),v("div",{class:"resize-handle handle-w",onMousedown:h[5]||(h[5]=Ke(P=>o("w",P),["stop"]))},null,32),v("div",{class:"resize-handle handle-ne",onMousedown:h[6]||(h[6]=Ke(P=>o("ne",P),["stop"]))},null,32),v("div",{class:"resize-handle handle-nw",onMousedown:h[7]||(h[7]=Ke(P=>o("nw",P),["stop"]))},null,32),v("div",{class:"resize-handle handle-se",onMousedown:h[8]||(h[8]=Ke(P=>o("se",P),["stop"]))},null,32),v("div",{class:"resize-handle handle-sw",onMousedown:h[9]||(h[9]=Ke(P=>o("sw",P),["stop"]))},null,32),v("div",Q6,[NT(d.$slots,"default",{},()=>[d.win.kind==="app"||d.win.kind==="system"?($(),z(ye,{key:0},[d.win.appId==="finder"?($(),Ze(p,{key:0})):d.win.appId==="textedit"?($(),Ze(y,{key:1,"window-id":d.win.id},null,8,["window-id"])):d.win.appId==="shortcuts"?($(),Ze(_,{key:2})):d.win.appId==="about"?($(),Ze(I,{key:3})):d.win.appId==="settings"?($(),Ze(k,{key:4})):d.win.appId==="typingtest"?($(),Ze(N,{key:5})):d.win.appId==="keystation"?($(),Ze(L,{key:6})):d.win.appId==="yahoomessenger"?($(),Ze(R,{key:7})):d.win.appId==="whitenoise"?($(),Ze(C,{key:8})):Qe("",!0)],64)):($(),z("p",Y6,"This is a window body (id: "+X(d.win.id)+")",1))])])],38)}}}),X6=Object.assign(vt(J6,[["__scopeId","data-v-1a813f9b"]]),{__name:"OsWindow"}),Z6={class:"wm-root"},eL={class:"debug"},tL=ct({name:"OsWindowManager",__name:"WindowManager",setup(t){const e=rt(),{isModifierPressed:n}=k_();function s(u){e.resizeTo(u.clientX,u.clientY),e.dragTo(u.clientX,u.clientY)}function i(){e.endDrag()}let r;function o(){r&&window.clearTimeout(r),r=window.setTimeout(()=>{e.realignAllToBounds()},100)}function a(){const u=e.orderedWindows;if(u.length===0)return;const d=e.focusedId??null,h=d!=null?u.findIndex(y=>y.id===d):-1,p=u[(h+1)%u.length];p&&e.bringToFront(p.id)}function c(u){if(u.key==="Escape"){e.endDrag(),e.closeMenu(),u.preventDefault();return}if(n(u))switch(u.key.toLowerCase()){case"n":{const p=e.focused?.appId??null;p==="textedit"?xn("app.newDocument",{appId:p}):p?xn("app.newWindow",{appId:p}):xn("os.openWindow"),u.preventDefault();return}case"w":{xn("os.closeFocused"),u.preventDefault();return}case"m":{xn("os.minimizeFocused"),u.preventDefault();return}case"z":{xn("view.toggleZoom"),u.preventDefault();return}case"/":{xn("system.showShortcuts"),u.preventDefault();return}case"`":{a(),u.preventDefault();return}}if(u.metaKey||u.ctrlKey)switch(u.key.toLowerCase()){case"m":{const h=e.focused;h&&e.toggleMinimize(h.id),u.preventDefault();break}case"w":{const h=e.focused;h&&e.closeWindow(h.id),u.preventDefault();break}case"`":{a(),u.preventDefault();break}}}return nn(()=>{td(),window.addEventListener("mousemove",s),window.addEventListener("mouseup",i),window.addEventListener("keydown",c),window.addEventListener("resize",o)}),_n(()=>{window.removeEventListener("mousemove",s),window.removeEventListener("mouseup",i),window.removeEventListener("keydown",c),window.removeEventListener("resize",o)}),(u,d)=>($(),z("div",Z6,[v("div",eL,"Windows: "+X(we(e).windows.length),1),($(!0),z(ye,null,Ve(we(e).orderedWindows,h=>($(),Ze(X6,{key:h.id,win:h},null,8,["win"]))),128))]))}}),nL=Object.assign(vt(tL,[["__scopeId","data-v-2cd040b4"]]),{__name:"OsWindowManager"}),sL={class:"dock-item"},iL=["title"],rL=["src","alt"],oL={key:1,class:"dock-icon-emoji","aria-hidden":"true"},aL={key:2,class:"count-badge","aria-hidden":"true"},lL={class:"sr-only"},cL=ct({name:"OsDockItem",__name:"DockItem",props:{id:{},title:{},icon:{},emoji:{},running:{type:Boolean,default:!1},minimized:{type:Boolean,default:!1},minimizedCount:{default:0}},emits:["launch","context","drag-start","drag-over","drop"],setup(t){const e=te(!1),n=xe(()=>Ss(t.icon));return(s,i)=>($(),z("li",sL,[v("button",{class:"dock-button",onClick:i[1]||(i[1]=r=>s.$emit("launch")),onContextmenu:i[2]||(i[2]=Ke(r=>s.$emit("context",r),["prevent"])),title:s.title,"aria-haspopup":"true",draggable:"true",onDragstart:i[3]||(i[3]=r=>s.$emit("drag-start",{id:s.id,ev:r})),onDragover:i[4]||(i[4]=Ke(r=>s.$emit("drag-over",{id:s.id,ev:r}),["prevent"])),onDrop:i[5]||(i[5]=Ke(r=>s.$emit("drop",{id:s.id,ev:r}),["prevent"]))},[n.value&&!e.value?($(),z("img",{key:0,src:n.value,alt:s.title,class:"dock-icon-svg","aria-hidden":"true",onError:i[0]||(i[0]=r=>e.value=!0)},null,40,rL)):($(),z("span",oL,X(s.emoji||"🗂️"),1)),s.minimizedCount&&s.minimizedCount>1?($(),z("span",aL,X(s.minimizedCount),1)):Qe("",!0),s.running?($(),z("span",{key:3,class:Ee(["running-dot",{hidden:s.minimized}]),"aria-hidden":"true"},null,2)):Qe("",!0),v("span",lL,X(s.title),1)],40,iL)]))}}),uL=Object.assign(vt(cL,[["__scopeId","data-v-80346c13"]]),{__name:"OsDockItem"}),dL={class:"os-dock","aria-label":"Dock"},hL=ct({name:"OsDock",__name:"Dock",setup(t){const e=_t(),n=rt(),s=xe(()=>{const h=new Map;for(const _ of n.windows){if(!_.appId||!_.minimized)continue;const I=h.get(_.appId)??{count:0};I.count++,h.set(_.appId,I)}const p=Array.from(h.keys());return(typeof e.orderMinimizedAppIds=="function"?e.orderMinimizedAppIds(p):p).map(_=>{const I=e.registry[_],k=h.get(_)?.count??0;return I?{id:_,title:I.title,icon:I.icon,emoji:I.emoji??"🗂️",minimizedCount:k}:null}).filter(_=>_!==null)});function i(h){const y=n.windows.filter(_=>_.appId===h&&_.minimized).sort((_,I)=>I.zIndex-_.zIndex)[0];y&&n.restoreWindow(y.id)}function r(h,p){const y=n.windows.filter(w=>w.appId===h&&w.minimized).map(w=>({id:w.id,title:w.title})),_=e.registry[h]?.title,I=IS(h,y,_),k=p?.clientX??Math.round(window.innerWidth/2),N=p?.clientY??Math.round(window.innerHeight/2),L=240,R=240,C=Math.max(8,window.innerWidth-L-8),P=Math.min(k,C),b=window.innerHeight-N<R+20?Math.max(8,N-R):N;n.openContext(P,b,I)}const o=te(null);function a(h){o.value=h.id;const p=h.ev.dataTransfer;p&&(p.setData("text/plain",h.id),p.effectAllowed="move",p.dropEffect="move")}function c(h){const p=h.ev.dataTransfer;p&&(p.dropEffect="move")}function u(h){const p=o.value,y=h.id;p&&e.moveInMinOrder(p,y??null),o.value=null}function d(h){const y=h.dataTransfer?.getData("text/plain")||"";y&&typeof y=="string"&&e.moveInMinOrder(y,null),o.value=null}return(h,p)=>{const y=uL;return $(),z("nav",dL,[v("ul",{class:"dock-list",onDragover:p[0]||(p[0]=Ke(()=>{},["prevent"])),onDrop:Ke(d,["prevent"])},[($(!0),z(ye,null,Ve(s.value,_=>($(),Ze(y,{key:_.id,id:_.id,title:_.title,icon:_.icon,emoji:_.emoji,"minimized-count":_.minimizedCount,onLaunch:I=>i(_.id),onContext:I=>r(_.id,I),onDragStart:a,onDragOver:c,onDrop:u},null,8,["id","title","icon","emoji","minimized-count","onLaunch","onContext"]))),128))],32)])}}}),fL=Object.assign(vt(hL,[["__scopeId","data-v-b2d98d9c"]]),{__name:"OsDock"}),pL=ct({name:"OsContextMenu",__name:"ContextMenu",props:{sections:{},origin:{},z:{},closeOnExecute:{type:Boolean}},emits:["executed","request-close"],setup(t,{emit:e}){const n=t,s=e,i=xe(()=>{const c=[];return n.sections.forEach((u,d)=>{d>0&&c.push({id:`separator-${d}`,label:"---",role:"separator"}),c.push(...u.entries)}),c});function r(){s("request-close")}function o(c){s("executed",c),n.closeOnExecute!==!1&&s("request-close")}function a(c){c.key==="Escape"&&(c.preventDefault(),s("request-close"))}return nn(()=>{window.addEventListener("keydown",a)}),_n(()=>{window.removeEventListener("keydown",a)}),(c,u)=>($(),Ze(Hd,{to:"body"},[v("div",{class:"cm-overlay",role:"presentation",onClick:r},[v("div",{class:"cm-root",onClick:u[0]||(u[0]=Ke(()=>{},["stop"]))},[qe(E_,{entries:i.value,origin:c.origin,z:c.z,onExecuted:o},null,8,["entries","origin","z"])])])]))}}),mL=Object.assign(vt(pL,[["__scopeId","data-v-2c990f8b"]]),{__name:"OsContextMenu"}),gL={class:"notifications-container"},yL=["onClick"],vL=["src"],_L={key:1,class:"notification-icon-default"},wL={key:0,viewBox:"0 0 24 24",fill:"currentColor"},bL={key:1,viewBox:"0 0 24 24",fill:"currentColor"},TL={key:2,viewBox:"0 0 24 24",fill:"currentColor"},IL={key:3,viewBox:"0 0 24 24",fill:"currentColor"},EL={class:"notification-content"},kL={class:"notification-title"},AL={class:"notification-message"},SL={key:0,class:"notification-actions"},CL=["onClick"],RL=["onClick"],PL=ct({__name:"Notifications",setup(t){const{notifications:e,dismissNotification:n}=cf(),s=rt(),i=o=>{if(o.appId){const a=s.windows.find(c=>c.appId===o.appId);a?s.focusWindow(a.id):s.openApp(o.appId)}},r=(o,a)=>{a.action(),n(o.id)};return(o,a)=>($(),Ze(Hd,{to:"body"},[v("div",gL,[qe(J1,{name:"notification",tag:"div"},{default:zd(()=>[($(!0),z(ye,null,Ve(we(e),c=>($(),z("div",{key:c.id,class:Ee(["notification",`notification-${c.type}`]),onClick:u=>i(c)},[c.icon?($(),z("img",{key:0,src:c.icon,class:"notification-icon",alt:""},null,8,vL)):($(),z("div",_L,[c.type==="success"?($(),z("svg",wL,a[0]||(a[0]=[v("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"},null,-1)]))):c.type==="error"?($(),z("svg",bL,a[1]||(a[1]=[v("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"},null,-1)]))):c.type==="warning"?($(),z("svg",TL,a[2]||(a[2]=[v("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"},null,-1)]))):($(),z("svg",IL,a[3]||(a[3]=[v("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"},null,-1)])))])),v("div",EL,[v("div",kL,X(c.title),1),v("div",AL,X(c.message),1),c.actions?($(),z("div",SL,[($(!0),z(ye,null,Ve(c.actions,(u,d)=>($(),z("button",{key:d,onClick:Ke(h=>r(c,u),["stop"]),class:"notification-action"},X(u.label),9,CL))),128))])):Qe("",!0)]),v("button",{onClick:Ke(u=>we(n)(c.id),["stop"]),class:"notification-close","aria-label":"Close notification"},a[4]||(a[4]=[v("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[v("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]),8,RL)],10,yL))),128))]),_:1})])]))}}),xL=Object.assign(vt(PL,[["__scopeId","data-v-9f0b19b2"]]),{__name:"OsNotifications"}),ML={class:"os-root"},DL=["src"],NL=["src"],OL={class:"os-desktop-area"},VL=ct({name:"AppRoot",__name:"app",setup(t){const e=rt(),n=_t(),s=xe(()=>e.wallpaper),i=xe(()=>s.value?s.value.type:null),r=xe(()=>s.value?s.value.value:""),o=xe(()=>{const a=i.value;return a==="video"||a==="gif"?{}:s.value?s.value.type==="image"?{backgroundImage:`url(${s.value.value})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:{background:s.value.value}:{}});return nn(()=>{td(),e.loadSession(),e.initTheme();const{initializeGlobalListeners:a}=eb();a(),n.loadIconPositions(),n.loadIconLayout(),n.registerApps([{id:"finder",title:"Finder",icon:"icons/system/finder.png",emoji:"🗂️",kind:"system"},{id:"textedit",title:"TextEdit",icon:"icons/apps/textEdit.png",emoji:"📝",kind:"app"},{id:"shortcuts",title:"Shortcuts",icon:"icons/system/shortcuts.png",emoji:"⌨️",kind:"system",showOnDesktop:!1},{id:"about",title:"About Webintosh",icon:"icons/system/about.svg",emoji:"ℹ️",kind:"system",defaultRect:{x:100,y:80,width:400,height:600},showOnDesktop:!1},{id:"settings",title:"System Settings",icon:"icons/system/settings.png",emoji:"⚙️",kind:"system",defaultRect:{x:100,y:80,width:900,height:600}},{id:"typingtest",title:"Typing Test 2000",icon:"icons/apps/typingTest.png",emoji:"⌨️",kind:"app",defaultRect:{x:100,y:80,width:900,height:620}},{id:"keystation",title:"KeyStation",icon:"icons/apps/keyStation.png",emoji:"🎹",kind:"app",defaultRect:{x:100,y:80,width:960,height:600}},{id:"yahoomessenger",title:"Yahoo! Messenger",icon:"icons/apps/yahooMessenger.png",emoji:"Yahoo!",kind:"app",defaultRect:{x:100,y:80,width:960,height:600}},{id:"whitenoise",title:"Noise Mixer",icon:"icons/apps/noiseMixer.png",emoji:"🎧",kind:"app",defaultRect:{x:100,y:80,width:900,height:700}}]),n.loadMinOrder(),td()}),(a,c)=>{const u=NS,d=WS,h=nL,p=fL,y=mL,_=xL;return $(),z("div",ML,[v("div",{class:Ee(["os-wallpaper",{"has-wallpaper":!!s.value}]),style:nt(o.value)},[i.value==="video"?($(),z("video",{key:0,src:r.value,autoplay:"",loop:"",muted:"",playsinline:"",class:"wallpaper-video"},null,8,DL)):i.value==="gif"?($(),z("img",{key:1,src:r.value,class:"wallpaper-image"},null,8,NL)):Qe("",!0)],6),qe(u),v("main",OL,[qe(d),qe(h),qe(p),we(e).menu.openType==="context"&&we(e).menu.contextTemplate&&we(e).menu.contextPos?($(),Ze(y,{key:0,sections:we(e).menu.contextTemplate.sections,origin:we(e).menu.contextPos,z:3e3,onExecuted:c[0]||(c[0]=I=>we(e).closeMenu()),onRequestClose:c[1]||(c[1]=I=>we(e).closeMenu())},null,8,["sections","origin"])):Qe("",!0),qe(_)])])}}}),LL={__name:"nuxt-error-page",props:{error:Object},setup(t){const n=t.error;n.stack&&n.stack.split(`
`).splice(1).map(h=>({text:h.replace("webpack:/","").replace(".vue",".js").trim(),internal:h.includes("node_modules")&&!h.includes(".cache")||h.includes("internal")||h.includes("new Promise")})).map(h=>`<span class="stack${h.internal?" internal":""}">${h.text}</span>`).join(`
`);const s=Number(n.statusCode||500),i=s===404,r=n.statusMessage??(i?"Page Not Found":"Internal Server Error"),o=n.message||n.toString(),a=void 0,d=i?Ru(()=>Yu(()=>import("./CRafEK3T.js"),__vite__mapDeps([0,1]),import.meta.url)):Ru(()=>Yu(()=>import("./CAbslg5S.js"),__vite__mapDeps([2,3]),import.meta.url));return(h,p)=>($(),Ze(we(d),Db(_v({statusCode:we(s),statusMessage:we(r),description:we(o),stack:we(a)})),null,16))}},FL={key:0},oy={__name:"nuxt-root",setup(t){const e=()=>null,n=pt(),s=n.deferHydration();if(n.isHydrating){const u=n.hooks.hookOnce("app:error",s);Bs().beforeEach(u)}const i=!1;Gd(Kv,Gv()),n.hooks.callHookWith(u=>u.map(d=>d()),"vue:setup");const r=oh(),o=!1,a=/bot\b|chrome-lighthouse|facebookexternalhit|google\b/i;qy((u,d,h)=>{if(n.hooks.callHook("vue:error",u,d,h).catch(p=>console.error("[nuxt] Error in `vue:error` hook",p)),a.test(navigator.userAgent))return n.hooks.callHook("app:error",u),console.error(`[nuxt] Not rendering error page for bot with user agent \`${navigator.userAgent}\`:`,u),!1;if(OE(u)&&(u.fatal||u.unhandled))return n.runWithContext(()=>DE(u)),!1});const c=!1;return(u,d)=>($(),Ze(c1,{onResolve:we(s)},{default:zd(()=>[we(o)?($(),z("div",FL)):we(r)?($(),Ze(we(LL),{key:1,error:we(r)},null,8,["error"])):we(c)?($(),Ze(we(e),{key:2,context:we(c)},null,8,["context"])):we(i)?($(),Ze(DT(we(i)),{key:3})):($(),Ze(we(VL),{key:4}))]),_:1},8,["onResolve"]))}};let ay;{let t;ay=async function(){if(t)return t;const n=!!(window.__NUXT__?.serverRendered??document.getElementById("__NUXT_DATA__")?.dataset.ssr==="true"),s=n?cI(oy):lI(oy),i=gE({vueApp:s});async function r(o){await i.callHook("app:error",o),i.payload.error||=ah(o)}s.config.errorHandler=r,i.hook("app:suspense:resolve",()=>{s.config.errorHandler===r&&(s.config.errorHandler=void 0)}),!n&&qp.id&&i.hook("app:suspense:resolve",()=>{document.getElementById(qp.id)?.remove()});try{await _E(i,sS)}catch(o){r(o)}try{await i.hooks.callHook("app:created",s),await i.hooks.callHook("app:beforeMount",s),s.mount(fE),await i.hooks.callHook("app:mounted",s),await as()}catch(o){r(o)}return s},t=ay().catch(e=>{throw console.error("Error while mounting app:",e),e})}export{X as A,qe as B,zd as C,pi as D,a_ as E,jL as F,BL as G,an as H,uA as I,zL as J,vt as _,pt as a,dh as b,lm as c,ct as d,Kd as e,UL as f,MT as g,Lu as h,ME as i,xe as j,Ir as k,Ql as l,fr as m,xE as n,nn as o,th as p,nh as q,te as r,ku as s,$L as t,Bs as u,wk as v,Bu as w,z as x,$ as y,v as z};
